<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>IRIS: stats.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_014faa727c0b2aaba2cbdd8f326de4f6.html">source</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_4516642e80adc9bf50ea604a2fbf2492.html">zesto</a>
  </div>
</div>
<div class="contents">
<h1>zesto/stats.h</h1><a href="zesto_2stats_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* stats.h - statistical package interfaces */</span>
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="comment">/* SimpleScalar(TM) Tool Suite</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright (C) 1994-2002 by Todd M. Austin, Ph.D. and SimpleScalar, LLC.</span>
<a name="l00005"></a>00005 <span class="comment"> * All Rights Reserved. </span>
<a name="l00006"></a>00006 <span class="comment"> * </span>
<a name="l00007"></a>00007 <span class="comment"> * THIS IS A LEGAL DOCUMENT, BY USING SIMPLESCALAR,</span>
<a name="l00008"></a>00008 <span class="comment"> * YOU ARE AGREEING TO THESE TERMS AND CONDITIONS.</span>
<a name="l00009"></a>00009 <span class="comment"> * </span>
<a name="l00010"></a>00010 <span class="comment"> * No portion of this work may be used by any commercial entity, or for any</span>
<a name="l00011"></a>00011 <span class="comment"> * commercial purpose, without the prior, written permission of SimpleScalar,</span>
<a name="l00012"></a>00012 <span class="comment"> * LLC (info@simplescalar.com). Nonprofit and noncommercial use is permitted</span>
<a name="l00013"></a>00013 <span class="comment"> * as described below.</span>
<a name="l00014"></a>00014 <span class="comment"> * </span>
<a name="l00015"></a>00015 <span class="comment"> * 1. SimpleScalar is provided AS IS, with no warranty of any kind, express</span>
<a name="l00016"></a>00016 <span class="comment"> * or implied. The user of the program accepts full responsibility for the</span>
<a name="l00017"></a>00017 <span class="comment"> * application of the program and the use of any results.</span>
<a name="l00018"></a>00018 <span class="comment"> * </span>
<a name="l00019"></a>00019 <span class="comment"> * 2. Nonprofit and noncommercial use is encouraged. SimpleScalar may be</span>
<a name="l00020"></a>00020 <span class="comment"> * downloaded, compiled, executed, copied, and modified solely for nonprofit,</span>
<a name="l00021"></a>00021 <span class="comment"> * educational, noncommercial research, and noncommercial scholarship</span>
<a name="l00022"></a>00022 <span class="comment"> * purposes provided that this notice in its entirety accompanies all copies.</span>
<a name="l00023"></a>00023 <span class="comment"> * Copies of the modified software can be delivered to persons who use it</span>
<a name="l00024"></a>00024 <span class="comment"> * solely for nonprofit, educational, noncommercial research, and</span>
<a name="l00025"></a>00025 <span class="comment"> * noncommercial scholarship purposes provided that this notice in its</span>
<a name="l00026"></a>00026 <span class="comment"> * entirety accompanies all copies.</span>
<a name="l00027"></a>00027 <span class="comment"> * </span>
<a name="l00028"></a>00028 <span class="comment"> * 3. ALL COMMERCIAL USE, AND ALL USE BY FOR PROFIT ENTITIES, IS EXPRESSLY</span>
<a name="l00029"></a>00029 <span class="comment"> * PROHIBITED WITHOUT A LICENSE FROM SIMPLESCALAR, LLC (info@simplescalar.com).</span>
<a name="l00030"></a>00030 <span class="comment"> * </span>
<a name="l00031"></a>00031 <span class="comment"> * 4. No nonprofit user may place any restrictions on the use of this software,</span>
<a name="l00032"></a>00032 <span class="comment"> * including as modified by the user, by any other authorized user.</span>
<a name="l00033"></a>00033 <span class="comment"> * </span>
<a name="l00034"></a>00034 <span class="comment"> * 5. Noncommercial and nonprofit users may distribute copies of SimpleScalar</span>
<a name="l00035"></a>00035 <span class="comment"> * in compiled or executable form as set forth in Section 2, provided that</span>
<a name="l00036"></a>00036 <span class="comment"> * either: (A) it is accompanied by the corresponding machine-readable source</span>
<a name="l00037"></a>00037 <span class="comment"> * code, or (B) it is accompanied by a written offer, with no time limit, to</span>
<a name="l00038"></a>00038 <span class="comment"> * give anyone a machine-readable copy of the corresponding source code in</span>
<a name="l00039"></a>00039 <span class="comment"> * return for reimbursement of the cost of distribution. This written offer</span>
<a name="l00040"></a>00040 <span class="comment"> * must permit verbatim duplication by anyone, or (C) it is distributed by</span>
<a name="l00041"></a>00041 <span class="comment"> * someone who received only the executable form, and is accompanied by a</span>
<a name="l00042"></a>00042 <span class="comment"> * copy of the written offer of source code.</span>
<a name="l00043"></a>00043 <span class="comment"> * </span>
<a name="l00044"></a>00044 <span class="comment"> * 6. SimpleScalar was developed by Todd M. Austin, Ph.D. The tool suite is</span>
<a name="l00045"></a>00045 <span class="comment"> * currently maintained by SimpleScalar LLC (info@simplescalar.com). US Mail:</span>
<a name="l00046"></a>00046 <span class="comment"> * 2395 Timbercrest Court, Ann Arbor, MI 48105.</span>
<a name="l00047"></a>00047 <span class="comment"> * </span>
<a name="l00048"></a>00048 <span class="comment"> * Copyright (C) 1994-2002 by Todd M. Austin, Ph.D. and SimpleScalar, LLC.</span>
<a name="l00049"></a>00049 <span class="comment"> */</span>
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="preprocessor">#ifndef STAT_H</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span><span class="preprocessor">#define STAT_H</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span>
<a name="l00054"></a>00054 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
<a name="l00056"></a>00056 <span class="preprocessor">#endif</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span>
<a name="l00058"></a>00058 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00059"></a>00059 
<a name="l00060"></a>00060 <span class="preprocessor">#include "<a class="code" href="host_8h.html">host.h</a>"</span>
<a name="l00061"></a>00061 <span class="preprocessor">#include "<a class="code" href="machine_8h.html">machine.h</a>"</span>
<a name="l00062"></a>00062 <span class="preprocessor">#include "<a class="code" href="eval_8h.html">eval.h</a>"</span>
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 <span class="comment">/*</span>
<a name="l00065"></a>00065 <span class="comment"> * The stats package is a uniform module for handling statistical variables,</span>
<a name="l00066"></a>00066 <span class="comment"> * including counters, distributions, and expressions.  The user must first</span>
<a name="l00067"></a>00067 <span class="comment"> * create a stats database using stat_new(), then statical counters are added</span>
<a name="l00068"></a>00068 <span class="comment"> * to the database using the *_reg_*() functions.  Interfaces are included to</span>
<a name="l00069"></a>00069 <span class="comment"> * allocate and manipulate distributions (histograms) and general expression</span>
<a name="l00070"></a>00070 <span class="comment"> * of other statistical variables constants.  Statistical variables can be</span>
<a name="l00071"></a>00071 <span class="comment"> * located by name using stat_find_stat().  And, statistics can be print in</span>
<a name="l00072"></a>00072 <span class="comment"> * a highly standardized and stylized fashion using stat_print_stats().</span>
<a name="l00073"></a>00073 <span class="comment"> */</span>
<a name="l00074"></a>00074 
<a name="l00075"></a>00075 <span class="comment">/* stat variable classes */</span>
<a name="l00076"></a><a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e596">00076</a> <span class="keyword">enum</span> <a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e596">stat_class_t</a> {
<a name="l00077"></a><a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e5962bd59ac0b21ec35ef900837744b7e2f6">00077</a>   <a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e5962bd59ac0b21ec35ef900837744b7e2f6">sc_int</a> = 0,                   <span class="comment">/* integer stat */</span>
<a name="l00078"></a><a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e596990da3af9bb5feeda3bd4b1ab35065f0">00078</a>   <a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e596990da3af9bb5feeda3bd4b1ab35065f0">sc_uint</a>,                      <span class="comment">/* unsigned integer stat */</span>
<a name="l00079"></a><a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e59643c3f672f0566de30cacd45bb5814b49">00079</a>   <a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e59643c3f672f0566de30cacd45bb5814b49">sc_qword</a>,                     <span class="comment">/* qword integer stat */</span>
<a name="l00080"></a><a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e596e03324053fb098292f6cfc50e98f70ab">00080</a>   <a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e596e03324053fb098292f6cfc50e98f70ab">sc_sqword</a>,                    <span class="comment">/* signed qword integer stat */</span>
<a name="l00081"></a><a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e596ca678c49a3cffb48af18908c36a28856">00081</a>   <a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e596ca678c49a3cffb48af18908c36a28856">sc_float</a>,                     <span class="comment">/* single-precision FP stat */</span>
<a name="l00082"></a><a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e5964bdab5b3d74294acfd84efa21ca97d01">00082</a>   <a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e5964bdab5b3d74294acfd84efa21ca97d01">sc_double</a>,                    <span class="comment">/* double-precision FP stat */</span>
<a name="l00083"></a><a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e59678bd6bf930700d807a586026652f9558">00083</a>   <a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e59678bd6bf930700d807a586026652f9558">sc_dist</a>,                      <span class="comment">/* array distribution stat */</span>
<a name="l00084"></a><a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e596eec35818917bbdd89c0ca202d966ecdb">00084</a>   <a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e596eec35818917bbdd89c0ca202d966ecdb">sc_sdist</a>,                     <span class="comment">/* sparse array distribution stat */</span>
<a name="l00085"></a><a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e596c764056d87be9592100bdbc0c729fb5f">00085</a>   <a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e596c764056d87be9592100bdbc0c729fb5f">sc_formula</a>,                   <span class="comment">/* stat expression formula */</span>
<a name="l00086"></a><a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e5963347ce5c90c6634f001634d8ab4b1e7a">00086</a>   <a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e5963347ce5c90c6634f001634d8ab4b1e7a">sc_string</a>,    <span class="comment">/* named string */</span>
<a name="l00087"></a><a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e596805b2b994341a4b8f3a86f07b7388ea1">00087</a>   <a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e596805b2b994341a4b8f3a86f07b7388ea1">sc_note</a>,      <span class="comment">/* comment/note string */</span>
<a name="l00088"></a><a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e5968b6568f9e4b06cb9657df8a48956de73">00088</a>   <a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e5968b6568f9e4b06cb9657df8a48956de73">sc_NUM</a>
<a name="l00089"></a>00089 };
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="comment">/* sparse array distributions are implemented with a hash table */</span>
<a name="l00092"></a><a class="code" href="zesto_2stats_8h.html#a9de58549ac3f9cc4c23ce618b91b53f">00092</a> <span class="preprocessor">#define HTAB_SZ                 1024</span>
<a name="l00093"></a><a class="code" href="zesto_2stats_8h.html#cd35c0c70acba6ef53e0e20c15f09395">00093</a> <span class="preprocessor"></span><span class="preprocessor">#define HTAB_HASH(I)            ((((I) &gt;&gt; 8) ^ (I)) &amp; (HTAB_SZ - 1))</span>
<a name="l00094"></a>00094 <span class="preprocessor"></span>
<a name="l00095"></a>00095 <span class="comment">/* hash table bucket definition */</span>
<a name="l00096"></a><a class="code" href="structbucket__t.html">00096</a> <span class="keyword">struct </span><a class="code" href="structbucket__t.html">bucket_t</a> {
<a name="l00097"></a><a class="code" href="structbucket__t.html#2c556ac0cf0d2de0d34dec2da5283b98">00097</a>   <span class="keyword">struct </span><a class="code" href="structbucket__t.html">bucket_t</a> *<a class="code" href="structbucket__t.html#2c556ac0cf0d2de0d34dec2da5283b98">next</a>;        <span class="comment">/* pointer to the next bucket */</span>
<a name="l00098"></a><a class="code" href="structbucket__t.html#73ae46066728a586dc5ac55431da1d9e">00098</a>   <a class="code" href="machine_8h.html#fba784f22c1d8233f95c4f4db103018a">md_addr_t</a> <a class="code" href="structbucket__t.html#73ae46066728a586dc5ac55431da1d9e">index</a>;              <span class="comment">/* bucket index - as large as an addr */</span>
<a name="l00099"></a><a class="code" href="structbucket__t.html#2b62c392a3f40f5ac7d0915ea844130b">00099</a>   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structbucket__t.html#2b62c392a3f40f5ac7d0915ea844130b">count</a>;           <span class="comment">/* bucket count */</span>
<a name="l00100"></a>00100 };
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 <span class="comment">/* forward declaration */</span>
<a name="l00103"></a>00103 <span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a>;
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 <span class="comment">/* enable distribution components:  index, count, probability, cumulative */</span>
<a name="l00106"></a><a class="code" href="zesto_2stats_8h.html#a2ea8c2ebd4b70b8bb60561c6fada674">00106</a> <span class="preprocessor">#define PF_COUNT                0x0001</span>
<a name="l00107"></a><a class="code" href="zesto_2stats_8h.html#7e857abbfb7e3dc6d4446052a96653a3">00107</a> <span class="preprocessor"></span><span class="preprocessor">#define PF_PDF                  0x0002</span>
<a name="l00108"></a><a class="code" href="zesto_2stats_8h.html#0cf410069cb11a44448cea46cf11c047">00108</a> <span class="preprocessor"></span><span class="preprocessor">#define PF_CDF                  0x0004</span>
<a name="l00109"></a><a class="code" href="zesto_2stats_8h.html#3ea4fdaa5e25d50a550571bb829f709c">00109</a> <span class="preprocessor"></span><span class="preprocessor">#define PF_ALL                  (PF_COUNT|PF_PDF|PF_CDF)</span>
<a name="l00110"></a>00110 <span class="preprocessor"></span>
<a name="l00111"></a>00111 <span class="comment">/* user-defined print function, if this option is selected, a function of this</span>
<a name="l00112"></a>00112 <span class="comment">   form is called for each bucket in the distribution, in ascending index</span>
<a name="l00113"></a>00113 <span class="comment">   order */</span>
<a name="l00114"></a>00114 <span class="keyword">typedef</span> void
<a name="l00115"></a><a class="code" href="zesto_2stats_8h.html#e4b17f8ba8e81941519f3e55dd08a4ff">00115</a> (*<a class="code" href="zesto_2stats_8h.html#e4b17f8ba8e81941519f3e55dd08a4ff">print_fn_t</a>)(<span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a> *stat, <span class="comment">/* the stat variable being printed */</span>
<a name="l00116"></a>00116               <a class="code" href="machine_8h.html#fba784f22c1d8233f95c4f4db103018a">md_addr_t</a> index,          <span class="comment">/* entry index to print */</span>
<a name="l00117"></a>00117               <span class="keywordtype">int</span> count,                <span class="comment">/* entry count */</span>
<a name="l00118"></a>00118               <span class="keywordtype">double</span> sum,               <span class="comment">/* cumulative sum */</span>
<a name="l00119"></a>00119               <span class="keywordtype">double</span> total);            <span class="comment">/* total count for distribution */</span>
<a name="l00120"></a>00120 
<a name="l00121"></a>00121 <span class="comment">/* statistical variable definition */</span>
<a name="l00122"></a><a class="code" href="structstat__stat__t.html">00122</a> <span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a> {
<a name="l00123"></a><a class="code" href="structstat__stat__t.html#96bb6646d86da1836eff66d9e4969cb7">00123</a>   <span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a> *<a class="code" href="structstat__stat__t.html#96bb6646d86da1836eff66d9e4969cb7">next</a>;     <span class="comment">/* pointer to next stat in database list */</span>
<a name="l00124"></a><a class="code" href="structstat__stat__t.html#68865d7221abe93b4b3c331e192f0d38">00124</a>   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#68865d7221abe93b4b3c331e192f0d38">name</a>;                     <span class="comment">/* stat name */</span>
<a name="l00125"></a><a class="code" href="structstat__stat__t.html#bd10a35fb99e5a028095882d37ca2309">00125</a>   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#bd10a35fb99e5a028095882d37ca2309">desc</a>;                     <span class="comment">/* stat description */</span>
<a name="l00126"></a><a class="code" href="structstat__stat__t.html#cb226be68234f23178a842e1a4acf8cd">00126</a>   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#cb226be68234f23178a842e1a4acf8cd">format</a>;                   <span class="comment">/* stat output print format */</span>
<a name="l00127"></a><a class="code" href="structstat__stat__t.html#0bc6f92d0330183b00c273b917c83a21">00127</a>   <span class="keyword">enum</span> <a class="code" href="zesto_2stats_8h.html#7caa50c971612efca8f45cbf1106e596">stat_class_t</a> <a class="code" href="structstat__stat__t.html#0bc6f92d0330183b00c273b917c83a21">sc</a>;         <span class="comment">/* stat class */</span>
<a name="l00128"></a><a class="code" href="structstat__stat__t.html#9f0a547ad6eacd4d8192c026eb61753c">00128</a>   <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t.html#9f0a547ad6eacd4d8192c026eb61753c">print_me</a>;  <span class="comment">/* set to FALSE to avoid printing */</span>
<a name="l00129"></a><a class="code" href="unionstat__stat__t_1_1stat__variant__t.html">00129</a>   <span class="keyword">union </span><a class="code" href="unionstat__stat__t_1_1stat__variant__t.html">stat_variant_t</a> {
<a name="l00130"></a>00130     <span class="comment">/* sc == sc_int */</span>
<a name="l00131"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__int__t.html">00131</a>     <span class="keyword">struct </span><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__int__t.html">stat_for_int_t</a> {
<a name="l00132"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__int__t.html#eea64ae6b7106df10a49d291d92a83ac">00132</a>       <span class="keywordtype">int</span> *<a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__int__t.html#eea64ae6b7106df10a49d291d92a83ac">var</a>;                 <span class="comment">/* integer stat variable */</span>
<a name="l00133"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__int__t.html#f198acf7ec0e621ea74ce7059911c444">00133</a>       <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__int__t.html#f198acf7ec0e621ea74ce7059911c444">init_val</a>;             <span class="comment">/* initial integer value */</span>
<a name="l00134"></a>00134     } <a class="code" href="unionstat__stat__t_1_1stat__variant__t.html#a1425796da1396283341f38a58260678">for_int</a>;
<a name="l00135"></a>00135     <span class="comment">/* sc == sc_uint */</span>
<a name="l00136"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__uint__t.html">00136</a>     <span class="keyword">struct </span><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__uint__t.html">stat_for_uint_t</a> {
<a name="l00137"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__uint__t.html#19e295ab1d59230b341d8bc975b21e50">00137</a>       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *<a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__uint__t.html#19e295ab1d59230b341d8bc975b21e50">var</a>;        <span class="comment">/* unsigned integer stat variable */</span>
<a name="l00138"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__uint__t.html#ce84826884ce72982fd30792d2b1fbd5">00138</a>       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__uint__t.html#ce84826884ce72982fd30792d2b1fbd5">init_val</a>;    <span class="comment">/* initial unsigned integer value */</span>
<a name="l00139"></a>00139     } <a class="code" href="unionstat__stat__t_1_1stat__variant__t.html#c0cd7d76be8b7f09a4a009d5a5a2290c">for_uint</a>;
<a name="l00140"></a>00140     <span class="comment">/* sc == sc_qword */</span>
<a name="l00141"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__qword__t.html">00141</a>     <span class="keyword">struct </span><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__qword__t.html">stat_for_qword_t</a> {
<a name="l00142"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__qword__t.html#3a4e4766ee7b011374e1f6b639835949">00142</a>       qword_t *<a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__qword__t.html#3a4e4766ee7b011374e1f6b639835949">var</a>;             <span class="comment">/* qword integer stat variable */</span>
<a name="l00143"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__qword__t.html#2b9cfcbe9842490e03b527ba86c0f243">00143</a>       qword_t <a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__qword__t.html#2b9cfcbe9842490e03b527ba86c0f243">init_val</a>;         <span class="comment">/* qword integer value */</span>
<a name="l00144"></a>00144     } <a class="code" href="unionstat__stat__t_1_1stat__variant__t.html#eb2b8064d59000072d0941358a403007">for_qword</a>;
<a name="l00145"></a>00145     <span class="comment">/* sc == sc_sqword */</span>
<a name="l00146"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__sqword__t.html">00146</a>     <span class="keyword">struct </span><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__sqword__t.html">stat_for_sqword_t</a> {
<a name="l00147"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__sqword__t.html#d9a3d1c90ac2c5e14012a39df4b0620d">00147</a>       sqword_t *<a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__sqword__t.html#d9a3d1c90ac2c5e14012a39df4b0620d">var</a>;            <span class="comment">/* signed qword integer stat variable */</span>
<a name="l00148"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__sqword__t.html#d0b607ff09eeb1a73c9998892b6cee89">00148</a>       sqword_t <a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__sqword__t.html#d0b607ff09eeb1a73c9998892b6cee89">init_val</a>;        <span class="comment">/* signed qword integer value */</span>
<a name="l00149"></a>00149     } <a class="code" href="unionstat__stat__t_1_1stat__variant__t.html#13d64976ee4eda8ed79d00684181a0b5">for_sqword</a>;
<a name="l00150"></a>00150     <span class="comment">/* sc == sc_float */</span>
<a name="l00151"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__float__t.html">00151</a>     <span class="keyword">struct </span><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__float__t.html">stat_for_float_t</a> {
<a name="l00152"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__float__t.html#e2aff281c83fa642d9c52d8c446c27fc">00152</a>       <span class="keywordtype">float</span> *<a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__float__t.html#e2aff281c83fa642d9c52d8c446c27fc">var</a>;               <span class="comment">/* float stat variable */</span>
<a name="l00153"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__float__t.html#4fb90733fffd75a512bc1b5e73ba2d7a">00153</a>       <span class="keywordtype">float</span> <a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__float__t.html#4fb90733fffd75a512bc1b5e73ba2d7a">init_val</a>;           <span class="comment">/* initial float value */</span>
<a name="l00154"></a>00154     } <a class="code" href="unionstat__stat__t_1_1stat__variant__t.html#203abff22707b7e880b4b65f75888c0b">for_float</a>;
<a name="l00155"></a>00155     <span class="comment">/* sc == sc_double */</span>
<a name="l00156"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__double__t.html">00156</a>     <span class="keyword">struct </span><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__double__t.html">stat_for_double_t</a> {
<a name="l00157"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__double__t.html#ab69be2899a26793a266e9e2cd3af296">00157</a>       <span class="keywordtype">double</span> *<a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__double__t.html#ab69be2899a26793a266e9e2cd3af296">var</a>;              <span class="comment">/* double stat variable */</span>
<a name="l00158"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__double__t.html#62951000571da0597392fc6e53fc848c">00158</a>       <span class="keywordtype">double</span> <a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__double__t.html#62951000571da0597392fc6e53fc848c">init_val</a>;          <span class="comment">/* initial double value */</span>
<a name="l00159"></a>00159     } <a class="code" href="unionstat__stat__t_1_1stat__variant__t.html#62e3839dbb8f83bf015c9168c76db058">for_double</a>;
<a name="l00160"></a>00160     <span class="comment">/* sc == sc_dist */</span>
<a name="l00161"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html">00161</a>     <span class="keyword">struct </span><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html">stat_for_dist_t</a> {
<a name="l00162"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html#cf838e86eb10d1c30b75c677c4e4babf">00162</a>       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html#cf838e86eb10d1c30b75c677c4e4babf">init_val</a>;    <span class="comment">/* initial dist value */</span>
<a name="l00163"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html#8106c05e3835d83d670004c91e00a91a">00163</a>       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *<a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html#8106c05e3835d83d670004c91e00a91a">arr</a>;        <span class="comment">/* non-sparse array pointer */</span>
<a name="l00164"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html#d997ef4ad72e5dde6e5da2fd7b93a8ef">00164</a>       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html#d997ef4ad72e5dde6e5da2fd7b93a8ef">arr_sz</a>;      <span class="comment">/* array size */</span>
<a name="l00165"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html#4fdb7fb4e98e50fd1f055830ec84d8f6">00165</a>       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html#4fdb7fb4e98e50fd1f055830ec84d8f6">bucket_sz</a>;   <span class="comment">/* array bucket size */</span>
<a name="l00166"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html#d93269685011df33c5307bde34cbe6a5">00166</a>       <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html#d93269685011df33c5307bde34cbe6a5">pf</a>;                   <span class="comment">/* printables */</span>
<a name="l00167"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html#3cd587569031320472812e9de6782d52">00167</a>       <span class="keyword">const</span> <span class="keywordtype">char</span> **<a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html#3cd587569031320472812e9de6782d52">imap</a>;                <span class="comment">/* index -&gt; string map */</span>
<a name="l00168"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html#062cd5eeb48233dff42f18209915866d">00168</a>       <a class="code" href="zesto_2stats_8h.html#e4b17f8ba8e81941519f3e55dd08a4ff">print_fn_t</a> <a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html#062cd5eeb48233dff42f18209915866d">print_fn</a>;      <span class="comment">/* optional user-specified print fn */</span>
<a name="l00169"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html#c05e0a96a5fd4ec3b23d816e18ef041f">00169</a>       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__dist__t.html#c05e0a96a5fd4ec3b23d816e18ef041f">overflows</a>;   <span class="comment">/* total overflows in stat_add_samples() */</span>
<a name="l00170"></a>00170     } <a class="code" href="unionstat__stat__t_1_1stat__variant__t.html#a51aa61f39ce367c54e7f4fdb6d8601f">for_dist</a>;
<a name="l00171"></a>00171     <span class="comment">/* sc == sc_sdist */</span>
<a name="l00172"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__sdist__t.html">00172</a>     <span class="keyword">struct </span><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__sdist__t.html">stat_for_sdist_t</a> {
<a name="l00173"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__sdist__t.html#a0d1591010e71ffeca4fecde55ae7048">00173</a>       <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__sdist__t.html#a0d1591010e71ffeca4fecde55ae7048">init_val</a>;    <span class="comment">/* initial dist value */</span>
<a name="l00174"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__sdist__t.html#2b5c4eab32f9b5f9768b0502a4282971">00174</a>       <span class="keyword">struct </span><a class="code" href="structbucket__t.html">bucket_t</a> **<a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__sdist__t.html#2b5c4eab32f9b5f9768b0502a4282971">sarr</a>;   <span class="comment">/* sparse array pointer */</span>
<a name="l00175"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__sdist__t.html#3c1eec18e4bd8285b0364a234f5d417c">00175</a>       <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__sdist__t.html#3c1eec18e4bd8285b0364a234f5d417c">pf</a>;                   <span class="comment">/* printables */</span>
<a name="l00176"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__sdist__t.html#6d67b03ce26ef1d3f387b631729feb36">00176</a>       <a class="code" href="zesto_2stats_8h.html#e4b17f8ba8e81941519f3e55dd08a4ff">print_fn_t</a> <a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__sdist__t.html#6d67b03ce26ef1d3f387b631729feb36">print_fn</a>;      <span class="comment">/* optional user-specified print fn */</span>
<a name="l00177"></a>00177     } <a class="code" href="unionstat__stat__t_1_1stat__variant__t.html#102c0ec3b01abd1f49d28955cf2f7f70">for_sdist</a>;
<a name="l00178"></a>00178     <span class="comment">/* sc == sc_formula */</span>
<a name="l00179"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__formula__t.html">00179</a>     <span class="keyword">struct </span><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__formula__t.html">stat_for_formula_t</a> {
<a name="l00180"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__formula__t.html#fd80f878ea2c6b0d537d6a86f1fab349">00180</a>       <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__formula__t.html#fd80f878ea2c6b0d537d6a86f1fab349">formula</a>;              <span class="comment">/* stat formula, see eval.h for format */</span>
<a name="l00181"></a>00181     } <a class="code" href="unionstat__stat__t_1_1stat__variant__t.html#92203435c1cd730ade85aad02335d3c9">for_formula</a>;
<a name="l00182"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__string__t.html">00182</a>     <span class="keyword">struct </span><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__string__t.html">stat_for_string_t</a> {
<a name="l00183"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__string__t.html#9c6caa2762e366011926bfa8822121eb">00183</a>       <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__string__t.html#9c6caa2762e366011926bfa8822121eb">string</a>;               <span class="comment">/* stat string */</span>
<a name="l00184"></a>00184     } <a class="code" href="unionstat__stat__t_1_1stat__variant__t.html#6beb9caf9cfa05368a2b2e887d674a3a">for_string</a>;
<a name="l00185"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__note__t.html">00185</a>     <span class="keyword">struct </span><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__note__t.html">stat_for_note_t</a> {
<a name="l00186"></a><a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__note__t.html#ba8beddca224294780886fbb0828ebe3">00186</a>       <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t_1_1stat__variant__t_1_1stat__for__note__t.html#ba8beddca224294780886fbb0828ebe3">note</a>;         <span class="comment">/* stat note/comment */</span>
<a name="l00187"></a>00187     } <a class="code" href="unionstat__stat__t_1_1stat__variant__t.html#b74cc2e3db13a9192faba929e29de3da">for_note</a>;
<a name="l00188"></a>00188   } <a class="code" href="structstat__stat__t.html#f97c4cea4ea2372a78b0ae1f94db25ac">variant</a>;
<a name="l00189"></a>00189 };
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 <span class="comment">/* statistical database */</span>
<a name="l00192"></a><a class="code" href="structstat__sdb__t.html">00192</a> <span class="keyword">struct </span><a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> {
<a name="l00193"></a><a class="code" href="structstat__sdb__t.html#98bbc60c4719f3b34de974d46ed19193">00193</a>   <span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a> *<a class="code" href="structstat__sdb__t.html#98bbc60c4719f3b34de974d46ed19193">stats</a>;            <span class="comment">/* list of stats in database */</span>
<a name="l00194"></a><a class="code" href="structstat__sdb__t.html#0732435f2f9582ba461271c8682c1e59">00194</a>   <span class="keyword">struct </span><a class="code" href="structeval__state__t.html">eval_state_t</a> *<a class="code" href="structstat__sdb__t.html#0732435f2f9582ba461271c8682c1e59">evaluator</a>;       <span class="comment">/* an expression evaluator */</span>
<a name="l00195"></a>00195 };
<a name="l00196"></a>00196 
<a name="l00197"></a>00197 <span class="comment">/* evaluate a stat as an expression */</span>
<a name="l00198"></a>00198 <span class="keyword">struct </span><a class="code" href="structeval__value__t.html">eval_value_t</a>
<a name="l00199"></a>00199 <a class="code" href="zesto_2stats_8h.html#d675ee9049262ae066d7624c9c60f7e7">stat_eval_ident</a>(struct <a class="code" href="structeval__state__t.html">eval_state_t</a> *es);<span class="comment">/* expression stat to evaluate */</span>
<a name="l00200"></a>00200 
<a name="l00201"></a>00201 <span class="comment">/* create a new stats database */</span>
<a name="l00202"></a>00202 <span class="keyword">struct </span><a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> *<a class="code" href="zesto_2stats_8h.html#cf6221385da9c71331ab5e4f718299da">stat_new</a>(<span class="keywordtype">void</span>);
<a name="l00203"></a>00203 
<a name="l00204"></a>00204 <span class="comment">/* delete a stats database */</span>
<a name="l00205"></a>00205 <span class="keywordtype">void</span>
<a name="l00206"></a>00206 <a class="code" href="zesto_2stats_8h.html#c05227b0026bef4b301e9d8bdf3fcab7">stat_delete</a>(<span class="keyword">struct</span> <a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> *sdb);    <span class="comment">/* stats database */</span>
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 <span class="comment">/* register an integer statistical variable */</span>
<a name="l00209"></a>00209 <span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a> *
<a name="l00210"></a>00210 <a class="code" href="zesto_2stats_8h.html#29b54a586f4845a6bb5dabbe04ad43be">stat_reg_int</a>(<span class="keyword">struct</span> <a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> *sdb,    <span class="comment">/* stat database */</span>
<a name="l00211"></a>00211        <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t.html#9f0a547ad6eacd4d8192c026eb61753c">print_me</a>,
<a name="l00212"></a>00212              <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#68865d7221abe93b4b3c331e192f0d38">name</a>,          <span class="comment">/* stat variable name */</span>
<a name="l00213"></a>00213              <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#bd10a35fb99e5a028095882d37ca2309">desc</a>,          <span class="comment">/* stat variable description */</span>
<a name="l00214"></a>00214              <span class="keywordtype">int</span> *var,                  <span class="comment">/* stat variable */</span>
<a name="l00215"></a>00215              <span class="keywordtype">int</span> init_val,              <span class="comment">/* stat variable initial value */</span>
<a name="l00216"></a>00216              <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#cb226be68234f23178a842e1a4acf8cd">format</a>);               <span class="comment">/* optional variable output format */</span>
<a name="l00217"></a>00217 
<a name="l00218"></a>00218 <span class="comment">/* register an unsigned integer statistical variable */</span>
<a name="l00219"></a>00219 <span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a> *
<a name="l00220"></a>00220 <a class="code" href="zesto_2stats_8h.html#bc60b66d6bc63111e715425410f1156a">stat_reg_uint</a>(<span class="keyword">struct</span> <a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> *sdb,   <span class="comment">/* stat database */</span>
<a name="l00221"></a>00221         <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t.html#9f0a547ad6eacd4d8192c026eb61753c">print_me</a>,
<a name="l00222"></a>00222               <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#68865d7221abe93b4b3c331e192f0d38">name</a>,         <span class="comment">/* stat variable name */</span>
<a name="l00223"></a>00223               <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#bd10a35fb99e5a028095882d37ca2309">desc</a>,         <span class="comment">/* stat variable description */</span>
<a name="l00224"></a>00224               <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *var,        <span class="comment">/* stat variable */</span>
<a name="l00225"></a>00225               <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> init_val,    <span class="comment">/* stat variable initial value */</span>
<a name="l00226"></a>00226               <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#cb226be68234f23178a842e1a4acf8cd">format</a>);              <span class="comment">/* optional variable output format */</span>
<a name="l00227"></a>00227 
<a name="l00228"></a>00228 <span class="comment">/* register a qword integer statistical variable */</span>
<a name="l00229"></a>00229 <span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a> *
<a name="l00230"></a>00230 <a class="code" href="zesto_2stats_8h.html#d3b207566a223483451c345114249ac6">stat_reg_qword</a>(<span class="keyword">struct</span> <a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> *sdb,  <span class="comment">/* stat database */</span>
<a name="l00231"></a>00231          <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t.html#9f0a547ad6eacd4d8192c026eb61753c">print_me</a>,
<a name="l00232"></a>00232                <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#68865d7221abe93b4b3c331e192f0d38">name</a>,                <span class="comment">/* stat variable name */</span>
<a name="l00233"></a>00233                <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#bd10a35fb99e5a028095882d37ca2309">desc</a>,                <span class="comment">/* stat variable description */</span>
<a name="l00234"></a>00234                qword_t *var,            <span class="comment">/* stat variable */</span>
<a name="l00235"></a>00235                qword_t init_val,        <span class="comment">/* stat variable initial value */</span>
<a name="l00236"></a>00236                <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#cb226be68234f23178a842e1a4acf8cd">format</a>);             <span class="comment">/* optional variable output format */</span>
<a name="l00237"></a>00237 
<a name="l00238"></a>00238 <span class="comment">/* register a signed qword integer statistical variable */</span>
<a name="l00239"></a>00239 <span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a> *
<a name="l00240"></a>00240 <a class="code" href="zesto_2stats_8h.html#6c7a4257d59d1a3f3d8056326d3ab3ba">stat_reg_sqword</a>(<span class="keyword">struct</span> <a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> *sdb, <span class="comment">/* stat database */</span>
<a name="l00241"></a>00241     <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t.html#9f0a547ad6eacd4d8192c026eb61753c">print_me</a>,
<a name="l00242"></a>00242                 <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#68865d7221abe93b4b3c331e192f0d38">name</a>,               <span class="comment">/* stat variable name */</span>
<a name="l00243"></a>00243                 <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#bd10a35fb99e5a028095882d37ca2309">desc</a>,               <span class="comment">/* stat variable description */</span>
<a name="l00244"></a>00244                 sqword_t *var,          <span class="comment">/* stat variable */</span>
<a name="l00245"></a>00245                 sqword_t init_val,      <span class="comment">/* stat variable initial value */</span>
<a name="l00246"></a>00246                 <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#cb226be68234f23178a842e1a4acf8cd">format</a>);            <span class="comment">/* optional variable output format */</span>
<a name="l00247"></a>00247 
<a name="l00248"></a>00248 <span class="comment">/* register a float statistical variable */</span>
<a name="l00249"></a>00249 <span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a> *
<a name="l00250"></a>00250 <a class="code" href="zesto_2stats_8h.html#378cfba0435cd73f9c4ecb78c2d64681">stat_reg_float</a>(<span class="keyword">struct</span> <a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> *sdb,  <span class="comment">/* stat database */</span>
<a name="l00251"></a>00251          <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t.html#9f0a547ad6eacd4d8192c026eb61753c">print_me</a>,
<a name="l00252"></a>00252                <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#68865d7221abe93b4b3c331e192f0d38">name</a>,                <span class="comment">/* stat variable name */</span>
<a name="l00253"></a>00253                <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#bd10a35fb99e5a028095882d37ca2309">desc</a>,                <span class="comment">/* stat variable description */</span>
<a name="l00254"></a>00254                <span class="keywordtype">float</span> *var,              <span class="comment">/* stat variable */</span>
<a name="l00255"></a>00255                <span class="keywordtype">float</span> init_val,          <span class="comment">/* stat variable initial value */</span>
<a name="l00256"></a>00256                <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#cb226be68234f23178a842e1a4acf8cd">format</a>);             <span class="comment">/* optional variable output format */</span>
<a name="l00257"></a>00257 
<a name="l00258"></a>00258 <span class="comment">/* register a double statistical variable */</span>
<a name="l00259"></a>00259 <span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a> *
<a name="l00260"></a>00260 <a class="code" href="zesto_2stats_8h.html#be1b2059ba7cd215a0dddb2da620dbaf">stat_reg_double</a>(<span class="keyword">struct</span> <a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> *sdb, <span class="comment">/* stat database */</span>
<a name="l00261"></a>00261     <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t.html#9f0a547ad6eacd4d8192c026eb61753c">print_me</a>,
<a name="l00262"></a>00262                 <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#68865d7221abe93b4b3c331e192f0d38">name</a>,               <span class="comment">/* stat variable name */</span>
<a name="l00263"></a>00263                 <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#bd10a35fb99e5a028095882d37ca2309">desc</a>,               <span class="comment">/* stat variable description */</span>
<a name="l00264"></a>00264                 <span class="keywordtype">double</span> *var,            <span class="comment">/* stat variable */</span>
<a name="l00265"></a>00265                 <span class="keywordtype">double</span> init_val,        <span class="comment">/* stat variable initial value */</span>
<a name="l00266"></a>00266                 <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#cb226be68234f23178a842e1a4acf8cd">format</a>);            <span class="comment">/* optional variable output format */</span>
<a name="l00267"></a>00267 
<a name="l00268"></a>00268 <span class="comment">/* create an array distribution (w/ fixed size buckets) in stat database SDB,</span>
<a name="l00269"></a>00269 <span class="comment">   the array distribution has ARR_SZ buckets with BUCKET_SZ indicies in each</span>
<a name="l00270"></a>00270 <span class="comment">   bucked, PF specifies the distribution components to print for optional</span>
<a name="l00271"></a>00271 <span class="comment">   format FORMAT; the indicies may be optionally replaced with the strings</span>
<a name="l00272"></a>00272 <span class="comment">   from IMAP, or the entire distribution can be printed with the optional</span>
<a name="l00273"></a>00273 <span class="comment">   user-specified print function PRINT_FN */</span>
<a name="l00274"></a>00274 <span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a> *
<a name="l00275"></a>00275 <a class="code" href="zesto_2stats_8h.html#b68118a778041ff66b7dec8bf1030ef4">stat_reg_dist</a>(<span class="keyword">struct</span> <a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> *sdb,   <span class="comment">/* stat database */</span>
<a name="l00276"></a>00276               <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#68865d7221abe93b4b3c331e192f0d38">name</a>,         <span class="comment">/* stat variable name */</span>
<a name="l00277"></a>00277               <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#bd10a35fb99e5a028095882d37ca2309">desc</a>,         <span class="comment">/* stat variable description */</span>
<a name="l00278"></a>00278               <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> init_val,    <span class="comment">/* dist initial value */</span>
<a name="l00279"></a>00279               <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> arr_sz,      <span class="comment">/* array size */</span>
<a name="l00280"></a>00280               <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bucket_sz,   <span class="comment">/* array bucket size */</span>
<a name="l00281"></a>00281               <span class="keywordtype">int</span> pf,                   <span class="comment">/* print format, use PF_* defs */</span>
<a name="l00282"></a>00282               <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#cb226be68234f23178a842e1a4acf8cd">format</a>,               <span class="comment">/* optional variable output format */</span>
<a name="l00283"></a>00283               <span class="keyword">const</span> <span class="keywordtype">char</span> **imap,                <span class="comment">/* optional index -&gt; string map */</span>
<a name="l00284"></a>00284               <a class="code" href="zesto_2stats_8h.html#e4b17f8ba8e81941519f3e55dd08a4ff">print_fn_t</a> print_fn);     <span class="comment">/* optional user print function */</span>
<a name="l00285"></a>00285 
<a name="l00286"></a>00286 <span class="comment">/* create a sparse array distribution in stat database SDB, while the sparse</span>
<a name="l00287"></a>00287 <span class="comment">   array consumes more memory per bucket than an array distribution, it can</span>
<a name="l00288"></a>00288 <span class="comment">   efficiently map any number of indicies from 0 to 2^32-1, PF specifies the</span>
<a name="l00289"></a>00289 <span class="comment">   distribution components to print for optional format FORMAT; the indicies</span>
<a name="l00290"></a>00290 <span class="comment">   may be optionally replaced with the strings from IMAP, or the entire</span>
<a name="l00291"></a>00291 <span class="comment">   distribution can be printed with the optional user-specified print function</span>
<a name="l00292"></a>00292 <span class="comment">   PRINT_FN */</span>
<a name="l00293"></a>00293 <span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a> *
<a name="l00294"></a>00294 <a class="code" href="zesto_2stats_8h.html#ac098a3587e13dc2a0767f54d46e98c5">stat_reg_sdist</a>(<span class="keyword">struct</span> <a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> *sdb,  <span class="comment">/* stat database */</span>
<a name="l00295"></a>00295                <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#68865d7221abe93b4b3c331e192f0d38">name</a>,                <span class="comment">/* stat variable name */</span>
<a name="l00296"></a>00296                <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#bd10a35fb99e5a028095882d37ca2309">desc</a>,                <span class="comment">/* stat variable description */</span>
<a name="l00297"></a>00297                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> init_val,   <span class="comment">/* dist initial value */</span>
<a name="l00298"></a>00298                <span class="keywordtype">int</span> pf,                  <span class="comment">/* print format, use PF_* defs */</span>
<a name="l00299"></a>00299                <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#cb226be68234f23178a842e1a4acf8cd">format</a>,              <span class="comment">/* optional variable output format */</span>
<a name="l00300"></a>00300                <a class="code" href="zesto_2stats_8h.html#e4b17f8ba8e81941519f3e55dd08a4ff">print_fn_t</a> print_fn);    <span class="comment">/* optional user print function */</span>
<a name="l00301"></a>00301 
<a name="l00302"></a>00302 <span class="comment">/* add NSAMPLES to array or sparse array distribution STAT */</span>
<a name="l00303"></a>00303 <span class="keywordtype">void</span>
<a name="l00304"></a>00304 <a class="code" href="zesto_2stats_8h.html#d19289478f3e4e33e7b5a0caa68bd5b5">stat_add_samples</a>(<span class="keyword">struct</span> <a class="code" href="structstat__stat__t.html">stat_stat_t</a> *stat,<span class="comment">/* stat database */</span>
<a name="l00305"></a>00305                  <a class="code" href="machine_8h.html#fba784f22c1d8233f95c4f4db103018a">md_addr_t</a> index,       <span class="comment">/* distribution index of samples */</span>
<a name="l00306"></a>00306                  <span class="keywordtype">int</span> nsamples);         <span class="comment">/* number of samples to add to dist */</span>
<a name="l00307"></a>00307 
<a name="l00308"></a>00308 <span class="comment">/* add a single sample to array or sparse array distribution STAT */</span>
<a name="l00309"></a>00309 <span class="keywordtype">void</span>
<a name="l00310"></a>00310 <a class="code" href="zesto_2stats_8h.html#702503b8068fdcce1dc8712be9791d42">stat_add_sample</a>(<span class="keyword">struct</span> <a class="code" href="structstat__stat__t.html">stat_stat_t</a> *stat,<span class="comment">/* stat variable */</span>
<a name="l00311"></a>00311                 <a class="code" href="machine_8h.html#fba784f22c1d8233f95c4f4db103018a">md_addr_t</a> index);       <span class="comment">/* index of sample */</span>
<a name="l00312"></a>00312 
<a name="l00313"></a>00313 <span class="comment">/* register a double statistical formula, the formula is evaluated when the</span>
<a name="l00314"></a>00314 <span class="comment">   statistic is printed, the formula expression may reference any registered</span>
<a name="l00315"></a>00315 <span class="comment">   statistical variable and, in addition, the standard operators '(', ')', '+',</span>
<a name="l00316"></a>00316 <span class="comment">   '-', '*', and '/', and literal (i.e., C-format decimal, hexidecimal, and</span>
<a name="l00317"></a>00317 <span class="comment">   octal) constants are also supported; NOTE: all terms are immediately</span>
<a name="l00318"></a>00318 <span class="comment">   converted to double values and the result is a double value, see eval.h</span>
<a name="l00319"></a>00319 <span class="comment">   for more information on formulas */</span>
<a name="l00320"></a>00320 <span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a> *
<a name="l00321"></a>00321 <a class="code" href="zesto_2stats_8h.html#f2f491659903b1b21de69fe6c767a64a">stat_reg_formula</a>(<span class="keyword">struct</span> <a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> *sdb,<span class="comment">/* stat database */</span>
<a name="l00322"></a>00322        <span class="keywordtype">int</span> <a class="code" href="structstat__stat__t.html#9f0a547ad6eacd4d8192c026eb61753c">print_me</a>,
<a name="l00323"></a>00323                  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#68865d7221abe93b4b3c331e192f0d38">name</a>,              <span class="comment">/* stat variable name */</span>
<a name="l00324"></a>00324                  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#bd10a35fb99e5a028095882d37ca2309">desc</a>,              <span class="comment">/* stat variable description */</span>
<a name="l00325"></a>00325                  <span class="keyword">const</span> <span class="keywordtype">char</span> *formula,           <span class="comment">/* formula expression */</span>
<a name="l00326"></a>00326                  <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#cb226be68234f23178a842e1a4acf8cd">format</a>);           <span class="comment">/* optional variable output format */</span>
<a name="l00327"></a>00327 
<a name="l00328"></a>00328 <span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a> *
<a name="l00329"></a>00329 <a class="code" href="zesto_2stats_8h.html#c8c6f5229297787dbce204434f45acce">stat_reg_string</a>(<span class="keyword">struct</span> <a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> *sdb, <span class="comment">/* stat database */</span>
<a name="l00330"></a>00330     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#68865d7221abe93b4b3c331e192f0d38">name</a>,           <span class="comment">/* stat variable name */</span>
<a name="l00331"></a>00331     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#bd10a35fb99e5a028095882d37ca2309">desc</a>,           <span class="comment">/* stat variable description */</span>
<a name="l00332"></a>00332     <span class="keyword">const</span> <span class="keywordtype">char</span> *var,                    <span class="comment">/* stat variable */</span>
<a name="l00333"></a>00333     <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="structstat__stat__t.html#cb226be68234f23178a842e1a4acf8cd">format</a>);        <span class="comment">/* optional variable output format */</span>
<a name="l00334"></a>00334 
<a name="l00335"></a>00335 <span class="comment">/* register a stat output note/comment */</span>
<a name="l00336"></a>00336 <span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a> *
<a name="l00337"></a>00337 <a class="code" href="zesto_2stats_8h.html#ed9b9c4535e4fc2e59a090d6e8157d4f">stat_reg_note</a>(<span class="keyword">struct</span> <a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> *sdb,   <span class="comment">/* stat database */</span>
<a name="l00338"></a>00338                     <span class="keyword">const</span> <span class="keywordtype">char</span> *note);
<a name="l00339"></a>00339 
<a name="l00340"></a>00340 <span class="comment">/* print the value of stat variable STAT */</span>
<a name="l00341"></a>00341 <span class="keywordtype">void</span>
<a name="l00342"></a>00342 <a class="code" href="zesto_2stats_8h.html#1e642b17270bf002137ad70b5438b77c">stat_print_stat</a>(<span class="keyword">struct</span> <a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> *sdb, <span class="comment">/* stat database */</span>
<a name="l00343"></a>00343                 <span class="keyword">struct</span> <a class="code" href="structstat__stat__t.html">stat_stat_t</a> *stat,<span class="comment">/* stat variable */</span>
<a name="l00344"></a>00344                 FILE *fd);              <span class="comment">/* output stream */</span>
<a name="l00345"></a>00345 
<a name="l00346"></a>00346 <span class="comment">/* print the value of all stat variables in stat database SDB */</span>
<a name="l00347"></a>00347 <span class="keywordtype">void</span>
<a name="l00348"></a>00348 <a class="code" href="zesto_2stats_8h.html#dd36287ed8d81f546fb36bae677fb531">stat_print_stats</a>(<span class="keyword">struct</span> <a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> *sdb,<span class="comment">/* stat database */</span>
<a name="l00349"></a>00349                  FILE *fd);             <span class="comment">/* output stream */</span>
<a name="l00350"></a>00350 
<a name="l00351"></a>00351 
<a name="l00352"></a>00352 <span class="comment">/* find a stat variable, returns NULL if it is not found */</span>
<a name="l00353"></a>00353 <span class="keyword">struct </span><a class="code" href="structstat__stat__t.html">stat_stat_t</a> *
<a name="l00354"></a>00354 <a class="code" href="zesto_2stats_8h.html#e194205b24efd7c8a7c383156edce994">stat_find_stat</a>(<span class="keyword">struct</span> <a class="code" href="structstat__sdb__t.html">stat_sdb_t</a> *sdb,  <span class="comment">/* stat database */</span>
<a name="l00355"></a>00355                <span class="keyword">const</span> <span class="keywordtype">char</span> *stat_name);  <span class="comment">/* stat name */</span>
<a name="l00356"></a>00356                
<a name="l00357"></a>00357 
<a name="l00358"></a>00358 <span class="comment">/* print a sparse array distribution */</span>
<a name="l00359"></a>00359 <span class="keywordtype">void</span>
<a name="l00360"></a>00360 <a class="code" href="zesto_2stats_8h.html#d6343ab164d17218e4312f17318bec2b">print_sdist</a>(<span class="keyword">struct</span> <a class="code" href="structstat__stat__t.html">stat_stat_t</a> *stat,   <span class="comment">/* stat variable */</span>
<a name="l00361"></a>00361             FILE *fd);                  <span class="comment">/* output stream */</span>
<a name="l00362"></a>00362 
<a name="l00363"></a>00363 <span class="comment">/* print an array distribution */</span>
<a name="l00364"></a>00364 <span class="keywordtype">void</span>
<a name="l00365"></a>00365 <a class="code" href="zesto_2stats_8h.html#162e72b041405e38ba5550fe16b345c9">print_dist</a>(<span class="keyword">struct</span> <a class="code" href="structstat__stat__t.html">stat_stat_t</a> *stat,    <span class="comment">/* stat variable */</span>
<a name="l00366"></a>00366            FILE *fd);                   <span class="comment">/* output stream */</span>
<a name="l00367"></a>00367 
<a name="l00368"></a>00368 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00369"></a>00369 <span class="preprocessor"></span>}
<a name="l00370"></a>00370 <span class="preprocessor">#endif</span>
<a name="l00371"></a>00371 <span class="preprocessor"></span>
<a name="l00372"></a>00372 <span class="preprocessor">#endif </span><span class="comment">/* STAT_H */</span>
<a name="l00373"></a>00373 
<a name="l00374"></a>00374 
<a name="l00375"></a>00375 
<a name="l00376"></a>00376 
<a name="l00377"></a>00377 
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Aug 23 00:20:57 2010 for IRIS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
