<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>IRIS: machine.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_014faa727c0b2aaba2cbdd8f326de4f6.html">source</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_4516642e80adc9bf50ea604a2fbf2492.html">zesto</a>
  </div>
</div>
<div class="contents">
<h1>machine.h</h1><a href="machine_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * x86.h - x86 ISA definitions</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This file is a part of the SimpleScalar tool suite written by</span>
<a name="l00005"></a>00005 <span class="comment"> * Todd M. Austin as a part of the Multiscalar Research Project.</span>
<a name="l00006"></a>00006 <span class="comment"> *  </span>
<a name="l00007"></a>00007 <span class="comment"> * The tool suite is currently maintained by Doug Burger and Todd M. Austin.</span>
<a name="l00008"></a>00008 <span class="comment"> * </span>
<a name="l00009"></a>00009 <span class="comment"> * Copyright (C) 1994, 1995, 1996, 1997, 1998 by Todd M. Austin</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * This source file is distributed "as is" in the hope that it will be</span>
<a name="l00012"></a>00012 <span class="comment"> * useful.  The tool set comes with no warranty, and no author or</span>
<a name="l00013"></a>00013 <span class="comment"> * distributor accepts any responsibility for the consequences of its</span>
<a name="l00014"></a>00014 <span class="comment"> * use. </span>
<a name="l00015"></a>00015 <span class="comment"> * </span>
<a name="l00016"></a>00016 <span class="comment"> * Everyone is granted permission to copy, modify and redistribute</span>
<a name="l00017"></a>00017 <span class="comment"> * this tool set under the following conditions:</span>
<a name="l00018"></a>00018 <span class="comment"> * </span>
<a name="l00019"></a>00019 <span class="comment"> *    This source code is distributed for non-commercial use only. </span>
<a name="l00020"></a>00020 <span class="comment"> *    Please contact the maintainer for restrictions applying to </span>
<a name="l00021"></a>00021 <span class="comment"> *    commercial use.</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> *    Permission is granted to anyone to make or distribute copies</span>
<a name="l00024"></a>00024 <span class="comment"> *    of this source code, either as received or modified, in any</span>
<a name="l00025"></a>00025 <span class="comment"> *    medium, provided that all copyright notices, permission and</span>
<a name="l00026"></a>00026 <span class="comment"> *    nonwarranty notices are preserved, and that the distributor</span>
<a name="l00027"></a>00027 <span class="comment"> *    grants the recipient permission for further redistribution as</span>
<a name="l00028"></a>00028 <span class="comment"> *    permitted by this document.</span>
<a name="l00029"></a>00029 <span class="comment"> *</span>
<a name="l00030"></a>00030 <span class="comment"> *    Permission is granted to distribute this file in compiled</span>
<a name="l00031"></a>00031 <span class="comment"> *    or executable form under the same conditions that apply for</span>
<a name="l00032"></a>00032 <span class="comment"> *    source code, provided that either:</span>
<a name="l00033"></a>00033 <span class="comment"> *</span>
<a name="l00034"></a>00034 <span class="comment"> *    A. it is accompanied by the corresponding machine-readable</span>
<a name="l00035"></a>00035 <span class="comment"> *       source code,</span>
<a name="l00036"></a>00036 <span class="comment"> *    B. it is accompanied by a written offer, with no time limit,</span>
<a name="l00037"></a>00037 <span class="comment"> *       to give anyone a machine-readable copy of the corresponding</span>
<a name="l00038"></a>00038 <span class="comment"> *       source code in return for reimbursement of the cost of</span>
<a name="l00039"></a>00039 <span class="comment"> *       distribution.  This written offer must permit verbatim</span>
<a name="l00040"></a>00040 <span class="comment"> *       duplication by anyone, or</span>
<a name="l00041"></a>00041 <span class="comment"> *    C. it is distributed by someone who received only the</span>
<a name="l00042"></a>00042 <span class="comment"> *       executable form, and is accompanied by a copy of the</span>
<a name="l00043"></a>00043 <span class="comment"> *       written offer of source code that they received concurrently.</span>
<a name="l00044"></a>00044 <span class="comment"> *</span>
<a name="l00045"></a>00045 <span class="comment"> * In other words, you are welcome to use, share and improve this</span>
<a name="l00046"></a>00046 <span class="comment"> * source file.  You are forbidden to forbid anyone else to use, share</span>
<a name="l00047"></a>00047 <span class="comment"> * and improve what you give them.</span>
<a name="l00048"></a>00048 <span class="comment"> *</span>
<a name="l00049"></a>00049 <span class="comment"> * INTERNET: dburger@cs.wisc.edu</span>
<a name="l00050"></a>00050 <span class="comment"> * US Mail:  1210 W. Dayton Street, Madison, WI 53706</span>
<a name="l00051"></a>00051 <span class="comment"> *</span>
<a name="l00052"></a>00052 <span class="comment"> */</span>
<a name="l00053"></a>00053 
<a name="l00054"></a>00054 <span class="preprocessor">#ifndef X86_H</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="preprocessor">#define X86_H</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>
<a name="l00057"></a>00057 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span> {
<a name="l00059"></a>00059 <span class="preprocessor">#else</span>
<a name="l00060"></a><a class="code" href="machine_8h.html#bb452686968e48b67397da5f97445f5b">00060</a> <span class="preprocessor"></span><span class="preprocessor">#define bool int</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span>
<a name="l00063"></a>00063 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00064"></a>00064 <span class="preprocessor">#include &lt;assert.h&gt;</span>
<a name="l00065"></a>00065 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00066"></a>00066 <span class="preprocessor">#include &lt;setjmp.h&gt;</span>
<a name="l00067"></a>00067 <span class="preprocessor">#include &lt;stdint.h&gt;</span>
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 <span class="preprocessor">#include "<a class="code" href="host_8h.html">host.h</a>"</span>
<a name="l00070"></a>00070 <span class="preprocessor">#include "<a class="code" href="misc_8h.html">misc.h</a>"</span>
<a name="l00071"></a>00071 
<a name="l00072"></a>00072 
<a name="l00073"></a>00073 <span class="comment">/*</span>
<a name="l00074"></a>00074 <span class="comment"> * This file contains various definitions needed to decode, disassemble, and</span>
<a name="l00075"></a>00075 <span class="comment"> * execute x86 instructions.</span>
<a name="l00076"></a>00076 <span class="comment"> */</span>
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="comment">/* build for x86 target */</span>
<a name="l00079"></a><a class="code" href="machine_8h.html#384297c0c56dbc5d87b23537d3ffbf55">00079</a> <span class="preprocessor">#define TARGET_X86</span>
<a name="l00080"></a><a class="code" href="machine_8h.html#009855593b59738d24dbfc236edb3b14">00080</a> <span class="preprocessor"></span><span class="preprocessor">#define MAX_CORES 16</span>
<a name="l00081"></a>00081 <span class="preprocessor"></span>
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 <span class="comment">/* probe cross-endian execution */</span>
<a name="l00084"></a>00084 <span class="preprocessor">#if defined(BYTES_BIG_ENDIAN)</span>
<a name="l00085"></a>00085 <span class="preprocessor"></span><span class="preprocessor">#define MD_CROSS_ENDIAN</span>
<a name="l00086"></a>00086 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00087"></a>00087 <span class="preprocessor"></span>
<a name="l00088"></a>00088 <span class="comment">/* not applicable/available, usable in most definition contexts */</span>
<a name="l00089"></a><a class="code" href="machine_8h.html#68eddd535923d17ddbc8bb03bab70b3b">00089</a> <span class="preprocessor">#define NA            0</span>
<a name="l00090"></a><a class="code" href="machine_8h.html#7e1f80c2888e5e4d779d8571e66ae50d">00090</a> <span class="preprocessor"></span><span class="preprocessor">#define DNA             -1</span>
<a name="l00091"></a>00091 <span class="preprocessor"></span>
<a name="l00092"></a>00092 <span class="comment">/*</span>
<a name="l00093"></a>00093 <span class="comment"> * target-dependent type definitions</span>
<a name="l00094"></a>00094 <span class="comment"> */</span>
<a name="l00095"></a>00095 
<a name="l00096"></a>00096 <span class="comment">/* define MD_QWORD_ADDRS if the target requires 64-bit (qword) addresses */</span>
<a name="l00097"></a>00097 <span class="comment">/* #define MD_QWORD_ADDRS */</span>
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 <span class="comment">/* address type definition (32-bit) */</span>
<a name="l00100"></a><a class="code" href="machine_8h.html#fba784f22c1d8233f95c4f4db103018a">00100</a> <span class="keyword">typedef</span> <a class="code" href="host_8h.html#064e4defdc308749258f722d81981cac">dword_t</a> <a class="code" href="machine_8h.html#fba784f22c1d8233f95c4f4db103018a">md_addr_t</a>;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 <span class="comment">/* physical address type definition (64-bit) */</span>
<a name="l00103"></a><a class="code" href="machine_8h.html#1283325781575bd7f116553a4cd7efd5">00103</a> <span class="keyword">typedef</span> qword_t <a class="code" href="machine_8h.html#1283325781575bd7f116553a4cd7efd5">md_paddr_t</a>;
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 <span class="comment">/*</span>
<a name="l00107"></a>00107 <span class="comment"> * target-dependent memory module configuration</span>
<a name="l00108"></a>00108 <span class="comment"> */</span>
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 <span class="comment">/* physical memory page size (must be a power-of-two) */</span>
<a name="l00111"></a><a class="code" href="machine_8h.html#8a1b6a6176ef2fd3e359b70042374ff0">00111</a> <span class="preprocessor">#define MD_PAGE_SIZE        4096</span>
<a name="l00112"></a><a class="code" href="machine_8h.html#f2963d87ddca0492a595fe0b6ff8d9e4">00112</a> <span class="preprocessor"></span><span class="preprocessor">#define MD_LOG_PAGE_SIZE    12</span>
<a name="l00113"></a>00113 <span class="preprocessor"></span>
<a name="l00114"></a>00114 <span class="comment">/* convert 64-bit inst text addresses to 32-bit inst equivalents */</span>
<a name="l00115"></a><a class="code" href="machine_8h.html#90492412b666a4752d5eb6d830f83aee">00115</a> <span class="preprocessor">#define IACOMPRESS(A)        (A)</span>
<a name="l00116"></a><a class="code" href="machine_8h.html#4fc1e93a7bc14a53ebf57cd1a03a64e2">00116</a> <span class="preprocessor"></span><span class="preprocessor">#define ISCOMPRESS(SZ)        (SZ)</span>
<a name="l00117"></a>00117 <span class="preprocessor"></span>
<a name="l00118"></a>00118 <span class="comment">/*</span>
<a name="l00119"></a>00119 <span class="comment"> * target-dependent instruction faults</span>
<a name="l00120"></a>00120 <span class="comment"> */</span>
<a name="l00121"></a>00121 
<a name="l00122"></a><a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b321">00122</a> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b321">md_fault_type</a> {
<a name="l00123"></a><a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b32119b8f8ccd7cf501d68fbe167f0244bbc">00123</a>   <a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b32119b8f8ccd7cf501d68fbe167f0244bbc">md_fault_none</a> = 0,        <span class="comment">/* no fault */</span>
<a name="l00124"></a><a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b321028a5a039e21b596193f1eb4e3b583ad">00124</a>   <a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b321028a5a039e21b596193f1eb4e3b583ad">md_fault_access</a>,        <span class="comment">/* storage access fault */</span>
<a name="l00125"></a><a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b321e234589a030068a17664673f7a3e79bd">00125</a>   <a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b321e234589a030068a17664673f7a3e79bd">md_fault_alignment</a>,        <span class="comment">/* storage alignment fault */</span>
<a name="l00126"></a><a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b32177c4fba8ad979ab911b498b0863d84c3">00126</a>   <a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b32177c4fba8ad979ab911b498b0863d84c3">md_fault_overflow</a>,        <span class="comment">/* signed arithmetic overflow fault */</span>
<a name="l00127"></a><a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b321500ea35df97dcea9160b0538c7f826cc">00127</a>   <a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b321500ea35df97dcea9160b0538c7f826cc">md_fault_div0</a>,        <span class="comment">/* division by zero fault */</span>
<a name="l00128"></a><a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b321efdd1b96947b7f67e156050eab8e3af4">00128</a>   <a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b321efdd1b96947b7f67e156050eab8e3af4">md_fault_invalid</a>,             <span class="comment">/* invalid arithmetic operation */</span> 
<a name="l00129"></a>00129                                 <span class="comment">/* added to allow SQRT{S,T} in FIX exts */</span>
<a name="l00130"></a><a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b321c6e58a815bb3347bc4d4e709fb5d61cc">00130</a>   <a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b321c6e58a815bb3347bc4d4e709fb5d61cc">md_fault_break</a>,        <span class="comment">/* BREAK instruction fault */</span>
<a name="l00131"></a><a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b3218fd26d34727e4c58fb0e2c82f017db7d">00131</a>   <a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b3218fd26d34727e4c58fb0e2c82f017db7d">md_fault_unimpl</a>,        <span class="comment">/* unimplemented instruction fault */</span>
<a name="l00132"></a><a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b321dfcc93893582aced1190b47985c8dbd3">00132</a>   <a class="code" href="machine_8h.html#a85392bc9273ef092efe1e9f7422b321dfcc93893582aced1190b47985c8dbd3">md_fault_internal</a>        <span class="comment">/* internal S/W fault */</span>
<a name="l00133"></a>00133 };
<a name="l00134"></a>00134 
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 <span class="comment">/*</span>
<a name="l00137"></a>00137 <span class="comment"> * target-dependent register file definitions, used by regs.[hc]</span>
<a name="l00138"></a>00138 <span class="comment"> */</span>
<a name="l00139"></a>00139 
<a name="l00140"></a>00140 <span class="comment">/* number of integer registers */</span>
<a name="l00141"></a><a class="code" href="machine_8h.html#b99f4cb95bb7b81734111ae68dd06a38">00141</a> <span class="preprocessor">#define MD_NUM_IREGS        (</span><span class="comment">/* arch */</span>8 + <span class="comment">/* uarch */</span>8)
<a name="l00142"></a><a class="code" href="machine_8h.html#29f39b544ddb3d61ff62ad2e04ceb79a">00142</a> <span class="preprocessor">#define MD_NUM_ARCH_IREGS        8</span>
<a name="l00143"></a>00143 <span class="preprocessor"></span>
<a name="l00144"></a>00144 <span class="comment">/* number of floating point registers */</span>
<a name="l00145"></a><a class="code" href="machine_8h.html#78ff93a9f3fc7554b7fc5f80389f2cc9">00145</a> <span class="preprocessor">#define MD_NUM_FREGS        (</span><span class="comment">/* arch */</span>8 + <span class="comment">/* uarch */</span>8)
<a name="l00146"></a>00146 
<a name="l00147"></a>00147 <span class="comment">/* number of control registers */</span>
<a name="l00148"></a><a class="code" href="machine_8h.html#306a14e3216146e57c2fc2833d9f62c9">00148</a> <span class="preprocessor">#define MD_NUM_CREGS        3</span>
<a name="l00149"></a>00149 <span class="preprocessor"></span>
<a name="l00150"></a>00150 <span class="comment">/* number of segment registers */</span>
<a name="l00151"></a><a class="code" href="machine_8h.html#e4108e4256c25f82b9db0a0ae6fd2ae4">00151</a> <span class="preprocessor">#define MD_NUM_SREGS        6 // UCSD</span>
<a name="l00152"></a>00152 <span class="preprocessor"></span>
<a name="l00153"></a>00153 <span class="comment">/* total number of registers, excluding PC and NPC */</span>
<a name="l00154"></a><a class="code" href="machine_8h.html#fe3f361f13b4d59d0f770023d0e26e29">00154</a> <span class="preprocessor">#define MD_TOTAL_REGS                            \</span>
<a name="l00155"></a>00155 <span class="preprocessor">  (</span><span class="comment">/*int*/</span>MD_NUM_IREGS + <span class="comment">/*fp*/</span>MD_NUM_FREGS + <span class="comment">/*misc*/</span>MD_NUM_CREGS + <span class="comment">/*seg*/</span>MD_NUM_SREGS )
<a name="l00156"></a>00156 
<a name="l00157"></a><a class="code" href="machine_8h.html#eb7b9d53155abcaf05713f86613ba38e">00157</a> <span class="preprocessor">#define GPR_OFFSET 0</span>
<a name="l00158"></a><a class="code" href="machine_8h.html#f333dd3611a980e3e16fd74b2181b557">00158</a> <span class="preprocessor"></span><span class="preprocessor">#define FPR_OFFSET MD_NUM_IREGS</span>
<a name="l00159"></a><a class="code" href="machine_8h.html#c5b7c3261c3b1cd415175079880675e1">00159</a> <span class="preprocessor"></span><span class="preprocessor">#define CREG_OFFSET (FPR_OFFSET+MD_NUM_FREGS)</span>
<a name="l00160"></a><a class="code" href="machine_8h.html#38bf72e3397905cc6144836a527007a2">00160</a> <span class="preprocessor"></span><span class="preprocessor">#define SEG_OFFSET (CREG_OFFSET+MD_NUM_CREGS)</span>
<a name="l00161"></a>00161 <span class="preprocessor"></span>
<a name="l00162"></a><a class="code" href="machine_8h.html#847c0d2190d42a64c52ad9b8e8b514dc">00162</a> <span class="preprocessor">#define REG_IS_GPR(N) (((N) &gt;= GPR_OFFSET) &amp;&amp; ((N) &lt; FPR_OFFSET))</span>
<a name="l00163"></a><a class="code" href="machine_8h.html#68982a77353744eb45beec6d4075bb4b">00163</a> <span class="preprocessor"></span><span class="preprocessor">#define REG_IS_FPR(N) (((N) &gt;= FPR_OFFSET) &amp;&amp; ((N) &lt; CREG_OFFSET))</span>
<a name="l00164"></a><a class="code" href="machine_8h.html#1fe40b3283895542f1d69627bad530c0">00164</a> <span class="preprocessor"></span><span class="preprocessor">#define REG_IS_CREG(N) (((N) &gt;= CREG_OFFSET) &amp;&amp; ((N) &lt; SREG_OFFSET))</span>
<a name="l00165"></a><a class="code" href="machine_8h.html#f65d0e1379202c613a27b4df6da1d3bf">00165</a> <span class="preprocessor"></span><span class="preprocessor">#define REG_IS_SEG(N) (((N) &gt;= SEG_OFFSET) &amp;&amp; ((N) &lt; MD_TOTAL_REGS))</span>
<a name="l00166"></a>00166 <span class="preprocessor"></span>
<a name="l00167"></a>00167 <span class="comment">/* these macros map the architected register number to a unique number */</span>
<a name="l00168"></a>00168 <span class="comment">/* NOTE: DFPR "renames" the FP regs based on the FP stack */</span>
<a name="l00169"></a><a class="code" href="machine_8h.html#7958b4dc7e6644b7c434becf7e2447f2">00169</a> <span class="preprocessor">#define DGPR(N) ((N)+GPR_OFFSET)</span>
<a name="l00170"></a><a class="code" href="machine_8h.html#9b5b2a66039d753b3fd83aea30ba467c">00170</a> <span class="preprocessor"></span><span class="preprocessor">#define DFPR(N) ((F2P(N))+FPR_OFFSET)</span>
<a name="l00171"></a><a class="code" href="machine_8h.html#d80e74580200731f87e13556d877b32f">00171</a> <span class="preprocessor"></span><span class="preprocessor">#define DCREG(N) ((N)+CREG_OFFSET)</span>
<a name="l00172"></a><a class="code" href="machine_8h.html#835830e44d73023be784b150846de289">00172</a> <span class="preprocessor"></span><span class="preprocessor">#define DSEG(N) ((N)+SEG_OFFSET)</span>
<a name="l00173"></a>00173 <span class="preprocessor"></span>
<a name="l00174"></a><a class="code" href="machine_8h.html#f99d5a0128bae47a2f50a004d32c4c75">00174</a> <span class="preprocessor">#define DGPR_B(N) ((_ARCH(N) ? (_ID(N)) : (N)) + GPR_OFFSET)</span>
<a name="l00175"></a><a class="code" href="machine_8h.html#6a88ba8081f6daa5688b55c7ec454eaa">00175</a> <span class="preprocessor"></span><span class="preprocessor">#define DGPR_W(N) (N+GPR_OFFSET)</span>
<a name="l00176"></a><a class="code" href="machine_8h.html#9189b9d15ac5f8c3e04b79b4e7a150b9">00176</a> <span class="preprocessor"></span><span class="preprocessor">#define DGPR_D(N) (N+GPR_OFFSET)</span>
<a name="l00177"></a>00177 <span class="preprocessor"></span>
<a name="l00178"></a>00178 <span class="comment">/* these macros undo the mapping back to the original ISA register numbers */</span>
<a name="l00179"></a><a class="code" href="machine_8h.html#e0f0835009dd781333d49514a36ded8d">00179</a> <span class="preprocessor">#define _DGPR(N) ((N)-GPR_OFFSET)</span>
<a name="l00180"></a><a class="code" href="machine_8h.html#3e6ac9a1b72cf5803e4606c8de18e122">00180</a> <span class="preprocessor"></span><span class="preprocessor">#define _DFPR(N) ((N)-FPR_OFFSET)</span>
<a name="l00181"></a><a class="code" href="machine_8h.html#6f5332d14ef2c1f6eb91a3abdd1a3110">00181</a> <span class="preprocessor"></span><span class="preprocessor">#define _DCREG(N) ((N)-CREG_OFFSET)</span>
<a name="l00182"></a><a class="code" href="machine_8h.html#42440af496df54cf1da24949ba2b9e0d">00182</a> <span class="preprocessor"></span><span class="preprocessor">#define _DSEG(N) ((N)-SEG_OFFSET)</span>
<a name="l00183"></a>00183 <span class="preprocessor"></span>
<a name="l00184"></a>00184 <span class="comment">/* general purpose (integer) register file entry type */</span>
<a name="l00185"></a><a class="code" href="unionmd__gpr__t.html">00185</a> <span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00186"></a><a class="code" href="unionmd__gpr__t.html#292c7746e39cc7d9de4c95d49c8b753b">00186</a>   <a class="code" href="host_8h.html#064e4defdc308749258f722d81981cac">dword_t</a> dw[<a class="code" href="machine_8h.html#b99f4cb95bb7b81734111ae68dd06a38">MD_NUM_IREGS</a>];
<a name="l00187"></a><a class="code" href="unionmd__gpr__t.html#7b003082b67e0c5472824b80d2d20791">00187</a>   <span class="keyword">struct </span>{ <a class="code" href="host_8h.html#c28e484253fd62d727019f0d361996a0">word_t</a> lo; <a class="code" href="host_8h.html#c28e484253fd62d727019f0d361996a0">word_t</a> hi; } w[<a class="code" href="machine_8h.html#b99f4cb95bb7b81734111ae68dd06a38">MD_NUM_IREGS</a>];
<a name="l00188"></a><a class="code" href="unionmd__gpr__t.html#1e318139973aabdb9c78b4c2fe3c7ece">00188</a>   <span class="keyword">struct </span>{ <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> lo; <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> hi; <a class="code" href="host_8h.html#c28e484253fd62d727019f0d361996a0">word_t</a> pad; } b[<a class="code" href="machine_8h.html#b99f4cb95bb7b81734111ae68dd06a38">MD_NUM_IREGS</a>];
<a name="l00189"></a>00189 } <a class="code" href="unionmd__gpr__t.html">md_gpr_t</a>;
<a name="l00190"></a>00190 
<a name="l00191"></a>00191 <span class="comment">/* floating point register file entry type */</span>
<a name="l00192"></a><a class="code" href="unionmd__fpr__t.html">00192</a> <span class="keyword">typedef</span> <span class="keyword">union </span>{
<a name="l00193"></a><a class="code" href="unionmd__fpr__t.html#1a58a0ffa7ccd11adf6580ba87165a26">00193</a>   <a class="code" href="host_8h.html#b7f65588dca2a9db3fd4ca155fb41ae1">efloat_t</a> e[<a class="code" href="machine_8h.html#78ff93a9f3fc7554b7fc5f80389f2cc9">MD_NUM_FREGS</a>];    <span class="comment">/* extended-precision floating point view */</span>
<a name="l00194"></a>00194 } <a class="code" href="unionmd__fpr__t.html">md_fpr_t</a>;
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 <span class="comment">/* segment register file entry type */</span>
<a name="l00197"></a><a class="code" href="unionmd__seg__t.html">00197</a> <span class="keyword">typedef</span> <span class="keyword">union</span>{
<a name="l00198"></a><a class="code" href="unionmd__seg__t.html#3cfa90980f7dec4f9ae3a4bb5a9a88a8">00198</a>   <a class="code" href="host_8h.html#c28e484253fd62d727019f0d361996a0">word_t</a> w[<a class="code" href="machine_8h.html#e4108e4256c25f82b9db0a0ae6fd2ae4">MD_NUM_SREGS</a>]; <span class="comment">// UCSD</span>
<a name="l00199"></a>00199 } <a class="code" href="unionmd__seg__t.html">md_seg_t</a>;
<a name="l00200"></a>00200 
<a name="l00201"></a>00201 <span class="comment">/* control register file contents */</span>
<a name="l00202"></a><a class="code" href="structmd__ctrl__t.html">00202</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>{
<a name="l00203"></a><a class="code" href="structmd__ctrl__t.html#d923ea6fa93332fa9e41da6b2401a0bc">00203</a>   <a class="code" href="host_8h.html#064e4defdc308749258f722d81981cac">dword_t</a> aflags;        <span class="comment">/* processor arithmetic flags */</span>
<a name="l00204"></a><a class="code" href="structmd__ctrl__t.html#26a6b1e138ad9b89d0c51ad9ff11021f">00204</a>   <a class="code" href="host_8h.html#c28e484253fd62d727019f0d361996a0">word_t</a> cwd;            <span class="comment">/* floating point control word */</span>
<a name="l00205"></a><a class="code" href="structmd__ctrl__t.html#7ddf70a462d6a6c27d3e7a76cf9ce4d8">00205</a>   <a class="code" href="host_8h.html#c28e484253fd62d727019f0d361996a0">word_t</a> fsw;            <span class="comment">/* floating point status register */</span>
<a name="l00206"></a>00206 } <a class="code" href="structmd__ctrl__t.html">md_ctrl_t</a>;
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 <span class="comment">/* well known registers */</span>
<a name="l00209"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2">00209</a> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2">md_reg_names</a> {
<a name="l00210"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2ce62595ab7f8025afb2f97c26e298ace">00210</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2ce62595ab7f8025afb2f97c26e298ace">MD_REG_AL</a> = 0,
<a name="l00211"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2700ecfec92f174a20090a4380a805dc3">00211</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2700ecfec92f174a20090a4380a805dc3">MD_REG_AX</a> = 0,
<a name="l00212"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2cd4d17d79b9503b6170e84266c92e17c">00212</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2cd4d17d79b9503b6170e84266c92e17c">MD_REG_EAX</a> = 0,
<a name="l00213"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c24dcac250613d3ff10c07a95c716d06c6">00213</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c24dcac250613d3ff10c07a95c716d06c6">MD_REG_eAX</a> = 0,
<a name="l00214"></a>00214 
<a name="l00215"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c23e0c27038ab1dcf0fc6d1a765f5ab45a">00215</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c23e0c27038ab1dcf0fc6d1a765f5ab45a">MD_REG_CL</a> = 1,
<a name="l00216"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2e3dfe73ca0fcd983eaf8f93a0b3659a9">00216</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2e3dfe73ca0fcd983eaf8f93a0b3659a9">MD_REG_CX</a> = 1,
<a name="l00217"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2ee6c2aa04d8820da15c3251f188f5d3e">00217</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2ee6c2aa04d8820da15c3251f188f5d3e">MD_REG_ECX</a> = 1,
<a name="l00218"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c28cff5077720ecdc30e3b7aae10e591f1">00218</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c28cff5077720ecdc30e3b7aae10e591f1">MD_REG_eCX</a> = 1,
<a name="l00219"></a>00219 
<a name="l00220"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c21261f76a8899411e1d0558c28daba7de">00220</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c21261f76a8899411e1d0558c28daba7de">MD_REG_DL</a> = 2,
<a name="l00221"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c25c4bdbe632af5aec001334a67087f229">00221</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c25c4bdbe632af5aec001334a67087f229">MD_REG_DX</a> = 2,
<a name="l00222"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c266547655ffc3834f3db65398fb6c26c4">00222</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c266547655ffc3834f3db65398fb6c26c4">MD_REG_EDX</a> = 2,
<a name="l00223"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c29877d7f11bd659aa70204df447095a09">00223</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c29877d7f11bd659aa70204df447095a09">MD_REG_eDX</a> = 2,
<a name="l00224"></a>00224 
<a name="l00225"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c23a5a20c6107f24adf9575a179040023e">00225</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c23a5a20c6107f24adf9575a179040023e">MD_REG_BL</a> = 3,
<a name="l00226"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2a3cbdac8d06f9163b274da3d72a5cdbe">00226</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2a3cbdac8d06f9163b274da3d72a5cdbe">MD_REG_BX</a> = 3,
<a name="l00227"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2b13ae9b87237b68e4b18d808e764dd7e">00227</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2b13ae9b87237b68e4b18d808e764dd7e">MD_REG_EBX</a> = 3,
<a name="l00228"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2679a0bc7ba1179dfb2c411a54eb2c21c">00228</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2679a0bc7ba1179dfb2c411a54eb2c21c">MD_REG_eBX</a> = 3,
<a name="l00229"></a>00229 
<a name="l00230"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2b95d78eee520b8be589d5f6a39632858">00230</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2b95d78eee520b8be589d5f6a39632858">MD_REG_AH</a> = 4,
<a name="l00231"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c23888e809b8788215eaeb4565f385a7f2">00231</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c23888e809b8788215eaeb4565f385a7f2">MD_REG_SP</a> = 4,    <span class="comment">/* stack pointer */</span>
<a name="l00232"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2b5b0dab7fb27e1af846f8281d9babc3c">00232</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2b5b0dab7fb27e1af846f8281d9babc3c">MD_REG_ESP</a> = 4,
<a name="l00233"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2eaf65393f9aec2428bae46deffaa8bf1">00233</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2eaf65393f9aec2428bae46deffaa8bf1">MD_REG_eSP</a> = 4,
<a name="l00234"></a>00234 
<a name="l00235"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c27dd5af9117215e6acc0312706a58cef6">00235</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c27dd5af9117215e6acc0312706a58cef6">MD_REG_CH</a> = 5,    <span class="comment">/* base pointer */</span>
<a name="l00236"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2d7948118f2830b63b50d085c0a6ad450">00236</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2d7948118f2830b63b50d085c0a6ad450">MD_REG_BP</a> = 5,
<a name="l00237"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c24bd1f4443f8ad14d767fe4d7c82c56dc">00237</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c24bd1f4443f8ad14d767fe4d7c82c56dc">MD_REG_EBP</a> = 5,
<a name="l00238"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2681d5cb26ae15798157763147e7d14a0">00238</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2681d5cb26ae15798157763147e7d14a0">MD_REG_eBP</a> = 5,
<a name="l00239"></a>00239 
<a name="l00240"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2d479a553124f07177a4f20a29ab6b5b7">00240</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2d479a553124f07177a4f20a29ab6b5b7">MD_REG_DH</a> = 6,
<a name="l00241"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c22b0ebde0795820f034430b440836c15a">00241</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c22b0ebde0795820f034430b440836c15a">MD_REG_SI</a> = 6,
<a name="l00242"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c24220933ad3ce72db42fdb8dea26add6e">00242</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c24220933ad3ce72db42fdb8dea26add6e">MD_REG_ESI</a> = 6,
<a name="l00243"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2706614cf6a78883b6f782b6d705a3538">00243</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2706614cf6a78883b6f782b6d705a3538">MD_REG_eSI</a> = 6,
<a name="l00244"></a>00244 
<a name="l00245"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c28890e4abcc3a2ac1a36ef0be021c570b">00245</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c28890e4abcc3a2ac1a36ef0be021c570b">MD_REG_BH</a> = 7,
<a name="l00246"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c244c180777eb77679392fc58f11f21abd">00246</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c244c180777eb77679392fc58f11f21abd">MD_REG_DI</a> = 7,
<a name="l00247"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c229dda96fb15fd4ad68cd8ad28d1a450d">00247</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c229dda96fb15fd4ad68cd8ad28d1a450d">MD_REG_EDI</a> = 7,
<a name="l00248"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2c19764e03213b9b783724e92d427e7c4">00248</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2c19764e03213b9b783724e92d427e7c4">MD_REG_eDI</a> = 7,
<a name="l00249"></a>00249 
<a name="l00250"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2b48dbcd217b159cf118814051a5d77ad">00250</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2b48dbcd217b159cf118814051a5d77ad">MD_REG_TMP0</a> = 8,
<a name="l00251"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c26023b67315f50842c33bcddb13ea7a2f">00251</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c26023b67315f50842c33bcddb13ea7a2f">MD_REG_TMP1</a> = 9,
<a name="l00252"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c27bc0bf932ce62d7b21aa6851725cd1b7">00252</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c27bc0bf932ce62d7b21aa6851725cd1b7">MD_REG_TMP2</a> = 10,
<a name="l00253"></a>00253 
<a name="l00254"></a><a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c26c67316076cf9d98777ba6147f6b75f1">00254</a>   <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c26c67316076cf9d98777ba6147f6b75f1">MD_REG_ZERO</a> = 15
<a name="l00255"></a>00255 
<a name="l00256"></a>00256 };
<a name="l00257"></a>00257 
<a name="l00258"></a><a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb27">00258</a> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb27">md_freg_names</a> {
<a name="l00259"></a><a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb27f17d183dc759dd3c33e738facef9d78d">00259</a>   <a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb27f17d183dc759dd3c33e738facef9d78d">MD_REG_ST0</a> = 0,
<a name="l00260"></a><a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb274fec573609694df942be86a5a25710c4">00260</a>   <a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb274fec573609694df942be86a5a25710c4">MD_REG_ST1</a> = 1,
<a name="l00261"></a><a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb273f2d3f4209d084a6abdd6797711ee086">00261</a>   <a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb273f2d3f4209d084a6abdd6797711ee086">MD_REG_ST2</a> = 2,
<a name="l00262"></a><a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb27d0b120cec91a38c7f67abcb89e77d057">00262</a>   <a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb27d0b120cec91a38c7f67abcb89e77d057">MD_REG_ST3</a> = 3,
<a name="l00263"></a><a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb279a1030ae1dd3ad7a3d5a9cf08067b6ec">00263</a>   <a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb279a1030ae1dd3ad7a3d5a9cf08067b6ec">MD_REG_ST4</a> = 4,
<a name="l00264"></a><a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb27c10e99a516ef804283bd108931744474">00264</a>   <a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb27c10e99a516ef804283bd108931744474">MD_REG_ST5</a> = 5,
<a name="l00265"></a><a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb27fd64ccb979f9ea54cca29f2a348098f0">00265</a>   <a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb27fd64ccb979f9ea54cca29f2a348098f0">MD_REG_ST6</a> = 6,
<a name="l00266"></a><a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb27b7b2ee0b8c15e28f8a8729115be0e24b">00266</a>   <a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb27b7b2ee0b8c15e28f8a8729115be0e24b">MD_REG_ST7</a> = 7,
<a name="l00267"></a>00267 
<a name="l00268"></a><a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb27adeb2fa7b722958e41a1731e60389616">00268</a>   <a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb27adeb2fa7b722958e41a1731e60389616">MD_REG_FTMP0</a> = 8,
<a name="l00269"></a><a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb27b31b77dccd7b42b8665c0b7b7e4f14f1">00269</a>   <a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb27b31b77dccd7b42b8665c0b7b7e4f14f1">MD_REG_FTMP1</a> = 9,
<a name="l00270"></a><a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb273fea221d381de4f98fee0e7b57372259">00270</a>   <a class="code" href="machine_8h.html#0722d6f3fe2cc243f6a38e323f4ecb273fea221d381de4f98fee0e7b57372259">MD_REG_FTMP2</a> = 10
<a name="l00271"></a>00271 };
<a name="l00272"></a>00272 
<a name="l00273"></a>00273 <span class="comment">/* UCSD */</span>
<a name="l00274"></a><a class="code" href="machine_8h.html#16edffa2648acfeb8551428d6876b4b0">00274</a> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#16edffa2648acfeb8551428d6876b4b0">md_sreg_names</a> {
<a name="l00275"></a><a class="code" href="machine_8h.html#16edffa2648acfeb8551428d6876b4b0d4a355105ef101a036819f43f7b88bf7">00275</a>   <a class="code" href="machine_8h.html#16edffa2648acfeb8551428d6876b4b0d4a355105ef101a036819f43f7b88bf7">MD_REG_CS</a> = 0, 
<a name="l00276"></a><a class="code" href="machine_8h.html#16edffa2648acfeb8551428d6876b4b0e79e4a6e91b45f7e1afee76b0a18dd5f">00276</a>   <a class="code" href="machine_8h.html#16edffa2648acfeb8551428d6876b4b0e79e4a6e91b45f7e1afee76b0a18dd5f">MD_REG_SS</a> = 1, 
<a name="l00277"></a><a class="code" href="machine_8h.html#16edffa2648acfeb8551428d6876b4b03a38ef310b3b5a9ae1a73eb195966994">00277</a>   <a class="code" href="machine_8h.html#16edffa2648acfeb8551428d6876b4b03a38ef310b3b5a9ae1a73eb195966994">MD_REG_DS</a> = 2, 
<a name="l00278"></a><a class="code" href="machine_8h.html#16edffa2648acfeb8551428d6876b4b077af69050ebc850300031209dad88733">00278</a>   <a class="code" href="machine_8h.html#16edffa2648acfeb8551428d6876b4b077af69050ebc850300031209dad88733">MD_REG_ES</a> = 3, 
<a name="l00279"></a><a class="code" href="machine_8h.html#16edffa2648acfeb8551428d6876b4b0790fe6cce724424f6813a62bf52242ed">00279</a>   <a class="code" href="machine_8h.html#16edffa2648acfeb8551428d6876b4b0790fe6cce724424f6813a62bf52242ed">MD_REG_FS</a> = 4, 
<a name="l00280"></a><a class="code" href="machine_8h.html#16edffa2648acfeb8551428d6876b4b0a867d57387d44a40026e1051eeea8b7d">00280</a>   <a class="code" href="machine_8h.html#16edffa2648acfeb8551428d6876b4b0a867d57387d44a40026e1051eeea8b7d">MD_REG_GS</a> = 5 
<a name="l00281"></a>00281 };
<a name="l00282"></a>00282 
<a name="l00283"></a>00283 <span class="comment">/* GL */</span>
<a name="l00284"></a><a class="code" href="machine_8h.html#f078ffebd93269a86355d7e41c6fd6f1">00284</a> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#f078ffebd93269a86355d7e41c6fd6f1">md_creg_names</a> {
<a name="l00285"></a><a class="code" href="machine_8h.html#f078ffebd93269a86355d7e41c6fd6f1c2fafc305b75d71956ef7420b58be20e">00285</a>   <a class="code" href="machine_8h.html#f078ffebd93269a86355d7e41c6fd6f1c2fafc305b75d71956ef7420b58be20e">MD_REG_AFLAGS</a> = 0, 
<a name="l00286"></a><a class="code" href="machine_8h.html#f078ffebd93269a86355d7e41c6fd6f163a486bd2fa277618f4cb3bce219f752">00286</a>   <a class="code" href="machine_8h.html#f078ffebd93269a86355d7e41c6fd6f163a486bd2fa277618f4cb3bce219f752">MD_REG_CWD</a> = 1, 
<a name="l00287"></a><a class="code" href="machine_8h.html#f078ffebd93269a86355d7e41c6fd6f18d4a7d47d495991549323eca7ba6b810">00287</a>   <a class="code" href="machine_8h.html#f078ffebd93269a86355d7e41c6fd6f18d4a7d47d495991549323eca7ba6b810">MD_REG_FSW</a> = 2
<a name="l00288"></a>00288 };
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 <span class="comment">/* Not used by x86, present for ARM compatibility */</span>
<a name="l00291"></a><a class="code" href="machine_8h.html#e8ea123a1ba524d6eb2c78b6887f432c">00291</a> <span class="preprocessor">#define MD_REG_PC       0</span>
<a name="l00292"></a>00292 <span class="preprocessor"></span>
<a name="l00293"></a>00293 <span class="comment">/*</span>
<a name="l00294"></a>00294 <span class="comment"> * target-dependent instruction format definition</span>
<a name="l00295"></a>00295 <span class="comment"> */</span>
<a name="l00296"></a>00296 
<a name="l00297"></a>00297 <span class="comment">/* maximum instruction length in bytes */</span>
<a name="l00298"></a><a class="code" href="machine_8h.html#f694f367b2d512550e2a4e8e9a658937">00298</a> <span class="preprocessor">#define MD_MAX_ILEN        16</span>
<a name="l00299"></a>00299 <span class="preprocessor"></span>
<a name="l00300"></a>00300 
<a name="l00301"></a>00301 <span class="comment">/*QEMU can give multiple mem-ops if the instruction has multiple references instructions can have loads and stores in the same macro-op</span>
<a name="l00302"></a>00302 <span class="comment"> eg a MOVS instruction gets converted into a store and load micro-op */</span>
<a name="l00303"></a><a class="code" href="structmem__ops.html">00303</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structmem__ops.html">mem_ops</a>{
<a name="l00304"></a><a class="code" href="structmem__ops.html#a43937a0969b5ef7228d9a2047457c87">00304</a> md_paddr_t <a class="code" href="structmem__ops.html#a43937a0969b5ef7228d9a2047457c87">mem_vaddr_ld</a>[2];
<a name="l00305"></a><a class="code" href="structmem__ops.html#ebe595b6542eff03da2b3f92bb966c07">00305</a> md_paddr_t <a class="code" href="structmem__ops.html#ebe595b6542eff03da2b3f92bb966c07">mem_paddr_ld</a>[2];
<a name="l00306"></a><a class="code" href="structmem__ops.html#4e0149c5502186cc978fc5412d60b087">00306</a> <span class="keywordtype">bool</span> <a class="code" href="structmem__ops.html#4e0149c5502186cc978fc5412d60b087">ld_dequeued</a>[2];
<a name="l00307"></a><a class="code" href="structmem__ops.html#aa559aaa21d731cda775b553c08c9a2f">00307</a> <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmem__ops.html#aa559aaa21d731cda775b553c08c9a2f">ld_size</a>[2];
<a name="l00308"></a>00308 
<a name="l00309"></a><a class="code" href="structmem__ops.html#2f0d7904460f2963b06f6a2918594692">00309</a> md_paddr_t <a class="code" href="structmem__ops.html#2f0d7904460f2963b06f6a2918594692">mem_vaddr_str</a>[2];
<a name="l00310"></a><a class="code" href="structmem__ops.html#84f77c012a6cdd392f645db63dd3b9cb">00310</a> md_paddr_t <a class="code" href="structmem__ops.html#84f77c012a6cdd392f645db63dd3b9cb">mem_paddr_str</a>[2]; 
<a name="l00311"></a><a class="code" href="structmem__ops.html#4158b3e42772696b3f6569c7fc2b1401">00311</a> <span class="keywordtype">bool</span> <a class="code" href="structmem__ops.html#4158b3e42772696b3f6569c7fc2b1401">str_dequeued</a>[2];
<a name="l00312"></a><a class="code" href="structmem__ops.html#66a55324ea75d2ce5951a6dbfe43b665">00312</a> <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmem__ops.html#66a55324ea75d2ce5951a6dbfe43b665">str_size</a>[2];
<a name="l00313"></a>00313 
<a name="l00314"></a><a class="code" href="structmem__ops.html#866a5a8c45748506a42f030a301ea85e">00314</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structmem__ops.html#866a5a8c45748506a42f030a301ea85e">memops</a>;    <span class="comment">//The number of memory ops dequeued</span>
<a name="l00315"></a>00315 }<a class="code" href="structmem__ops.html">mem_ops_t</a>;
<a name="l00316"></a>00316 
<a name="l00317"></a>00317 
<a name="l00318"></a>00318 <span class="comment">/* instruction formats */</span>
<a name="l00319"></a><a class="code" href="structmd__inst__t.html">00319</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structmd__inst__t.html">md_inst_t</a> {
<a name="l00320"></a>00320 
<a name="l00321"></a>00321   <span class="comment">/* instruction code */</span>
<a name="l00322"></a>00322 
<a name="l00323"></a><a class="code" href="structmd__inst__t.html#cd464d5bc7356337ebd2ce89f968991c">00323</a>   <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmd__inst__t.html#cd464d5bc7356337ebd2ce89f968991c">code</a>[<a class="code" href="machine_8h.html#f694f367b2d512550e2a4e8e9a658937">MD_MAX_ILEN</a>];
<a name="l00324"></a>00324 
<a name="l00325"></a>00325   <span class="comment">/* operational mode information */</span>
<a name="l00326"></a>00326 
<a name="l00327"></a><a class="code" href="structmd__inst__t.html#3bc85e42f8eab1d43542667ac907504d">00327</a>   <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmd__inst__t.html#3bc85e42f8eab1d43542667ac907504d">npfx</a>;            <span class="comment">/* number of prefix bytes */</span>
<a name="l00328"></a>00328 
<a name="l00329"></a><a class="code" href="machine_8h.html#074e3d3881a165f3030c6a16b364e47f">00329</a> <span class="preprocessor">#define MODE_OPER32        0x0001</span>
<a name="l00330"></a><a class="code" href="machine_8h.html#2e33cca3b4e448fea5e41b0f382b3fd2">00330</a> <span class="preprocessor"></span><span class="preprocessor">#define MODE_ADDR32        0x0002</span>
<a name="l00331"></a><a class="code" href="machine_8h.html#bd331806716ef1f7780dda535a08d9a1">00331</a> <span class="preprocessor"></span><span class="preprocessor">#define MODE_STACK32        0x0004</span>
<a name="l00332"></a><a class="code" href="structmd__inst__t.html#0b5a8c4597c2e37cf890118bd975f552">00332</a> <span class="preprocessor"></span>  <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmd__inst__t.html#0b5a8c4597c2e37cf890118bd975f552">mode</a>;            <span class="comment">/* execution mode prefix */</span>
<a name="l00333"></a>00333 
<a name="l00334"></a><a class="code" href="machine_8h.html#0d8e94cc129e15146f992108219451a3">00334</a> <span class="preprocessor">#define REP_NONE        0</span>
<a name="l00335"></a><a class="code" href="machine_8h.html#1fd5635eb03573f5a1618af1152d1fda">00335</a> <span class="preprocessor"></span><span class="preprocessor">#define REP_REPNZ       1</span>
<a name="l00336"></a><a class="code" href="machine_8h.html#1b0eb3c76214aef658830a2c081bbf90">00336</a> <span class="preprocessor"></span><span class="preprocessor">#define REP_REPZ        2</span>
<a name="l00337"></a><a class="code" href="machine_8h.html#2da96452a4c6418f9b9bbc1227e49f00">00337</a> <span class="preprocessor"></span><span class="preprocessor">#define REP_REP         3</span>
<a name="l00338"></a>00338 <span class="preprocessor"></span>
<a name="l00339"></a><a class="code" href="structmd__inst__t.html#3cb7c4132587d2f78d978d951ab0eef7">00339</a>   <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmd__inst__t.html#3cb7c4132587d2f78d978d951ab0eef7">rep</a>;            <span class="comment">/* repeat mode */</span>
<a name="l00340"></a>00340 
<a name="l00341"></a><a class="code" href="structmd__inst__t.html#306877762a28496836a56442420ddcbf">00341</a>   <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmd__inst__t.html#306877762a28496836a56442420ddcbf">lock</a>;            <span class="comment">/* locked? */</span>
<a name="l00342"></a>00342 
<a name="l00343"></a><a class="code" href="machine_8h.html#8e96f395ed520f27066d0a0542166da8">00343</a> <span class="preprocessor">#define SEG_DEF            0 </span><span class="comment">/* default */</span>
<a name="l00344"></a><a class="code" href="machine_8h.html#64e5aa42ead15b670c7d3ec47933b600">00344</a> <span class="preprocessor">#define SEG_CS            1</span>
<a name="l00345"></a><a class="code" href="machine_8h.html#9256283086f94e7b6b5bca25508ef861">00345</a> <span class="preprocessor"></span><span class="preprocessor">#define SEG_SS            2</span>
<a name="l00346"></a><a class="code" href="machine_8h.html#5d13293e61247df517ed00f93d92f895">00346</a> <span class="preprocessor"></span><span class="preprocessor">#define SEG_DS            3</span>
<a name="l00347"></a><a class="code" href="machine_8h.html#25945dd2b1dfbf16aa3ad58989d13dde">00347</a> <span class="preprocessor"></span><span class="preprocessor">#define SEG_ES            4</span>
<a name="l00348"></a><a class="code" href="machine_8h.html#71095c6827ec6c92c1de1834b1634467">00348</a> <span class="preprocessor"></span><span class="preprocessor">#define SEG_FS            5</span>
<a name="l00349"></a><a class="code" href="machine_8h.html#6feb6d46f4ed4e79f7e261b0b9ebbd07">00349</a> <span class="preprocessor"></span><span class="preprocessor">#define SEG_GS            6</span>
<a name="l00350"></a><a class="code" href="structmd__inst__t.html#6585da7b97a6aca3e3eb1c9c62f81401">00350</a> <span class="preprocessor"></span>  <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmd__inst__t.html#6585da7b97a6aca3e3eb1c9c62f81401">seg</a>;            <span class="comment">/* segment override */</span> <span class="comment">/* UCSD - Verify */</span>
<a name="l00351"></a>00351 
<a name="l00352"></a>00352   <span class="comment">/* predecode information */</span>
<a name="l00353"></a>00353 
<a name="l00354"></a><a class="code" href="structmd__inst__t.html#a2a65398bdd14775f80dcf8ef7f13387">00354</a>   <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmd__inst__t.html#a2a65398bdd14775f80dcf8ef7f13387">nopc</a>;            <span class="comment">/* number of opcode bytes */</span>
<a name="l00355"></a><a class="code" href="structmd__inst__t.html#f6202dfa18a0a666f44e72577e9a8a3d">00355</a>   <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmd__inst__t.html#f6202dfa18a0a666f44e72577e9a8a3d">modrm</a>;            <span class="comment">/* has modrm byte? (0/1) */</span>
<a name="l00356"></a>00356 
<a name="l00357"></a><a class="code" href="structmd__inst__t.html#3c1e6d5ddcc415c9c639405f2ae5e2bd">00357</a>   <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmd__inst__t.html#3c1e6d5ddcc415c9c639405f2ae5e2bd">sib</a>;            <span class="comment">/* has sib byte? (0/1) */</span>
<a name="l00358"></a><a class="code" href="structmd__inst__t.html#185bcc50679e9871c25cac931e26db66">00358</a>   <a class="code" href="host_8h.html#ea23fce331954f4c75f8651983440b33">sbyte_t</a> <a class="code" href="structmd__inst__t.html#185bcc50679e9871c25cac931e26db66">base</a>;            <span class="comment">/* base register (-1 == none) */</span>
<a name="l00359"></a><a class="code" href="structmd__inst__t.html#7792377739a8a6e249604800a636e461">00359</a>   <a class="code" href="host_8h.html#ea23fce331954f4c75f8651983440b33">sbyte_t</a> <a class="code" href="structmd__inst__t.html#7792377739a8a6e249604800a636e461">index</a>;        <span class="comment">/* index register (-1 == none) */</span>
<a name="l00360"></a>00360 
<a name="l00361"></a><a class="code" href="machine_8h.html#80d1802b56a8b37675fff7d467952862">00361</a> <span class="preprocessor">#define SCALE_1            0</span>
<a name="l00362"></a><a class="code" href="machine_8h.html#35552a6de7892611f4ee416e47b10af0">00362</a> <span class="preprocessor"></span><span class="preprocessor">#define SCALE_2            1</span>
<a name="l00363"></a><a class="code" href="machine_8h.html#4b4df2d807fa873260a8c32c3174070d">00363</a> <span class="preprocessor"></span><span class="preprocessor">#define SCALE_4            2</span>
<a name="l00364"></a><a class="code" href="machine_8h.html#eb4f405905c6452cf22e4a2cdb232acb">00364</a> <span class="preprocessor"></span><span class="preprocessor">#define SCALE_8            3</span>
<a name="l00365"></a><a class="code" href="structmd__inst__t.html#ef7bf58da1dac2cb75f24417b42c500f">00365</a> <span class="preprocessor"></span>  <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmd__inst__t.html#ef7bf58da1dac2cb75f24417b42c500f">scale</a>;            <span class="comment">/* index scale factor */</span>
<a name="l00366"></a>00366 
<a name="l00367"></a><a class="code" href="structmd__inst__t.html#0e721f5757e02c128eb15e51e1f37e99">00367</a>   <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmd__inst__t.html#0e721f5757e02c128eb15e51e1f37e99">ndisp</a>;            <span class="comment">/* size of displacement in bytes */</span>
<a name="l00368"></a><a class="code" href="structmd__inst__t.html#9c5533fe622b1fe45dc7886470080893">00368</a>   <a class="code" href="host_8h.html#4ddfb9d4cf465282a95376d27686b9c7">sdword_t</a> <a class="code" href="structmd__inst__t.html#9c5533fe622b1fe45dc7886470080893">disp</a>;            <span class="comment">/* sign-extended displacement value */</span>
<a name="l00369"></a>00369 
<a name="l00370"></a><a class="code" href="structmd__inst__t.html#6fc5250471ae53bb67d84dabe712ed97">00370</a>   <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmd__inst__t.html#6fc5250471ae53bb67d84dabe712ed97">nimm</a>;            <span class="comment">/* size of displacement in bytes */</span>
<a name="l00371"></a><a class="code" href="structmd__inst__t.html#b2f0a90d745653fcc0f7b2764407bb59">00371</a>   <a class="code" href="host_8h.html#4ddfb9d4cf465282a95376d27686b9c7">sdword_t</a> <a class="code" href="structmd__inst__t.html#b2f0a90d745653fcc0f7b2764407bb59">imm</a>;            <span class="comment">/* sign-extended immediate value */</span>
<a name="l00372"></a>00372 
<a name="l00373"></a><a class="code" href="structmd__inst__t.html#5dad80b28e8ae15c2bd387663d32fb7e">00373</a>   <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmd__inst__t.html#5dad80b28e8ae15c2bd387663d32fb7e">len</a>;            <span class="comment">/* inst length in bytes */</span>
<a name="l00374"></a>00374 
<a name="l00375"></a><a class="code" href="structmd__inst__t.html#d7a24ed96b5a93217bf1cbd39c2bb859">00375</a>   <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmd__inst__t.html#d7a24ed96b5a93217bf1cbd39c2bb859">qemu_len</a>;      <span class="comment">/* inst length given by QEMU We observe for some instruction that QEMU lengths and the one decoded by our decoder our different */</span>
<a name="l00376"></a>00376   
<a name="l00377"></a><a class="code" href="structmd__inst__t.html#95beb627225d1c1eb84837df86c53e28">00377</a>   md_addr_t <a class="code" href="structmd__inst__t.html#95beb627225d1c1eb84837df86c53e28">vaddr</a>;      <span class="comment">/* virtual address of the instruction */</span>
<a name="l00378"></a>00378 
<a name="l00379"></a><a class="code" href="structmd__inst__t.html#e05730869a364bf93b640941f78113ab">00379</a>   md_paddr_t <a class="code" href="structmd__inst__t.html#e05730869a364bf93b640941f78113ab">paddr</a>;     <span class="comment">/* physical address of the instruction */</span>
<a name="l00380"></a>00380 
<a name="l00381"></a><a class="code" href="structmd__inst__t.html#7d4fdf56674234c3dd7ad29c61bd6636">00381</a>   <a class="code" href="structmem__ops.html">mem_ops_t</a> <a class="code" href="structmem__ops.html">mem_ops</a>;    <span class="comment">/*stores the memory ops of the instruction*/</span>
<a name="l00382"></a>00382 
<a name="l00383"></a><a class="code" href="structmd__inst__t.html#b5f64c5560af0a48098e149f107890d6">00383</a>   md_paddr_t <a class="code" href="structmd__inst__t.html#b5f64c5560af0a48098e149f107890d6">mem_vaddr</a>; <span class="comment">/* virtual address of memory access */</span>
<a name="l00384"></a>00384 
<a name="l00385"></a><a class="code" href="structmd__inst__t.html#fed221efd36b737217220c9c44cf8e99">00385</a>   md_paddr_t <a class="code" href="structmd__inst__t.html#fed221efd36b737217220c9c44cf8e99">mem_paddr</a>; <span class="comment">/* physical address of memory access */</span>
<a name="l00386"></a>00386 
<a name="l00387"></a><a class="code" href="structmd__inst__t.html#4d7ae58227f8de4777efb8d5e5e9ff17">00387</a>   <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> <a class="code" href="structmd__inst__t.html#4d7ae58227f8de4777efb8d5e5e9ff17">size</a>;          <span class="comment">/* size of the memory access, is zero if its not a memory Op */</span>
<a name="l00388"></a>00388 
<a name="l00389"></a>00389 } <a class="code" href="structmd__inst__t.html">md_inst_t</a>;
<a name="l00390"></a>00390 
<a name="l00391"></a><a class="code" href="machine_8h.html#d2266d8ea9432d7a4253dcc60ec17a18">00391</a> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#d2266d8ea9432d7a4253dcc60ec17a18">MemOpType</a> { <a class="code" href="machine_8h.html#d2266d8ea9432d7a4253dcc60ec17a18a7dbd12c9d01b690ec6bd1229a617aec">MEM_RD</a> = 0, <a class="code" href="machine_8h.html#d2266d8ea9432d7a4253dcc60ec17a18f6d36162f59eda62f0c4de11fc00a104">MEM_WR</a>=1 };
<a name="l00392"></a>00392 
<a name="l00393"></a>00393 <span class="comment">/* XXX */</span>
<a name="l00394"></a>00394 <span class="comment">/* preferred nop instruction definition */</span>
<a name="l00395"></a>00395 <span class="keyword">extern</span> <span class="keyword">const</span> <a class="code" href="structmd__inst__t.html">md_inst_t</a> <a class="code" href="machine_8h.html#0fffd32d95bb6273df749071509e6476">MD_NOP_INST</a>;
<a name="l00396"></a>00396 
<a name="l00397"></a>00397 <span class="keyword">extern</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> <a class="code" href="machine_8h.html#682bceb9fed0ee0abfe4dbcfd56b06d6">timestamp</a>[<a class="code" href="machine_8h.html#009855593b59738d24dbfc236edb3b14">MAX_CORES</a>]; <span class="comment">// for RDTSC</span>
<a name="l00398"></a>00398 <span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="machine_8h.html#190cf67acd94a3907537ce7d422572d5">is_syscall</a>;
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 
<a name="l00401"></a>00401 <span class="comment">/* target swap support */</span>
<a name="l00402"></a>00402 <span class="preprocessor">#ifdef MD_CROSS_ENDIAN</span>
<a name="l00403"></a>00403 <span class="preprocessor"></span>
<a name="l00404"></a>00404 <span class="preprocessor">#define MD_SWAPW(X)        SWAP_WORD(X)</span>
<a name="l00405"></a>00405 <span class="preprocessor"></span><span class="preprocessor">#define MD_SWAPD(X)        SWAP_DWORD(X)</span>
<a name="l00406"></a>00406 <span class="preprocessor"></span><span class="preprocessor">#define MD_SWAPI(X)        SWAP_DWORD(X)</span>
<a name="l00407"></a>00407 <span class="preprocessor"></span><span class="preprocessor">#define MD_SWAPQ(X)        SWAP_QWORD(X)</span>
<a name="l00408"></a>00408 <span class="preprocessor"></span>
<a name="l00409"></a>00409 <span class="preprocessor">#else </span><span class="comment">/* !MD_CROSS_ENDIAN */</span>
<a name="l00410"></a>00410 
<a name="l00411"></a><a class="code" href="machine_8h.html#9e3a655a1aa8f906bf62279d13075bea">00411</a> <span class="preprocessor">#define MD_SWAPW(X)        (X)</span>
<a name="l00412"></a><a class="code" href="machine_8h.html#8945185b4ed86ba9344f06695903b74a">00412</a> <span class="preprocessor"></span><span class="preprocessor">#define MD_SWAPD(X)        (X)</span>
<a name="l00413"></a><a class="code" href="machine_8h.html#2ee4dc0002ba2a5b8af5a3b1df3a12a3">00413</a> <span class="preprocessor"></span><span class="preprocessor">#define MD_SWAPI(X)        (X)</span>
<a name="l00414"></a><a class="code" href="machine_8h.html#8671622114637e8d4bc975a00b9b5d7b">00414</a> <span class="preprocessor"></span><span class="preprocessor">#define MD_SWAPQ(X)        (X)</span>
<a name="l00415"></a>00415 <span class="preprocessor"></span>
<a name="l00416"></a>00416 <span class="preprocessor">#endif</span>
<a name="l00417"></a>00417 <span class="preprocessor"></span>
<a name="l00418"></a>00418 
<a name="l00419"></a>00419 <span class="comment">/* get inst size */</span>
<a name="l00420"></a><a class="code" href="machine_8h.html#14c2828e3f3d84cfb676273b5dfc5bf8">00420</a> <span class="preprocessor">#define MD_INST_SIZE(INST)              (INST).len</span>
<a name="l00421"></a>00421 <span class="preprocessor"></span>
<a name="l00422"></a>00422 <span class="comment">/*</span>
<a name="l00423"></a>00423 <span class="comment"> * target-dependent loader module configuration</span>
<a name="l00424"></a>00424 <span class="comment"> */</span>
<a name="l00425"></a>00425 
<a name="l00426"></a>00426 <span class="comment">/* maximum size of argc+argv+envp environment */</span>
<a name="l00427"></a><a class="code" href="machine_8h.html#bc3697b72722c398009c778f30919504">00427</a> <span class="preprocessor">#define MD_MAX_ENVIRON        16384</span>
<a name="l00428"></a>00428 <span class="preprocessor"></span><span class="comment">//#define MD_MAX_ENVIRON     8388608        // as given by the limit command</span>
<a name="l00429"></a>00429 
<a name="l00430"></a>00430 <span class="comment">/*</span>
<a name="l00431"></a>00431 <span class="comment"> * machine.def specific definitions</span>
<a name="l00432"></a>00432 <span class="comment"> */</span>
<a name="l00433"></a>00433 
<a name="l00434"></a>00434 <span class="comment">/* global opcode names, these are returned by the decoder (MD_OP_ENUM()) */</span>
<a name="l00435"></a>00435 
<a name="l00436"></a><a class="code" href="machine_8h.html#f9cc7c84fab2d337413c6ba6ecf49242">00436</a> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#f9cc7c84fab2d337413c6ba6ecf49242">md_opcode</a> {
<a name="l00437"></a><a class="code" href="machine_8h.html#f9cc7c84fab2d337413c6ba6ecf4924223a4605400bf2f908b89da0d2aa728be">00437</a>   <a class="code" href="machine_8h.html#f9cc7c84fab2d337413c6ba6ecf4924223a4605400bf2f908b89da0d2aa728be">OP_NA</a> = 0,    <span class="comment">/* NA */</span>
<a name="l00438"></a><a class="code" href="machine_8h.html#f9cc7c84fab2d337413c6ba6ecf4924265b1403770da4a787db3abb6c76589d0">00438</a> <span class="preprocessor">#define DEFINST(OP,MSK,NAME,OPFORM,RES,CLASS,O1,I1,I2,I3,OFLAGS,IFLAGS) OP,</span>
<a name="l00439"></a>00439 <span class="preprocessor"></span><span class="preprocessor">#define DEFUOP(OP,MSK,NAME,OPFORM,RES,CLASS,O1,I1,I2,I3,OFLAGS,IFLAGS) OP,</span>
<a name="l00440"></a>00440 <span class="preprocessor"></span><span class="preprocessor">#define DEFLINK(OP,MSK,NAME,MASK,SHIFT) OP,</span>
<a name="l00441"></a>00441 <span class="preprocessor"></span><span class="preprocessor">#define CONNECT(OP)</span>
<a name="l00442"></a>00442 <span class="preprocessor"></span><span class="preprocessor">#include "machine.def"</span>
<a name="l00443"></a>00443   OP_MAX    <span class="comment">/* number of opcodes + NA */</span>
<a name="l00444"></a>00444 };
<a name="l00445"></a>00445 
<a name="l00446"></a>00446 <span class="keyword">enum</span> <a class="code" href="machine_8h.html#f9cc7c84fab2d337413c6ba6ecf49242">md_opcode</a> <a class="code" href="machine_8h.html#1fd90055366ce7d618496a874a3ae28d">md_decode</a>(<span class="keyword">const</span> <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a> mode, <a class="code" href="structmd__inst__t.html">md_inst_t</a> *inst, <span class="keyword">const</span> <span class="keywordtype">int</span> set_nop);
<a name="l00447"></a>00447 
<a name="l00448"></a>00448 <span class="comment">/* inst -&gt; enum md_opcode mapping, use this macro to decode insts */</span>
<a name="l00449"></a><a class="code" href="machine_8h.html#045c7a410476a18c9c25a8ef46037031">00449</a> <span class="preprocessor">#define MD_SET_OPCODE(OP, INST)                        \</span>
<a name="l00450"></a>00450 <span class="preprocessor">  (OP) = md_decode(MODE_OPER32|MODE_ADDR32|MODE_STACK32, &amp;INST, 0)</span>
<a name="l00451"></a>00451 <span class="preprocessor"></span>
<a name="l00452"></a><a class="code" href="machine_8h.html#7d127ef0f1f9750b48bb0085c83af02a">00452</a> <span class="preprocessor">#define MD_SET_OPCODE_DURING_FETCH(OP, INST)                        \</span>
<a name="l00453"></a>00453 <span class="preprocessor">  (OP) = md_decode(MODE_OPER32|MODE_ADDR32|MODE_STACK32, &amp;INST, 1)</span>
<a name="l00454"></a>00454 <span class="preprocessor"></span>
<a name="l00455"></a><a class="code" href="machine_8h.html#4482f3079dbf54abd927db1bf3a2f6ec">00455</a> <span class="preprocessor">#define MD_GET_UOP(FLOW,INDEX)                       \</span>
<a name="l00456"></a>00456 <span class="preprocessor">  ((uop = &amp;FLOW[INDEX]),MD_SET_UOPCODE(op,uop))</span>
<a name="l00457"></a>00457 <span class="preprocessor"></span>
<a name="l00458"></a><a class="code" href="machine_8h.html#2d5b1d03418f115258fdb1d043cdb5cc">00458</a> <span class="preprocessor">#define MD_CHECK_PRED(OP,INST)    TRUE</span>
<a name="l00459"></a>00459 <span class="preprocessor"></span>
<a name="l00460"></a><a class="code" href="machine_8h.html#c2cab6744a434647b35f28d966f98d73">00460</a> <span class="preprocessor">#define MD_INC_FLOW       (UHASIMM ? 3 : 1)</span>
<a name="l00461"></a>00461 <span class="preprocessor"></span>
<a name="l00462"></a>00462 <span class="comment">/* largest opcode field value (currently upper 8-bit are used for pre/post-</span>
<a name="l00463"></a>00463 <span class="comment">    incr/decr operation specifiers */</span>
<a name="l00464"></a><a class="code" href="machine_8h.html#e290a35f1ce1f4b6ff135cadc759f883">00464</a> <span class="preprocessor">#define MD_MAX_MASK        2048</span>
<a name="l00465"></a>00465 <span class="preprocessor"></span>
<a name="l00466"></a>00466 <span class="comment">/* internal decoder state */</span>
<a name="l00467"></a>00467 
<a name="l00468"></a>00468 <span class="keyword">extern</span> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#f9cc7c84fab2d337413c6ba6ecf49242">md_opcode</a> <a class="code" href="machine_8h.html#37468a9eabf8ffb9ab36aeba214ab889">md_mask2op</a>[];
<a name="l00469"></a>00469 <span class="keyword">extern</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="machine_8h.html#9e194896b4331078f7674de60c5f3d69">md_opoffset</a>[];
<a name="l00470"></a>00470 <span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="machine_8h.html#b776daeabe4351ea31174bb27e2b4053">md_opmask</a>[];
<a name="l00471"></a>00471 <span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="machine_8h.html#f2dca813af1c59fc8db83eda120e3130">md_opshift</a>[];
<a name="l00472"></a>00472 
<a name="l00473"></a>00473 
<a name="l00474"></a>00474 <span class="comment">/* enum md_opcode -&gt; description string */</span>
<a name="l00475"></a><a class="code" href="machine_8h.html#03a40186454ebe507640ff6f7cc076bb">00475</a> <span class="preprocessor">#define MD_OP_NAME(OP)        (md_op2name[OP])</span>
<a name="l00476"></a>00476 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="machine_8h.html#90633225033f28b1f64ea8c8a98d80be">md_op2name</a>[];
<a name="l00477"></a>00477 
<a name="l00478"></a>00478 <span class="comment">/* enum md_opcode -&gt; enum name string */</span>
<a name="l00479"></a><a class="code" href="machine_8h.html#6725fe5a3dc4ed9774a20cba457443e2">00479</a> <span class="preprocessor">#define MD_OP_ENUM(OP)        (md_op2enum[OP])</span>
<a name="l00480"></a>00480 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="machine_8h.html#4b309227b94c2871cdf42823ca9897dd">md_op2enum</a>[];
<a name="l00481"></a>00481 
<a name="l00482"></a>00482 <span class="comment">/* enum md_opcode -&gt; opcode operand format, used by disassembler */</span>
<a name="l00483"></a><a class="code" href="machine_8h.html#47b479aaa31d1ac357dd99df697123d4">00483</a> <span class="preprocessor">#define MD_OP_FORMAT(OP)    (md_op2format[OP])</span>
<a name="l00484"></a>00484 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="machine_8h.html#522619fb5ba03b3f787502c9c7ccfc1a">md_op2format</a>[];
<a name="l00485"></a>00485 
<a name="l00486"></a>00486 <span class="comment">/* function unit classes, update md_fu2name if you update this definition */</span>
<a name="l00487"></a><a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d">00487</a> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d">md_fu_class</a> {
<a name="l00488"></a><a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d0978371c099784cd926791b23864a84e">00488</a>   <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d0978371c099784cd926791b23864a84e">FU_INVALID</a> = -1,  <span class="comment">/* inst cannot use a functional unit (assigned to Macro-Ops who</span>
<a name="l00489"></a>00489 <span class="comment">                       shouldn't be directly executed... only uops are assigned valid FU's) */</span>
<a name="l00490"></a><a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d21bc2332cff2798865fea21ebcf2713b">00490</a>   <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d21bc2332cff2798865fea21ebcf2713b">FU_NA</a> = 0,        <span class="comment">/* inst does not use a functional unit */</span>
<a name="l00491"></a><a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d4c916607268cc4ccf11e41a8d88c4308">00491</a>   <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d4c916607268cc4ccf11e41a8d88c4308">FU_IEU</a>,           <span class="comment">/* integer ALU */</span>
<a name="l00492"></a><a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d83bb3975188b3c46010ce75e319b8c05">00492</a>   <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d83bb3975188b3c46010ce75e319b8c05">FU_JEU</a>,           <span class="comment">/* jump execution unit */</span>
<a name="l00493"></a><a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d94067a1a39501738fd9e1338139c251e">00493</a>   <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d94067a1a39501738fd9e1338139c251e">FU_IMUL</a>,          <span class="comment">/* integer multiplier  */</span>
<a name="l00494"></a><a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97dcbf8d8b595a486e710ce3cc17f72c449">00494</a>   <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97dcbf8d8b595a486e710ce3cc17f72c449">FU_IDIV</a>,          <span class="comment">/* integer divider */</span>
<a name="l00495"></a><a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97dcb7870498a4bec151bf3b1a12026fcee">00495</a>   <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97dcb7870498a4bec151bf3b1a12026fcee">FU_SHIFT</a>,         <span class="comment">/* integer shifter */</span>
<a name="l00496"></a><a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d2ddf79bdd59f512d03e088ddb09d2140">00496</a>   <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d2ddf79bdd59f512d03e088ddb09d2140">FU_FADD</a>,          <span class="comment">/* floating point adder */</span>
<a name="l00497"></a><a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d552e3b0ae5425cc25662d735624af417">00497</a>   <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d552e3b0ae5425cc25662d735624af417">FU_FMUL</a>,          <span class="comment">/* floating point multiplier */</span>
<a name="l00498"></a><a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97db5a90fa9eeff5d159eea288fb91c95ba">00498</a>   <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97db5a90fa9eeff5d159eea288fb91c95ba">FU_FDIV</a>,          <span class="comment">/* floating point divider */</span>
<a name="l00499"></a><a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97dc6df6a21736799f1ef6c1e3523fe15f1">00499</a>   <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97dc6df6a21736799f1ef6c1e3523fe15f1">FU_FCPLX</a>,         <span class="comment">/* floating point complex (sqrt,transcendentals,...) */</span>
<a name="l00500"></a><a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d15dc11f953742a3523aeed4b3a1625e4">00500</a>   <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d15dc11f953742a3523aeed4b3a1625e4">FU_LD</a>,            <span class="comment">/* load port/AGU */</span>
<a name="l00501"></a><a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d9bac22bb5c28d465c62bb3fc277d6593">00501</a>   <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d9bac22bb5c28d465c62bb3fc277d6593">FU_STA</a>,           <span class="comment">/* store-address port/AGU */</span>
<a name="l00502"></a><a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d966321f8d50adda59b4025d3f733acdb">00502</a>   <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d966321f8d50adda59b4025d3f733acdb">FU_STD</a>,           <span class="comment">/* store-data port */</span>
<a name="l00503"></a><a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97da49fe5b0d01f8dfc89086f720a6bb807">00503</a>   <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97da49fe5b0d01f8dfc89086f720a6bb807">NUM_FU_CLASSES</a>    <span class="comment">/* total functional unit classes */</span>
<a name="l00504"></a>00504 };
<a name="l00505"></a>00505 
<a name="l00506"></a>00506 <span class="comment">/* enum md_opcode -&gt; enum md_fu_class, used by performance simulators */</span>
<a name="l00507"></a><a class="code" href="machine_8h.html#7f2662286e75066073d89e5490dcfea6">00507</a> <span class="preprocessor">#define MD_OP_FUCLASS(OP)    (md_op2fu[OP])</span>
<a name="l00508"></a>00508 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#8df19faa86d463480418a8a9be92b97d">md_fu_class</a> <a class="code" href="machine_8h.html#4fd850a25c5d4626f4d6470fb8956a02">md_op2fu</a>[];
<a name="l00509"></a>00509 
<a name="l00510"></a>00510 <span class="comment">/* enum md_fu_class -&gt; description string */</span>
<a name="l00511"></a><a class="code" href="machine_8h.html#cf467ef6d9acd36a197e6af289afdf00">00511</a> <span class="preprocessor">#define MD_FU_NAME(FU)        (md_fu2name[FU])</span>
<a name="l00512"></a>00512 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="machine_8h.html#b11573b466a921e8218f4606dc9785fd">md_fu2name</a>[];
<a name="l00513"></a>00513 
<a name="l00514"></a>00514 <span class="comment">/* instruction flags */</span>
<a name="l00515"></a><a class="code" href="machine_8h.html#f20298accfdd3e509f09850a88989b7c">00515</a> <span class="preprocessor">#define F_ICOMP        0x00000001    </span><span class="comment">/* integer computation */</span>
<a name="l00516"></a><a class="code" href="machine_8h.html#96492ad3766dc5f2ef84c5ef6a197e11">00516</a> <span class="preprocessor">#define F_FCOMP        0x00000002    </span><span class="comment">/* FP computation */</span>
<a name="l00517"></a><a class="code" href="machine_8h.html#366552bee0ef835c75db8fedf12c11f7">00517</a> <span class="preprocessor">#define F_CTRL        0x00000004    </span><span class="comment">/* control inst */</span>
<a name="l00518"></a><a class="code" href="machine_8h.html#099a2f044ceb531d0eca49c590219828">00518</a> <span class="preprocessor">#define F_UNCOND    0x00000008    </span><span class="comment">/*   unconditional change */</span>
<a name="l00519"></a><a class="code" href="machine_8h.html#bfe46b85c1701b4a87f12f7e62f2fa09">00519</a> <span class="preprocessor">#define F_COND        0x00000010    </span><span class="comment">/*   conditional change */</span>
<a name="l00520"></a><a class="code" href="machine_8h.html#a6be3e11431119e8d3ab666ab4f5ded7">00520</a> <span class="preprocessor">#define F_MEM        0x00000020    </span><span class="comment">/* memory access inst */</span>
<a name="l00521"></a><a class="code" href="machine_8h.html#a696f4e8edb147969a12513f7b195e9a">00521</a> <span class="preprocessor">#define F_LOAD        0x00000040    </span><span class="comment">/*   load inst */</span>
<a name="l00522"></a><a class="code" href="machine_8h.html#88eaa4bf4bc810ef90a437971cd5cf9e">00522</a> <span class="preprocessor">#define F_STORE        0x00000080    </span><span class="comment">/*   store inst */</span>
<a name="l00523"></a><a class="code" href="machine_8h.html#eef9e3b82606c667de22ceadaeaf1c41">00523</a> <span class="preprocessor">#define F_DISP        0x00000100    </span><span class="comment">/*   displaced (R+C) addr mode */</span>
<a name="l00524"></a><a class="code" href="machine_8h.html#63a36ef451597c48e85bf563ed3d6552">00524</a> <span class="preprocessor">#define F_RR        0x00000200    </span><span class="comment">/*   R+R addr mode */</span>
<a name="l00525"></a><a class="code" href="machine_8h.html#b0eb5429d9940b9a3934fcff0b779223">00525</a> <span class="preprocessor">#define F_DIRECT    0x00000400    </span><span class="comment">/*   direct addressing mode */</span>
<a name="l00526"></a><a class="code" href="machine_8h.html#fca5911ccd3348339952f3772240aa24">00526</a> <span class="preprocessor">#define F_TRAP        0x00000800    </span><span class="comment">/* traping inst */</span>
<a name="l00527"></a><a class="code" href="machine_8h.html#a7656182969e773cb0aefcab80303b78">00527</a> <span class="preprocessor">#define F_LONGLAT    0x00001000    </span><span class="comment">/* long latency inst (for sched) */</span>
<a name="l00528"></a><a class="code" href="machine_8h.html#10501bd46b1ba51188813786d869aaa5">00528</a> <span class="preprocessor">#define F_DIRJMP    0x00002000    </span><span class="comment">/* direct jump */</span>
<a name="l00529"></a><a class="code" href="machine_8h.html#47195f061df7507c4d7ec78cf84657e1">00529</a> <span class="preprocessor">#define F_INDIRJMP    0x00004000    </span><span class="comment">/* indirect jump */</span>
<a name="l00530"></a><a class="code" href="machine_8h.html#dc0a3b683ae2e72a812c4da20e899620">00530</a> <span class="preprocessor">#define F_CALL        0x00008000    </span><span class="comment">/* function call */</span>
<a name="l00531"></a><a class="code" href="machine_8h.html#574ad50830bad9b840fbd5531c3c4b85">00531</a> <span class="preprocessor">#define F_FPCOND    0x00010000    </span><span class="comment">/* FP conditional branch */</span>
<a name="l00532"></a><a class="code" href="machine_8h.html#09a630c7ecb9d50dae4b42229184e00d">00532</a> <span class="preprocessor">#define F_IMM        0x00020000    </span><span class="comment">/* instruction has immediate operand */</span>
<a name="l00533"></a><a class="code" href="machine_8h.html#2a27f6d30716d2e7aca6bdb8d798c46c">00533</a> <span class="preprocessor">#define F_CISC        0x00040000    </span><span class="comment">/* CISC instruction */</span>
<a name="l00534"></a><a class="code" href="machine_8h.html#552a74ebeb2ede9190804cbcca074879">00534</a> <span class="preprocessor">#define F_AGEN        0x00080000    </span><span class="comment">/* AGEN micro-instruction */</span>
<a name="l00535"></a><a class="code" href="machine_8h.html#c6ac63e2d699cda8b41cfc1991c69294">00535</a> <span class="preprocessor">#define F_IMMB        0x00100000    </span><span class="comment">/* inst has 1-byte immediate */</span>
<a name="l00536"></a><a class="code" href="machine_8h.html#514caacfe3e991ac9f53536886285992">00536</a> <span class="preprocessor">#define F_IMMW        0x00200000    </span><span class="comment">/* inst has 2-byte immediate */</span>
<a name="l00537"></a><a class="code" href="machine_8h.html#ededbdffd8af3783b8a5b23e5ea64f84">00537</a> <span class="preprocessor">#define F_IMMD        0x00300000    </span><span class="comment">/* inst has 4-byte immediate */</span>
<a name="l00538"></a><a class="code" href="machine_8h.html#e69315cdf43b98eae2fe14cb45b89f43">00538</a> <span class="preprocessor">#define F_IMMV        0x00400000    </span><span class="comment">/* inst has 1-byte immediate */</span>
<a name="l00539"></a><a class="code" href="machine_8h.html#508339853c38720131f96e6f2169c3bd">00539</a> <span class="preprocessor">#define F_IMMA        0x00500000    </span><span class="comment">/* inst has 1-byte immediate */</span>
<a name="l00540"></a><a class="code" href="machine_8h.html#ed566491a845d3778dd93eaa2efe6634">00540</a> <span class="preprocessor">#define F_UIMM        0x01000000    </span><span class="comment">/* immediate operand is unsigned */</span>
<a name="l00541"></a><a class="code" href="machine_8h.html#9d3b1c5f1b043755d074054367cd3405">00541</a> <span class="preprocessor">#define F_NOMOD        0x02000000    </span><span class="comment">/* no modrm byte */</span>
<a name="l00542"></a><a class="code" href="machine_8h.html#392ecf73feab82095d72d5a7a9a66f14">00542</a> <span class="preprocessor">#define F_REP        0x04000000    </span><span class="comment">/* no zero check during repeat */</span>
<a name="l00543"></a><a class="code" href="machine_8h.html#d1a033a0796fd0c70c7f3198588584bb">00543</a> <span class="preprocessor">#define F_UCODE         0x08000000      </span><span class="comment">/* instruction produces ucode  */</span>
<a name="l00544"></a><a class="code" href="machine_8h.html#e28773ab122b9a059388f6f2ccd88e6d">00544</a> <span class="preprocessor">#define F_RTS           0x10000000      </span><span class="comment">/* run-time support instruction */</span>
<a name="l00545"></a><a class="code" href="machine_8h.html#e4ff3f221a37ca995aaae6e284000891">00545</a> <span class="preprocessor">#define F_SPEC          0x20000000      </span><span class="comment">/* speculative instruction (hint) */</span>
<a name="l00546"></a><a class="code" href="machine_8h.html#fb11b1b5ba8ae95738ddaf78d455ecc0">00546</a> <span class="preprocessor">#define F_RETN          0x40000000      </span><span class="comment">/* subroutine return */</span>
<a name="l00547"></a><a class="code" href="machine_8h.html#f22e51ade054d5be4b47a3c1c87ef688">00547</a> <span class="preprocessor">#define F_FENCE         0x80000000      </span><span class="comment">/* Memory fence instruction */</span>
<a name="l00548"></a>00548 <span class="comment">/* non-zero if instruction has an immediate operand */</span>
<a name="l00549"></a><a class="code" href="machine_8h.html#aef2a06fe36dae503f76028b4ab49816">00549</a> <span class="preprocessor">#define F_HASIMM    0x00f00000</span>
<a name="l00550"></a>00550 <span class="preprocessor"></span>
<a name="l00551"></a>00551 <span class="comment">/* returns size of immediate operand */</span>
<a name="l00552"></a><a class="code" href="machine_8h.html#40c0a65ed12c23f401ba339da61f9fbe">00552</a> <span class="preprocessor">#define F_IMMSZ(M,X)    (((((X) &gt;&gt; 20) &amp; 0xf) == 0)            \</span>
<a name="l00553"></a>00553 <span class="preprocessor">    ? 0                        \</span>
<a name="l00554"></a>00554 <span class="preprocessor">    : (((((X) &gt;&gt; 20) &amp; 0xf) == 1)            \</span>
<a name="l00555"></a>00555 <span class="preprocessor">      ? 1                        \</span>
<a name="l00556"></a>00556 <span class="preprocessor">      : (((((X) &gt;&gt; 20) &amp; 0xf) == 2)        \</span>
<a name="l00557"></a>00557 <span class="preprocessor">        ? 2                    \</span>
<a name="l00558"></a>00558 <span class="preprocessor">        : (((((X) &gt;&gt; 20) &amp; 0xf) == 3)        \</span>
<a name="l00559"></a>00559 <span class="preprocessor">          ? 4                    \</span>
<a name="l00560"></a>00560 <span class="preprocessor">          : (((((X) &gt;&gt; 20) &amp; 0xf) == 4)        \</span>
<a name="l00561"></a>00561 <span class="preprocessor">            ? (((M) &amp; MODE_OPER32) ? 4 : 2)    \</span>
<a name="l00562"></a>00562 <span class="preprocessor">            : (((((X) &gt;&gt; 20) &amp; 0xf) == 5)    \</span>
<a name="l00563"></a>00563 <span class="preprocessor">              ? (((M) &amp; MODE_ADDR32) ? 4 : 2)    \</span>
<a name="l00564"></a>00564 <span class="preprocessor">              : (abort(), 0)))))))</span>
<a name="l00565"></a>00565 <span class="preprocessor"></span>
<a name="l00566"></a>00566 <span class="comment">/* enum md_opcode -&gt; opcode flags, used by simulators */</span>
<a name="l00567"></a><a class="code" href="machine_8h.html#9b0f21d8388c386bb4159d06bcf1ed72">00567</a> <span class="preprocessor">#define MD_OP_FLAGS(OP)        (md_op2flags[OP])</span>
<a name="l00568"></a>00568 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="machine_8h.html#0f9bc5db3570204239cce1fd0b2d0b24">md_op2flags</a>[];
<a name="l00569"></a>00569 
<a name="l00570"></a>00570 
<a name="l00571"></a>00571 <span class="comment">/* integer register specifiers */</span>
<a name="l00572"></a><a class="code" href="machine_8h.html#628642b04c07236ae1e986c248a79ae5">00572</a> <span class="preprocessor">#define RO        (Mop-&gt;fetch.inst.code[Mop-&gt;fetch.inst.npfx + Mop-&gt;fetch.inst.nopc - 1] &amp; 0x07)</span>
<a name="l00573"></a><a class="code" href="machine_8h.html#5c71a5e59a53413cd6c270266d63b031">00573</a> <span class="preprocessor"></span><span class="preprocessor">#define R        ((Mop-&gt;fetch.inst.code[Mop-&gt;fetch.inst.npfx + Mop-&gt;fetch.inst.nopc] &gt;&gt; 3) &amp; 0x07)</span>
<a name="l00574"></a><a class="code" href="machine_8h.html#4608958cdf4c8b8ff0a6e301c4c23ae1">00574</a> <span class="preprocessor"></span><span class="preprocessor">#define RM        (Mop-&gt;fetch.inst.code[Mop-&gt;fetch.inst.npfx + Mop-&gt;fetch.inst.nopc] &amp; 0x07)</span>
<a name="l00575"></a>00575 <span class="preprocessor"></span>
<a name="l00576"></a>00576 <span class="comment">/* floating point register specifiers */</span>
<a name="l00577"></a><a class="code" href="machine_8h.html#1171212a040f76ad9630f030efb1653e">00577</a> <span class="preprocessor">#define STI        (Mop-&gt;fetch.inst.code[Mop-&gt;fetch.inst.npfx + Mop-&gt;fetch.inst.nopc] &amp; 0x07)</span>
<a name="l00578"></a>00578 <span class="preprocessor"></span>
<a name="l00579"></a>00579 <span class="comment">/* Segment override - UCSD */</span>
<a name="l00580"></a><a class="code" href="machine_8h.html#743e046c574c96eb7fe6f5dd9135ee20">00580</a> <span class="preprocessor">#define SEG_INDEX                                                      \</span>
<a name="l00581"></a>00581 <span class="preprocessor">  Mop-&gt;fetch.inst.seg-1</span>
<a name="l00582"></a>00582 <span class="preprocessor"></span>
<a name="l00583"></a><a class="code" href="machine_8h.html#6caf03c3bd2a5c38311029687b07c441">00583</a> <span class="preprocessor">#define SEG                                                            \</span>
<a name="l00584"></a>00584 <span class="preprocessor">  ((Mop-&gt;fetch.inst.seg != SEG_DEF)                                              \</span>
<a name="l00585"></a>00585 <span class="preprocessor">   ?  SEG_W(SEG_INDEX)                                                   \</span>
<a name="l00586"></a>00586 <span class="preprocessor">   : (word_t)0)                                                                      </span>
<a name="l00587"></a>00587 <span class="preprocessor"></span>
<a name="l00588"></a>00588 <span class="comment">/* addressing mode fields */</span>
<a name="l00589"></a><a class="code" href="machine_8h.html#79bcfb6bde984f42d1124b068a509af7">00589</a> <span class="preprocessor">#define BASE                                \</span>
<a name="l00590"></a>00590 <span class="preprocessor">  ((Mop-&gt;fetch.inst.base &gt;= 0)                            \</span>
<a name="l00591"></a>00591 <span class="preprocessor">   ? ((Mop-&gt;fetch.inst.mode &amp; MODE_ADDR32) ? GPR_D(Mop-&gt;fetch.inst.base) : GPR_W(Mop-&gt;fetch.inst.base))    \</span>
<a name="l00592"></a>00592 <span class="preprocessor">   : 0)</span>
<a name="l00593"></a><a class="code" href="machine_8h.html#c6885dbfb371c33e523c7fb046118b36">00593</a> <span class="preprocessor"></span><span class="preprocessor">#define INDEX                                \</span>
<a name="l00594"></a>00594 <span class="preprocessor">  ((Mop-&gt;fetch.inst.index &gt;= 0)                            \</span>
<a name="l00595"></a>00595 <span class="preprocessor">   ? ((Mop-&gt;fetch.inst.mode &amp; MODE_ADDR32) ? GPR_D(Mop-&gt;fetch.inst.index) : GPR_W(Mop-&gt;fetch.inst.index))\</span>
<a name="l00596"></a>00596 <span class="preprocessor">   : 0)</span>
<a name="l00597"></a><a class="code" href="machine_8h.html#0cbea62f1ce2043dd08108e65ed8de1d">00597</a> <span class="preprocessor"></span><span class="preprocessor">#define SCALE        (Mop-&gt;fetch.inst.scale)</span>
<a name="l00598"></a><a class="code" href="machine_8h.html#20ec8425dec7bc4df44673206768c072">00598</a> <span class="preprocessor"></span><span class="preprocessor">#define DISP        (Mop-&gt;fetch.inst.disp)</span>
<a name="l00599"></a>00599 <span class="preprocessor"></span>
<a name="l00600"></a>00600 <span class="comment">/* address generation */</span>
<a name="l00601"></a>00601 <span class="comment">/* Ganesh */</span>
<a name="l00602"></a><a class="code" href="machine_8h.html#558b7ddbbb0724ba22cdafd1d4c11136">00602</a> <span class="preprocessor">#define AGEN_W(S,B,I,SC,D)                        \</span>
<a name="l00603"></a>00603 <span class="preprocessor">  ((Mop-&gt;fetch.inst.seg == SEG_DEF)                                                  \</span>
<a name="l00604"></a>00604 <span class="preprocessor">   ? ((word_t)((dword_t)(B) + ((dword_t)(I) &lt;&lt; (SC)) + (dword_t)(D)))        \</span>
<a name="l00605"></a>00605 <span class="preprocessor">   : ((word_t)((dword_t)(B) + ((dword_t)(thread-&gt;ldt_p?((thread-&gt;ldt_p)[S&gt;&gt;3]):0)) + ((dword_t)(I) &lt;&lt; (SC)) + (dword_t)(D))))</span>
<a name="l00606"></a>00606 <span class="preprocessor"></span>
<a name="l00607"></a><a class="code" href="machine_8h.html#279ae69ec9159e213789c11485c02e99">00607</a> <span class="preprocessor">#define AGEN_D(S,B,I,SC,D)                                            \</span>
<a name="l00608"></a>00608 <span class="preprocessor">  ((Mop-&gt;fetch.inst.seg == SEG_DEF)                                                  \</span>
<a name="l00609"></a>00609 <span class="preprocessor">   ? ((dword_t)((dword_t)(B) + ((dword_t)(I) &lt;&lt; (SC)) + (dword_t)(D)))        \</span>
<a name="l00610"></a>00610 <span class="preprocessor">   : ((dword_t)((dword_t)(B) + ((dword_t)(thread-&gt;ldt_p?((thread-&gt;ldt_p)[S&gt;&gt;3]):0)) + ((dword_t)(I) &lt;&lt; (SC)) + (dword_t)(D))))</span>
<a name="l00611"></a>00611 <span class="preprocessor"></span>
<a name="l00612"></a>00612 <span class="comment">/*  ((dword_t)((dword_t)(B) + ((dword_t)(I) &lt;&lt; (SC)) + (dword_t)(D)))*/</span>
<a name="l00613"></a>00613 
<a name="l00614"></a>00614 <span class="preprocessor">#if 1</span>
<a name="l00615"></a><a class="code" href="machine_8h.html#2a9adbaadf8764cb59f79ac3ddd71ba9">00615</a> <span class="preprocessor"></span><span class="preprocessor">#define AGEN_A(S,B,I,SC,D)                        \</span>
<a name="l00616"></a>00616 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_ADDR32) ? AGEN_D(S,B,I,SC,D) : AGEN_W(S,B,I,SC,D))</span>
<a name="l00617"></a><a class="code" href="machine_8h.html#bcc6658bfe3df71dd73cccde0800eba8">00617</a> <span class="preprocessor"></span><span class="preprocessor">#define AGEN_S(S,B,I,SC,D)                        \</span>
<a name="l00618"></a>00618 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_STACK32) ? AGEN_D(S,B,I,SC,D) : AGEN_W(S,B,I,SC,D))</span>
<a name="l00619"></a>00619 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00620"></a>00620 <span class="preprocessor"></span><span class="preprocessor">#define AGEN_A(S,B,I,SC,D)                        \</span>
<a name="l00621"></a>00621 <span class="preprocessor">  </span><span class="comment">/* FIXME: ignoring the SEG */</span>                        \
<a name="l00622"></a>00622 ((Mop-&gt;fetch.inst.mode &amp; MODE_ADDR32)                        \
<a name="l00623"></a>00623  ? (dword_t)(<span class="comment">/*(word_t)(S) +*/</span> (word_t)0 + (dword_t)(B) + ((dword_t)(I) &lt;&lt; (SC)) + (dword_t)(D))    \
<a name="l00624"></a>00624  : (word_t)(<span class="comment">/* (word_t)(S) +*/</span>(word_t)0 +  (dword_t)(B) + ((dword_t)(I) &lt;&lt; (SC)) + (dword_t)(D)))
<a name="l00625"></a>00625 
<a name="l00626"></a>00626 <span class="preprocessor">#define AGEN_S(S,B,I,SC,D)                        \</span>
<a name="l00627"></a>00627 <span class="preprocessor">  </span><span class="comment">/* FIXME: ignoring the SEG */</span>                        \
<a name="l00628"></a>00628 ((Mop-&gt;fetch.inst.mode &amp; MODE_STACK32)                        \
<a name="l00629"></a>00629  ? (dword_t)(<span class="comment">/*(word_t)(S) + */</span> (dword_t)(B) + ((dword_t)(I) &lt;&lt; (SC)) + (dword_t)(D))    \
<a name="l00630"></a>00630  : (word_t)(<span class="comment">/*(word_t)(S) +*/</span> (dword_t)(B) + ((dword_t)(I) &lt;&lt; (SC)) + (dword_t)(D)))
<a name="l00631"></a>00631 <span class="preprocessor">#endif</span>
<a name="l00632"></a>00632 <span class="preprocessor"></span>
<a name="l00633"></a>00633 <span class="comment">/* modrm field accessors */</span>
<a name="l00634"></a><a class="code" href="machine_8h.html#00e1deec462c2db0d483108b1b4aeafd">00634</a> <span class="preprocessor">#define MODRM_MOD(X)        (((X) &gt;&gt; 6) &amp; 0x03)</span>
<a name="l00635"></a><a class="code" href="machine_8h.html#ec437461dace8914816251a5d88c67fc">00635</a> <span class="preprocessor"></span><span class="preprocessor">#define MODRM_R(X)        (((X) &gt;&gt; 3) &amp; 0x07)</span>
<a name="l00636"></a><a class="code" href="machine_8h.html#0c7c8c2080cd07d493c97ca6107d9af2">00636</a> <span class="preprocessor"></span><span class="preprocessor">#define MODRM_OPC(X)        (((X) &gt;&gt; 3) &amp; 0x07)</span>
<a name="l00637"></a><a class="code" href="machine_8h.html#ad5cc3552184f5d8ff17e5b747eeba67">00637</a> <span class="preprocessor"></span><span class="preprocessor">#define MODRM_RM(X)        ((X) &amp; 0x07)</span>
<a name="l00638"></a>00638 <span class="preprocessor"></span>
<a name="l00639"></a>00639 <span class="comment">/* sib byte field accessors */</span>
<a name="l00640"></a><a class="code" href="machine_8h.html#e07e81496112bf371a6ff7f054441944">00640</a> <span class="preprocessor">#define SIB_SCALE(X)        (((X) &gt;&gt; 6) &amp; 0x03)</span>
<a name="l00641"></a><a class="code" href="machine_8h.html#9fa465ac29c1acd47dbbc4e2ef62c5be">00641</a> <span class="preprocessor"></span><span class="preprocessor">#define SIB_INDEX(X)        (((X) &gt;&gt; 3) &amp; 0x07)</span>
<a name="l00642"></a><a class="code" href="machine_8h.html#de13ecc82253b38c787f765bc05ffcb6">00642</a> <span class="preprocessor"></span><span class="preprocessor">#define SIB_BASE(X)        ((X) &amp; 0x07)</span>
<a name="l00643"></a>00643 <span class="preprocessor"></span>
<a name="l00644"></a>00644 <span class="comment">/* miscellaneous fields */</span>
<a name="l00645"></a><a class="code" href="machine_8h.html#78d126676907aa89a0adbfbef8282585">00645</a> <span class="preprocessor">#define CC        (Mop-&gt;fetch.inst.code[Mop-&gt;fetch.inst.npfx + Mop-&gt;fetch.inst.nopc - 1] &amp; 0x0f)</span>
<a name="l00646"></a>00646 <span class="preprocessor"></span>
<a name="l00647"></a>00647 <span class="comment">/* FP constant field */</span>
<a name="l00648"></a><a class="code" href="machine_8h.html#a499bb75bb504909cd0a72baf48c4653">00648</a> <span class="preprocessor">#define LC        (Mop-&gt;fetch.inst.code[Mop-&gt;fetch.inst.npfx + Mop-&gt;fetch.inst.nopc] &amp; 0x07)</span>
<a name="l00649"></a>00649 <span class="preprocessor"></span>
<a name="l00650"></a>00650 <span class="comment">/* immediates */</span>
<a name="l00651"></a><a class="code" href="machine_8h.html#6e887b613a8b61900743d43c3e068ecf">00651</a> <span class="preprocessor">#define IMM_B        (assert(Mop-&gt;fetch.inst.nimm == 1), Mop-&gt;fetch.inst.imm)</span>
<a name="l00652"></a><a class="code" href="machine_8h.html#d8a71b7590d6f0f22678a7618829f842">00652</a> <span class="preprocessor"></span><span class="preprocessor">#define IMM_W        (assert(Mop-&gt;fetch.inst.nimm == 2), Mop-&gt;fetch.inst.imm)</span>
<a name="l00653"></a><a class="code" href="machine_8h.html#185eeac87623ed593f29d58f6d78e082">00653</a> <span class="preprocessor"></span><span class="preprocessor">#define IMM_D        (assert(Mop-&gt;fetch.inst.nimm == 4), Mop-&gt;fetch.inst.imm)</span>
<a name="l00654"></a><a class="code" href="machine_8h.html#829b43aa25540c9472a71dbf26d007e8">00654</a> <span class="preprocessor"></span><span class="preprocessor">#define IMM_V        ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)            \</span>
<a name="l00655"></a>00655 <span class="preprocessor">    ? (assert(Mop-&gt;fetch.inst.nimm == 4), Mop-&gt;fetch.inst.imm)        \</span>
<a name="l00656"></a>00656 <span class="preprocessor">    : (assert(Mop-&gt;fetch.inst.nimm == 2), Mop-&gt;fetch.inst.imm))</span>
<a name="l00657"></a><a class="code" href="machine_8h.html#0dd004deaba491bed610688cd55a7ab4">00657</a> <span class="preprocessor"></span><span class="preprocessor">#define IMM_A        ((Mop-&gt;fetch.inst.mode &amp; MODE_ADDR32)            \</span>
<a name="l00658"></a>00658 <span class="preprocessor">    ? (assert(Mop-&gt;fetch.inst.nimm == 4), Mop-&gt;fetch.inst.imm)        \</span>
<a name="l00659"></a>00659 <span class="preprocessor">    : (assert(Mop-&gt;fetch.inst.nimm == 2), Mop-&gt;fetch.inst.imm))</span>
<a name="l00660"></a>00660 <span class="preprocessor"></span>
<a name="l00661"></a><a class="code" href="machine_8h.html#a9f2b699b7fd91bb636f1f5e7ba32ab1">00661</a> <span class="preprocessor">#define UIMM_B        (assert(Mop-&gt;fetch.inst.nimm == 1), (dword_t)(Mop-&gt;fetch.inst.imm &amp; 0xff))</span>
<a name="l00662"></a><a class="code" href="machine_8h.html#59a05a787c5390c8be9ac9efedb94654">00662</a> <span class="preprocessor"></span><span class="preprocessor">#define UIMM_W        (assert(Mop-&gt;fetch.inst.nimm == 2), (dword_t)(Mop-&gt;fetch.inst.imm &amp; 0xffff))</span>
<a name="l00663"></a><a class="code" href="machine_8h.html#0acefcd68d490f68a927f394d2e6bfa0">00663</a> <span class="preprocessor"></span><span class="preprocessor">#define UIMM_D        (assert(Mop-&gt;fetch.inst.nimm == 4), (dword_t)Mop-&gt;fetch.inst.imm)</span>
<a name="l00664"></a><a class="code" href="machine_8h.html#12c1a3248b81e8d81d5bab1483185a98">00664</a> <span class="preprocessor"></span><span class="preprocessor">#define UIMM_V        ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)            \</span>
<a name="l00665"></a>00665 <span class="preprocessor">    ? (assert(Mop-&gt;fetch.inst.nimm == 4), (dword_t)Mop-&gt;fetch.inst.imm)    \</span>
<a name="l00666"></a>00666 <span class="preprocessor">    : (assert(Mop-&gt;fetch.inst.nimm == 2), (dword_t)Mop-&gt;fetch.inst.imm))</span>
<a name="l00667"></a><a class="code" href="machine_8h.html#48529276b107b54227a249b53239a6b5">00667</a> <span class="preprocessor"></span><span class="preprocessor">#define UIMM_A        ((Mop-&gt;fetch.inst.mode &amp; MODE_ADDR32)            \</span>
<a name="l00668"></a>00668 <span class="preprocessor">    ? (assert(Mop-&gt;fetch.inst.nimm == 4), (dword_t)Mop-&gt;fetch.inst.imm)    \</span>
<a name="l00669"></a>00669 <span class="preprocessor">    : (assert(Mop-&gt;fetch.inst.nimm == 2), (dword_t)Mop-&gt;fetch.inst.imm))</span>
<a name="l00670"></a>00670 <span class="preprocessor"></span>
<a name="l00671"></a>00671 <span class="comment">/* load/store 12-bit unsigned offset field value */</span>
<a name="l00672"></a><a class="code" href="machine_8h.html#6a9fc425927b28770e853b880dd11c5b">00672</a> <span class="preprocessor">#define OFS        ((dword_t)(Mop-&gt;fetch.inst &amp; 0xfff))</span>
<a name="l00673"></a>00673 <span class="preprocessor"></span>
<a name="l00674"></a>00674 <span class="comment">/* load/store 8-bit unsigned offset field value */</span>
<a name="l00675"></a><a class="code" href="machine_8h.html#3dcc1c1a77e400803c6cb16822ec1e29">00675</a> <span class="preprocessor">#define HOFS        ((dword_t)((RS &lt;&lt; 4) + RM))</span>
<a name="l00676"></a>00676 <span class="preprocessor"></span>
<a name="l00677"></a>00677 <span class="comment">/* fp load/store 8-bit unsigned offset field value */</span>
<a name="l00678"></a><a class="code" href="machine_8h.html#c89858b42bf0803b0328565b56db3979">00678</a> <span class="preprocessor">#define FPOFS        ((dword_t)((Mop-&gt;fetch.inst &amp; 0xff) &lt;&lt; 2))</span>
<a name="l00679"></a>00679 <span class="preprocessor"></span>
<a name="l00680"></a>00680 <span class="comment">/* returns 24-bit signed immediate field value - made 2's complement - Onur 07/24/00 */</span>
<a name="l00681"></a><a class="code" href="machine_8h.html#00e73fd0ecd33e9e79cf4861ae3db648">00681</a> <span class="preprocessor">#define BOFS                                \</span>
<a name="l00682"></a>00682 <span class="preprocessor">  ((Mop-&gt;fetch.inst &amp; 0x800000)                            \</span>
<a name="l00683"></a>00683 <span class="preprocessor">   ? (0xfc000000 | ((Mop-&gt;fetch.inst &amp; 0xffffff) &lt;&lt; 2))                \</span>
<a name="l00684"></a>00684 <span class="preprocessor">   : ((Mop-&gt;fetch.inst &amp; 0x7fffff) &lt;&lt; 2))</span>
<a name="l00685"></a>00685 <span class="preprocessor"></span>
<a name="l00686"></a><a class="code" href="machine_8h.html#0bd872040d79aaccf54c6a6707a9e396">00686</a> <span class="preprocessor">#define IS_EVEN_ONES(r) \</span>
<a name="l00687"></a>00687 <span class="preprocessor">  (((r&amp;0x1)+    \</span>
<a name="l00688"></a>00688 <span class="preprocessor">    ((r&gt;&gt;1)&amp;0x1)+ \</span>
<a name="l00689"></a>00689 <span class="preprocessor">    ((r&gt;&gt;2)&amp;0x1)+ \</span>
<a name="l00690"></a>00690 <span class="preprocessor">    ((r&gt;&gt;3)&amp;0x1)+ \</span>
<a name="l00691"></a>00691 <span class="preprocessor">    ((r&gt;&gt;4)&amp;0x1)+ \</span>
<a name="l00692"></a>00692 <span class="preprocessor">    ((r&gt;&gt;5)&amp;0x1)+ \</span>
<a name="l00693"></a>00693 <span class="preprocessor">    ((r&gt;&gt;6)&amp;0x1)+ \</span>
<a name="l00694"></a>00694 <span class="preprocessor">    ((r&gt;&gt;7)&amp;0x1)) % 2 == 0)</span>
<a name="l00695"></a>00695 <span class="preprocessor"></span>
<a name="l00696"></a>00696 <span class="comment">/* coprocessor operation code for CDP instruction */</span>
<a name="l00697"></a><a class="code" href="machine_8h.html#0375304d4cf81efe624d2a3a2a2aac91">00697</a> <span class="preprocessor">#define CPOPC ((Mop-&gt;fetch.inst &gt;&gt; 20) &amp; 0x0f)</span>
<a name="l00698"></a><a class="code" href="machine_8h.html#a7f52965a919ba2b216077c1eeb91721">00698</a> <span class="preprocessor"></span><span class="preprocessor">#define CPEXT ((Mop-&gt;fetch.inst &gt;&gt; 5) &amp; 0x07)</span>
<a name="l00699"></a>00699 <span class="preprocessor"></span>
<a name="l00700"></a>00700 <span class="comment">/* number of condition flags */</span>
<a name="l00701"></a><a class="code" href="machine_8h.html#d84e82bd7dd16beb396eb1ff781d1194">00701</a> <span class="preprocessor">#define MD_MAX_FLAGS            12</span>
<a name="l00702"></a>00702 <span class="preprocessor"></span>
<a name="l00703"></a>00703 <span class="comment">/* flag definitions */</span>
<a name="l00704"></a><a class="code" href="machine_8h.html#a5676f82f38bd25a2fb2eaa55d2fdce1">00704</a> <span class="preprocessor">#define CF            0x00000001</span>
<a name="l00705"></a><a class="code" href="machine_8h.html#a0e278c26c25558741febfadd7216caa">00705</a> <span class="preprocessor"></span><span class="preprocessor">#define PF            0x00000004</span>
<a name="l00706"></a><a class="code" href="machine_8h.html#76ba789cde9c36cd57dbb390bdee7661">00706</a> <span class="preprocessor"></span><span class="preprocessor">#define AF            0x00000010</span>
<a name="l00707"></a><a class="code" href="machine_8h.html#b4dfddb53d3b02a91b6a0429bdc10143">00707</a> <span class="preprocessor"></span><span class="preprocessor">#define ZF            0x00000040</span>
<a name="l00708"></a><a class="code" href="machine_8h.html#1022bf161d0791b616eb885b56a04934">00708</a> <span class="preprocessor"></span><span class="preprocessor">#define SF            0x00000080</span>
<a name="l00709"></a><a class="code" href="machine_8h.html#0ad2d5d4043d3b7508e2a4da99d6f673">00709</a> <span class="preprocessor"></span><span class="preprocessor">#define DF            0x00000400</span>
<a name="l00710"></a><a class="code" href="machine_8h.html#37666c9af451b99166c96df28aec5395">00710</a> <span class="preprocessor"></span><span class="preprocessor">#define OF            0x00000800</span>
<a name="l00711"></a>00711 <span class="preprocessor"></span>
<a name="l00712"></a><a class="code" href="machine_8h.html#0f8d0abfc6d01a70b0336e0ac1b25de5">00712</a> <span class="preprocessor">#define MKCF(X)            ((!!(X)) &lt;&lt; 0)</span>
<a name="l00713"></a><a class="code" href="machine_8h.html#dc341f62e17258784a9249dfa52160cf">00713</a> <span class="preprocessor"></span><span class="preprocessor">#define MKPF(X)            ((!!(X)) &lt;&lt; 2)</span>
<a name="l00714"></a><a class="code" href="machine_8h.html#bbe2c28e2115f2ec6f4679902aa1f7ea">00714</a> <span class="preprocessor"></span><span class="preprocessor">#define MKAF(X)            ((!!(X)) &lt;&lt; 4)</span>
<a name="l00715"></a><a class="code" href="machine_8h.html#7d80ab845a46811efb90736ca713038e">00715</a> <span class="preprocessor"></span><span class="preprocessor">#define MKZF(X)            ((!!(X)) &lt;&lt; 6)</span>
<a name="l00716"></a><a class="code" href="machine_8h.html#5e693201699cbabbdb929834982baabb">00716</a> <span class="preprocessor"></span><span class="preprocessor">#define MKSF(X)            ((!!(X)) &lt;&lt; 7)</span>
<a name="l00717"></a><a class="code" href="machine_8h.html#b3b12453be283dd7d7652be71fb586d9">00717</a> <span class="preprocessor"></span><span class="preprocessor">#define MKDF(X)            ((!!(X)) &lt;&lt; 10)</span>
<a name="l00718"></a><a class="code" href="machine_8h.html#e8ced467aaa1aaa2acff33490a8f449b">00718</a> <span class="preprocessor"></span><span class="preprocessor">#define MKOF(X)            ((!!(X)) &lt;&lt; 11)</span>
<a name="l00719"></a>00719 <span class="preprocessor"></span>
<a name="l00720"></a>00720 <span class="comment">/* fsw definitions */</span>
<a name="l00721"></a><a class="code" href="machine_8h.html#c4d73397b6a181409fa4b2b104e97273">00721</a> <span class="preprocessor">#define IE            0x0001</span>
<a name="l00722"></a><a class="code" href="machine_8h.html#c5cd1df510905c1131e6e07e552d5bb3">00722</a> <span class="preprocessor"></span><span class="preprocessor">#define DE            0x0002</span>
<a name="l00723"></a><a class="code" href="machine_8h.html#25bc8ca4e2e0de788210187701b4cbeb">00723</a> <span class="preprocessor"></span><span class="preprocessor">#define ZE            0x0004</span>
<a name="l00724"></a><a class="code" href="machine_8h.html#7122a6e5d75b5f8b7f00c7130df40407">00724</a> <span class="preprocessor"></span><span class="preprocessor">#define OE            0x0008</span>
<a name="l00725"></a><a class="code" href="machine_8h.html#23a444cc88f10292ecf46694ac66f37d">00725</a> <span class="preprocessor"></span><span class="preprocessor">#define UE            0x0010</span>
<a name="l00726"></a><a class="code" href="machine_8h.html#211238ffe3627f42ca7b04bc96cc8fa6">00726</a> <span class="preprocessor"></span><span class="preprocessor">#define PE            0x0020</span>
<a name="l00727"></a><a class="code" href="machine_8h.html#488abb99c7151e7e6e2383c0da2dd2de">00727</a> <span class="preprocessor"></span><span class="preprocessor">#define FSF           0x0040</span>
<a name="l00728"></a><a class="code" href="machine_8h.html#403811204922acc8d200abb94fa62fe4">00728</a> <span class="preprocessor"></span><span class="preprocessor">#define ES            0x0080</span>
<a name="l00729"></a><a class="code" href="machine_8h.html#c539c7fe47611738d5320760d4453602">00729</a> <span class="preprocessor"></span><span class="preprocessor">#define C0            0x0100</span>
<a name="l00730"></a><a class="code" href="machine_8h.html#44779f18d87e71c78fc9fbf9dc88537d">00730</a> <span class="preprocessor"></span><span class="preprocessor">#define C1            0x0200</span>
<a name="l00731"></a><a class="code" href="machine_8h.html#d6fc13322a4f1c314332ff34aa8b3fa0">00731</a> <span class="preprocessor"></span><span class="preprocessor">#define C2            0x0400</span>
<a name="l00732"></a><a class="code" href="machine_8h.html#58aba30d6a33889c81827a54620dd5d9">00732</a> <span class="preprocessor"></span><span class="preprocessor">#define C3            0x4000</span>
<a name="l00733"></a>00733 <span class="preprocessor"></span>
<a name="l00734"></a><a class="code" href="machine_8h.html#823df788cb6ace35cb242ce1fef55b38">00734</a> <span class="preprocessor">#define MKIE(X)            ((!!(X)) &lt;&lt; 0)</span>
<a name="l00735"></a><a class="code" href="machine_8h.html#b95fb5dc856a0bbb61a69954fa939dce">00735</a> <span class="preprocessor"></span><span class="preprocessor">#define MKDE(X)            ((!!(X)) &lt;&lt; 1)</span>
<a name="l00736"></a><a class="code" href="machine_8h.html#d8a67fc681fe4013f6422712a77b72f3">00736</a> <span class="preprocessor"></span><span class="preprocessor">#define MKZE(X)            ((!!(X)) &lt;&lt; 2)</span>
<a name="l00737"></a><a class="code" href="machine_8h.html#eb4318ca63e69d1bab0cf3c358ea7659">00737</a> <span class="preprocessor"></span><span class="preprocessor">#define MKOE(X)            ((!!(X)) &lt;&lt; 3)</span>
<a name="l00738"></a><a class="code" href="machine_8h.html#6546ccf67657a1acb810dd211c507b5d">00738</a> <span class="preprocessor"></span><span class="preprocessor">#define MKUE(X)            ((!!(X)) &lt;&lt; 4)</span>
<a name="l00739"></a><a class="code" href="machine_8h.html#60824966cefb4a559fb45c5cb5f5d6e4">00739</a> <span class="preprocessor"></span><span class="preprocessor">#define MKPE(X)            ((!!(X)) &lt;&lt; 5)</span>
<a name="l00740"></a><a class="code" href="machine_8h.html#6fe5d9fa42198b4a189644232dd96398">00740</a> <span class="preprocessor"></span><span class="preprocessor">#define MKFSF(X)            ((!!(X)) &lt;&lt; 6)</span>
<a name="l00741"></a><a class="code" href="machine_8h.html#94e445515b5dd934a4c7473aaad34524">00741</a> <span class="preprocessor"></span><span class="preprocessor">#define MKES(X)            ((!!(X)) &lt;&lt; 7)</span>
<a name="l00742"></a><a class="code" href="machine_8h.html#46abd8240bd1311697d55cb819c039ec">00742</a> <span class="preprocessor"></span><span class="preprocessor">#define MKC0(X)            ((!!(X)) &lt;&lt; 8)</span>
<a name="l00743"></a><a class="code" href="machine_8h.html#c7832ec438b09e3625b03ef443cfafab">00743</a> <span class="preprocessor"></span><span class="preprocessor">#define MKC1(X)            ((!!(X)) &lt;&lt; 9)</span>
<a name="l00744"></a><a class="code" href="machine_8h.html#14d6753017d4d786250af2e86131c78e">00744</a> <span class="preprocessor"></span><span class="preprocessor">#define MKC2(X)            ((!!(X)) &lt;&lt; 10)</span>
<a name="l00745"></a><a class="code" href="machine_8h.html#4b8091e9419c87f8469f2faea00aa56e">00745</a> <span class="preprocessor"></span><span class="preprocessor">#define MKC3(X)            ((!!(X)) &lt;&lt; 14)</span>
<a name="l00746"></a>00746 <span class="preprocessor"></span>
<a name="l00747"></a><a class="code" href="machine_8h.html#389251577d9c94f1c732630cf5b81318">00747</a> <span class="preprocessor">#define FSW_TOP(X)        (((X) &gt;&gt; 11) &amp; 0x07)</span>
<a name="l00748"></a><a class="code" href="machine_8h.html#950344ff93d54d07782a34a172b7df3e">00748</a> <span class="preprocessor"></span><span class="preprocessor">#define SET_FSW_TOP(X,N)    ((X) = (((X) &amp; ~(7&lt;&lt;11)) | (((N) &amp; 7)&lt;&lt;11)))</span>
<a name="l00749"></a>00749 <span class="preprocessor"></span>
<a name="l00750"></a>00750 <span class="comment">/* cwd (x87 FPU control word) definitions */</span>
<a name="l00751"></a>00751 <span class="comment">/* exception masks */</span>
<a name="l00752"></a><a class="code" href="machine_8h.html#51c0dfe766601d31e907fceae818a7ca">00752</a> <span class="preprocessor">#define IM            0x0001</span>
<a name="l00753"></a><a class="code" href="machine_8h.html#9a9aac904e687286501946469e2903d6">00753</a> <span class="preprocessor"></span><span class="preprocessor">#define DM            0x0002</span>
<a name="l00754"></a><a class="code" href="machine_8h.html#8cba89c77d3e5469a5a585e546717ebe">00754</a> <span class="preprocessor"></span><span class="preprocessor">#define ZM            0x0004</span>
<a name="l00755"></a><a class="code" href="machine_8h.html#07287e7c6bd2917c03c3ad2e1ccb4673">00755</a> <span class="preprocessor"></span><span class="preprocessor">#define OM            0x0008</span>
<a name="l00756"></a><a class="code" href="machine_8h.html#4b9cfb88c6beb4254e2971abacbd8aab">00756</a> <span class="preprocessor"></span><span class="preprocessor">#define UM            0x0010</span>
<a name="l00757"></a><a class="code" href="machine_8h.html#23c7d58108d99a089ce0824823e6b950">00757</a> <span class="preprocessor"></span><span class="preprocessor">#define PM            0x0020</span>
<a name="l00758"></a>00758 <span class="preprocessor"></span>
<a name="l00759"></a>00759 <span class="comment">/* helper macros */</span>
<a name="l00760"></a>00760 
<a name="l00761"></a>00761 <span class="comment">/* all undefined flags are 0 */</span>
<a name="l00762"></a><a class="code" href="machine_8h.html#bde25a67f4046530ae1c572cefeb5869">00762</a> <span class="preprocessor">#define UNDEF        0</span>
<a name="l00763"></a>00763 <span class="preprocessor"></span>
<a name="l00764"></a>00764 <span class="comment">/* MUL/IMUL routines */</span>
<a name="l00765"></a><a class="code" href="machine_8h.html#6fec7301bf6d6bf952aecb94da21d89a">00765</a> <span class="preprocessor">#define MUL_B(S1,S2)        ((word_t)(S1) * (word_t)(S2))</span>
<a name="l00766"></a><a class="code" href="machine_8h.html#318743491cc7dcf91bdaf5f94cad91da">00766</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_MULB(R)                            \</span>
<a name="l00767"></a>00767 <span class="preprocessor">  ((((word_t)(R) &amp; 0xff00) != 0)                    \</span>
<a name="l00768"></a>00768 <span class="preprocessor">   ? (MKCF(1)|MKOF(1))                            \</span>
<a name="l00769"></a>00769 <span class="preprocessor">   : (MKCF(0)|MKOF(0)))</span>
<a name="l00770"></a>00770 <span class="preprocessor"></span>
<a name="l00771"></a><a class="code" href="machine_8h.html#65c4e0b2fdaf01beee284e1445703062">00771</a> <span class="preprocessor">#define MULHI_W(S1,S2)                            \</span>
<a name="l00772"></a>00772 <span class="preprocessor">  ((word_t)(((dword_t)(word_t)(S1) * (dword_t)(word_t)(S2)) &gt;&gt; 16))</span>
<a name="l00773"></a><a class="code" href="machine_8h.html#5b420e1d4f06a7053f2fc8efed65b9ab">00773</a> <span class="preprocessor"></span><span class="preprocessor">#define MULHI_D(S1,S2)                            \</span>
<a name="l00774"></a>00774 <span class="preprocessor">  ((dword_t)(((qword_t)(dword_t)(S1) * (qword_t)(dword_t)(S2)) &gt;&gt; 32))</span>
<a name="l00775"></a>00775 <span class="preprocessor"></span>
<a name="l00776"></a><a class="code" href="machine_8h.html#fc5f9be664c417a85865d71b13600755">00776</a> <span class="preprocessor">#define MULLO_W(S1,S2)                            \</span>
<a name="l00777"></a>00777 <span class="preprocessor">  ((word_t)((dword_t)(word_t)(S1) * (dword_t)(word_t)(S2)))</span>
<a name="l00778"></a><a class="code" href="machine_8h.html#c25d93be5976188fef6d6b3a899d7fa0">00778</a> <span class="preprocessor"></span><span class="preprocessor">#define MULLO_D(S1,S2)                            \</span>
<a name="l00779"></a>00779 <span class="preprocessor">  ((dword_t)((qword_t)(dword_t)(S1) * (qword_t)(dword_t)(S2)))</span>
<a name="l00780"></a>00780 <span class="preprocessor"></span>
<a name="l00781"></a><a class="code" href="machine_8h.html#21b3ef5a4e5b1f30210d394d5ff0bb88">00781</a> <span class="preprocessor">#define AFLAGS_MULW(RHI)                        \</span>
<a name="l00782"></a>00782 <span class="preprocessor">  (((RHI) != 0) ? (MKOF(1)|MKCF(1)) : (MKOF(0)|MKCF(0)))</span>
<a name="l00783"></a><a class="code" href="machine_8h.html#982001aea3d214f048dbc879a408b539">00783</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_MULD(RHI)                        \</span>
<a name="l00784"></a>00784 <span class="preprocessor">  (((RHI) != 0) ? (MKOF(1)|MKCF(1)) : (MKOF(0)|MKCF(0)))</span>
<a name="l00785"></a>00785 <span class="preprocessor"></span>
<a name="l00786"></a>00786 <span class="preprocessor">#if 1</span>
<a name="l00787"></a><a class="code" href="machine_8h.html#139034953f61e165993bcfb380683ccc">00787</a> <span class="preprocessor"></span><span class="preprocessor">#define MULHI_V(S1,S2)                            \</span>
<a name="l00788"></a>00788 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? MULHI_D(S1,S2) : MULHI_W(S1,S2))</span>
<a name="l00789"></a><a class="code" href="machine_8h.html#30f8047b9d6e2ac6ea17bf6ba38c3912">00789</a> <span class="preprocessor"></span><span class="preprocessor">#define MULLO_V(S1,S2)                            \</span>
<a name="l00790"></a>00790 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? MULLO_D(S1,S2) : MULLO_W(S1,S2))</span>
<a name="l00791"></a><a class="code" href="machine_8h.html#17d61f86127b1d76854f26c1f7884552">00791</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_MULV(RHI)                        \</span>
<a name="l00792"></a>00792 <span class="preprocessor">  (((RHI) != 0) ? (MKOF(1)|MKCF(1)) : (MKOF(0)|MKCF(0)))</span>
<a name="l00793"></a>00793 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00794"></a>00794 <span class="preprocessor"></span><span class="preprocessor">#define MULHI_V(S1,S2)                            \</span>
<a name="l00795"></a>00795 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l00796"></a>00796 <span class="preprocessor">   ? ((dword_t)(((qword_t)(dword_t)(S1) * (qword_t)(dword_t)(S2)) &gt;&gt; 32))    \</span>
<a name="l00797"></a>00797 <span class="preprocessor">   : ((word_t)(((dword_t)(word_t)(S1) * (dword_t)(word_t)(S2)) &gt;&gt; 16)))</span>
<a name="l00798"></a>00798 <span class="preprocessor"></span><span class="preprocessor">#define MULLO_V(S1,S2)                            \</span>
<a name="l00799"></a>00799 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l00800"></a>00800 <span class="preprocessor">   ? ((dword_t)((qword_t)(dword_t)(S1) * (qword_t)(dword_t)(S2)))        \</span>
<a name="l00801"></a>00801 <span class="preprocessor">   : ((word_t)((dword_t)(word_t)(S1) * (dword_t)(word_t)(S2))))</span>
<a name="l00802"></a>00802 <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_MULV(RHI)                        \</span>
<a name="l00803"></a>00803 <span class="preprocessor">  (((RHI) != 0) ? (MKOF(1)|MKCF(1)) : (MKOF(0)|MKCF(0)))</span>
<a name="l00804"></a>00804 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00805"></a>00805 <span class="preprocessor"></span>
<a name="l00806"></a><a class="code" href="machine_8h.html#cafafb68534b37851dfa11e6515ffd0f">00806</a> <span class="preprocessor">#define IMUL_B(S1,S2)                            \</span>
<a name="l00807"></a>00807 <span class="preprocessor">  ((sword_t)(sbyte_t)(S1) * (sword_t)(sbyte_t)(S2))</span>
<a name="l00808"></a><a class="code" href="machine_8h.html#351c88a1f3cc617422207654bb739572">00808</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_IMULB(R,S1,S2)                        \</span>
<a name="l00809"></a>00809 <span class="preprocessor">  ((((sword_t)(sbyte_t)(S1)*(sword_t)(sbyte_t)(S2))==(sbyte_t)(R))    \</span>
<a name="l00810"></a>00810 <span class="preprocessor">   ? (MKOF(0)|MKCF(0))                            \</span>
<a name="l00811"></a>00811 <span class="preprocessor">   : (MKOF(1)|MKCF(1)))</span>
<a name="l00812"></a>00812 <span class="preprocessor"></span>
<a name="l00813"></a><a class="code" href="machine_8h.html#a920fdd017c530844661ca214ff48dd9">00813</a> <span class="preprocessor">#define IMUL_W(S1,S2)        ((sword_t)(S1) * (sword_t)(S2))</span>
<a name="l00814"></a><a class="code" href="machine_8h.html#0c66111ef2b043f4fe01d81da678c6b4">00814</a> <span class="preprocessor"></span><span class="preprocessor">#define IMUL_D(S1,S2)        ((sdword_t)(S1) * (sdword_t)(S2))</span>
<a name="l00815"></a>00815 <span class="preprocessor"></span>
<a name="l00816"></a><a class="code" href="machine_8h.html#b79f9b934aaa9a2d8a807a861975eb11">00816</a> <span class="preprocessor">#define AFLAGS_IMULW(R,S1,S2)                        \</span>
<a name="l00817"></a>00817 <span class="preprocessor">  ((((sdword_t)(sword_t)(S1)*(sdword_t)(sword_t)(S2))==(sword_t)(R))    \</span>
<a name="l00818"></a>00818 <span class="preprocessor">   ? (MKOF(0)|MKCF(0))                            \</span>
<a name="l00819"></a>00819 <span class="preprocessor">   : (MKOF(1)|MKCF(1)))</span>
<a name="l00820"></a><a class="code" href="machine_8h.html#ca5bdfb239eeca2b1575ac2f0fa084df">00820</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_IMULD(R,S1,S2)                        \</span>
<a name="l00821"></a>00821 <span class="preprocessor">  ((((sqword_t)(sdword_t)(S1)*(sqword_t)(sdword_t)(S2))==(sdword_t)(R))    \</span>
<a name="l00822"></a>00822 <span class="preprocessor">   ? (MKOF(0)|MKCF(0))                            \</span>
<a name="l00823"></a>00823 <span class="preprocessor">   : (MKOF(1)|MKCF(1)))</span>
<a name="l00824"></a>00824 <span class="preprocessor"></span>
<a name="l00825"></a>00825 <span class="preprocessor">#if 1</span>
<a name="l00826"></a><a class="code" href="machine_8h.html#2ff4235e7ab1b8c32112965e6a3f339c">00826</a> <span class="preprocessor"></span><span class="preprocessor">#define IMUL_V(S1,S2)                            \</span>
<a name="l00827"></a>00827 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? IMUL_D(S1,S2) : IMUL_W(S1,S2))</span>
<a name="l00828"></a><a class="code" href="machine_8h.html#839be9a247062810bf63c1f25c095e13">00828</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_IMULV(R,S1,S2)                        \</span>
<a name="l00829"></a>00829 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_IMULD(R,S1,S2) : AFLAGS_IMULW(R,S1,S2))</span>
<a name="l00830"></a>00830 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00831"></a>00831 <span class="preprocessor"></span><span class="preprocessor">#define IMUL_V(S1,S2)                            \</span>
<a name="l00832"></a>00832 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l00833"></a>00833 <span class="preprocessor">   ? ((sdword_t)(S1) * (sdword_t)(S2))                    \</span>
<a name="l00834"></a>00834 <span class="preprocessor">   : ((sword_t)(S1) * (sword_t)(S2)))</span>
<a name="l00835"></a>00835 <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_IMULV(R,S1,S2)                        \</span>
<a name="l00836"></a>00836 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l00837"></a>00837 <span class="preprocessor">   ? ((((sqword_t)(sdword_t)(S1)*(sqword_t)(sdword_t)(S2))==(sdword_t)(R))    \</span>
<a name="l00838"></a>00838 <span class="preprocessor">     ? (MKOF(0)|MKCF(0))                        \</span>
<a name="l00839"></a>00839 <span class="preprocessor">     : (MKOF(1)|MKCF(1)))                        \</span>
<a name="l00840"></a>00840 <span class="preprocessor">   : ((((sdword_t)(sword_t)(S1)*(sdword_t)(sword_t)(S2))==(sword_t)(R))    \</span>
<a name="l00841"></a>00841 <span class="preprocessor">     ? (MKOF(0)|MKCF(0))                        \</span>
<a name="l00842"></a>00842 <span class="preprocessor">     : (MKOF(1)|MKCF(1))))</span>
<a name="l00843"></a>00843 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00844"></a>00844 <span class="preprocessor"></span>
<a name="l00845"></a><a class="code" href="machine_8h.html#195165743d52a06b62fe72fba7bef515">00845</a> <span class="preprocessor">#define IMULHI_W(S1,S2)                            \</span>
<a name="l00846"></a>00846 <span class="preprocessor">  ((word_t)(((sdword_t)(sword_t)(S1) * (sdword_t)(sword_t)(S2)) &gt;&gt; 16))</span>
<a name="l00847"></a><a class="code" href="machine_8h.html#43351b8af6ca5043f090d296ef7f6be4">00847</a> <span class="preprocessor"></span><span class="preprocessor">#define IMULHI_D(S1,S2)                            \</span>
<a name="l00848"></a>00848 <span class="preprocessor">  ((dword_t)(((sqword_t)(sdword_t)(S1) * (sqword_t)(sdword_t)(S2)) &gt;&gt; 32))</span>
<a name="l00849"></a>00849 <span class="preprocessor"></span>
<a name="l00850"></a><a class="code" href="machine_8h.html#b7458d4e4e6eb7eef28b83d452cb7990">00850</a> <span class="preprocessor">#define IMULLO_W(S1,S2)                            \</span>
<a name="l00851"></a>00851 <span class="preprocessor">  ((word_t)((sdword_t)(sword_t)(S1) * (sdword_t)(sword_t)(S2)))</span>
<a name="l00852"></a><a class="code" href="machine_8h.html#acf86e136405c5dc806c1d98eeef9944">00852</a> <span class="preprocessor"></span><span class="preprocessor">#define IMULLO_D(S1,S2)                            \</span>
<a name="l00853"></a>00853 <span class="preprocessor">  ((dword_t)((sqword_t)(sdword_t)(S1) * (sqword_t)(sdword_t)(S2)))</span>
<a name="l00854"></a>00854 <span class="preprocessor"></span>
<a name="l00855"></a>00855 <span class="preprocessor">#if 1</span>
<a name="l00856"></a><a class="code" href="machine_8h.html#02131364ab6e60b0ae3a73b506dda4de">00856</a> <span class="preprocessor"></span><span class="preprocessor">#define IMULHI_V(S1,S2)                            \</span>
<a name="l00857"></a>00857 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? IMULHI_D(S1,S2) : IMULHI_W(S1,S2))</span>
<a name="l00858"></a><a class="code" href="machine_8h.html#111e566df8acda5d7c1ca8f65e4969fb">00858</a> <span class="preprocessor"></span><span class="preprocessor">#define IMULLO_V(S1,S2)                            \</span>
<a name="l00859"></a>00859 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? IMULLO_D(S1,S2) : IMULLO_W(S1,S2))</span>
<a name="l00860"></a>00860 <span class="preprocessor"></span>
<a name="l00861"></a><a class="code" href="machine_8h.html#f0ac199708f731dea60e5d273c3ca826">00861</a> <span class="preprocessor">#define AFLAGS_IMULHIV(RHI,RLO)                        \</span>
<a name="l00862"></a>00862 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l00863"></a>00863 <span class="preprocessor">   ? AFLAGS_IMULHID(RHI,RLO)                        \</span>
<a name="l00864"></a>00864 <span class="preprocessor">   : AFLAGS_IMULHIW(RHI,RLO))</span>
<a name="l00865"></a>00865 <span class="preprocessor"></span>
<a name="l00866"></a><a class="code" href="machine_8h.html#2f3c9315642d19ec89eb89c872bd6091">00866</a> <span class="preprocessor">#define AFLAGS_IMULHIW(RHI,RLO)                        \</span>
<a name="l00867"></a>00867 <span class="preprocessor">  (((((RHI) == 0xffff) &amp;&amp; ((RLO) &amp; 0x8000))                \</span>
<a name="l00868"></a>00868 <span class="preprocessor">    || (((RHI) == 0) &amp;&amp; !((RLO) &amp; 0x8000)))                \</span>
<a name="l00869"></a>00869 <span class="preprocessor">   ? (MKOF(0)|MKCF(0))                            \</span>
<a name="l00870"></a>00870 <span class="preprocessor">   : (MKOF(1)|MKCF(1)))</span>
<a name="l00871"></a><a class="code" href="machine_8h.html#74f9188eaf78c40ce9f2e3f749104f00">00871</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_IMULHID(RHI,RLO)                        \</span>
<a name="l00872"></a>00872 <span class="preprocessor">  (((((RHI) == 0xffffffff) &amp;&amp; ((RLO) &amp; 0x80000000))            \</span>
<a name="l00873"></a>00873 <span class="preprocessor">    || (((RHI) == 0) &amp;&amp; !((RLO) &amp; 0x80000000)))                \</span>
<a name="l00874"></a>00874 <span class="preprocessor">   ? (MKOF(0)|MKCF(0))                            \</span>
<a name="l00875"></a>00875 <span class="preprocessor">   : (MKOF(1)|MKCF(1)))</span>
<a name="l00876"></a>00876 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00877"></a>00877 <span class="preprocessor"></span><span class="preprocessor">#define IMULHI_V(S1,S2)                            \</span>
<a name="l00878"></a>00878 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l00879"></a>00879 <span class="preprocessor">   ? ((dword_t)(((sqword_t)(sdword_t)(S1) * (sqword_t)(sdword_t)(S2)) &gt;&gt; 32))\</span>
<a name="l00880"></a>00880 <span class="preprocessor">   : ((word_t)(((sdword_t)(sword_t)(S1) * (sdword_t)(sword_t)(S2)) &gt;&gt; 16)))</span>
<a name="l00881"></a>00881 <span class="preprocessor"></span><span class="preprocessor">#define IMULLO_V(S1,S2)                            \</span>
<a name="l00882"></a>00882 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l00883"></a>00883 <span class="preprocessor">   ? ((dword_t)((sqword_t)(sdword_t)(S1) * (sqword_t)(sdword_t)(S2)))    \</span>
<a name="l00884"></a>00884 <span class="preprocessor">   : ((word_t)((sdword_t)(sword_t)(S1) * (sdword_t)(sword_t)(S2))))</span>
<a name="l00885"></a>00885 <span class="preprocessor"></span><span class="comment">/* BUG? */</span>
<a name="l00886"></a>00886 <span class="preprocessor">#define AFLAGS_IMULHIV(RHI,RLO)                        \</span>
<a name="l00887"></a>00887 <span class="preprocessor">  (((((RHI) == 0xffffffff) &amp;&amp; ((RLO) &amp; 0x80000000))            \</span>
<a name="l00888"></a>00888 <span class="preprocessor">    || (((RHI) == 0) &amp;&amp; !((RLO) &amp; 0x80000000)))                \</span>
<a name="l00889"></a>00889 <span class="preprocessor">   ? (MKOF(0)|MKCF(0))                            \</span>
<a name="l00890"></a>00890 <span class="preprocessor">   : (MKOF(1)|MKCF(1)))</span>
<a name="l00891"></a>00891 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00892"></a>00892 <span class="preprocessor"></span>
<a name="l00893"></a>00893 <span class="comment">/* DIV/IDIV routines */</span>
<a name="l00894"></a><a class="code" href="machine_8h.html#deedeebb64d17221e38a86f10995dc33">00894</a> <span class="preprocessor">#define QUO_B(S1,S2)        ((byte_t)((word_t)(S1) / (byte_t)(S2)))</span>
<a name="l00895"></a><a class="code" href="machine_8h.html#cb5d978f2b8380e95993357ac2533576">00895</a> <span class="preprocessor"></span><span class="preprocessor">#define REM_B(S1,S2)        ((byte_t)((word_t)(S1) % (byte_t)(S2)))</span>
<a name="l00896"></a><a class="code" href="machine_8h.html#12894f9a81822ea333f55d489fc05f47">00896</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_DIVB()        (UNDEF)</span>
<a name="l00897"></a>00897 <span class="preprocessor"></span>
<a name="l00898"></a><a class="code" href="machine_8h.html#cc0e89cbccfcd88e99b3370c7394a5a6">00898</a> <span class="preprocessor">#define QUO_W(S1H,S1L,S2)                        \</span>
<a name="l00899"></a>00899 <span class="preprocessor">  ((word_t)(((dword_t)(((dword_t)((S1H) &amp; 0xffff))&lt;&lt;16)            \</span>
<a name="l00900"></a>00900 <span class="preprocessor">      | ((dword_t)((S1L) &amp; 0xffff))) / ((dword_t)((S2) &amp; 0xffff))))</span>
<a name="l00901"></a><a class="code" href="machine_8h.html#e0be02f30531ec9cfdd357622dcb1ad7">00901</a> <span class="preprocessor"></span><span class="preprocessor">#define QUO_D(S1H,S1L,S2)                        \</span>
<a name="l00902"></a>00902 <span class="preprocessor">  ((dword_t)(((qword_t)(((qword_t)(S1H))&lt;&lt;32)                \</span>
<a name="l00903"></a>00903 <span class="preprocessor">      | ((qword_t)(S1L))) / ((qword_t)(S2))))</span>
<a name="l00904"></a>00904 <span class="preprocessor"></span>
<a name="l00905"></a><a class="code" href="machine_8h.html#00229f7b1f8434fe39c7b4336ba0f135">00905</a> <span class="preprocessor">#define REM_W(S1H,S1L,S2)                        \</span>
<a name="l00906"></a>00906 <span class="preprocessor">  ((word_t)(((dword_t)(((dword_t)((S1H) &amp; 0xffff))&lt;&lt;16)            \</span>
<a name="l00907"></a>00907 <span class="preprocessor">      | ((dword_t)((S1L) &amp; 0xffff))) % ((dword_t)((S2) &amp; 0xffff))))</span>
<a name="l00908"></a><a class="code" href="machine_8h.html#11f39d7e260c473e3527031077cd7180">00908</a> <span class="preprocessor"></span><span class="preprocessor">#define REM_D(S1H,S1L,S2)                        \</span>
<a name="l00909"></a>00909 <span class="preprocessor">  ((dword_t)(((qword_t)(((qword_t)(S1H))&lt;&lt;32)                \</span>
<a name="l00910"></a>00910 <span class="preprocessor">      | ((qword_t)(S1L))) % ((qword_t)(S2))))</span>
<a name="l00911"></a>00911 <span class="preprocessor"></span>
<a name="l00912"></a><a class="code" href="machine_8h.html#93ddd02e72d30264fade6df215dddd23">00912</a> <span class="preprocessor">#define AFLAGS_DIVW()        (UNDEF)</span>
<a name="l00913"></a><a class="code" href="machine_8h.html#294d7e14bef86c29bffb9a5841ed01f8">00913</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_DIVD()        (UNDEF)</span>
<a name="l00914"></a>00914 <span class="preprocessor"></span>
<a name="l00915"></a>00915 <span class="preprocessor">#if 1</span>
<a name="l00916"></a><a class="code" href="machine_8h.html#8fda5c7158b05ddd9a6a9463200b728f">00916</a> <span class="preprocessor"></span><span class="preprocessor">#define QUO_V(S1H,S1L,S2)                        \</span>
<a name="l00917"></a>00917 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? QUO_D(S1H,S1L,S2) : QUO_W(S1H,S1L,S2))</span>
<a name="l00918"></a><a class="code" href="machine_8h.html#27daceb73b6743f16ac435aeeb9c94d3">00918</a> <span class="preprocessor"></span><span class="preprocessor">#define REM_V(S1H,S1L,S2)                        \</span>
<a name="l00919"></a>00919 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? REM_D(S1H,S1L,S2) : REM_W(S1H,S1L,S2))</span>
<a name="l00920"></a><a class="code" href="machine_8h.html#fc263d48ab47fc9edd3e4dde47ae217e">00920</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_DIVV()        (UNDEF)</span>
<a name="l00921"></a>00921 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00922"></a>00922 <span class="preprocessor"></span><span class="preprocessor">#define QUO_V(S1H,S1L,S2)                        \</span>
<a name="l00923"></a>00923 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l00924"></a>00924 <span class="preprocessor">   ? ((dword_t)(((qword_t)(((qword_t)(S1H))&lt;&lt;32)                \</span>
<a name="l00925"></a>00925 <span class="preprocessor">         | ((qword_t)(S1L))) / ((qword_t)(S2))))            \</span>
<a name="l00926"></a>00926 <span class="preprocessor">   : ((word_t)(((dword_t)(((dword_t)((S1H) &amp; 0xffff))&lt;&lt;16)        \</span>
<a name="l00927"></a>00927 <span class="preprocessor">         | ((dword_t)((S1L) &amp; 0xffff))) / ((dword_t)((S2) &amp; 0xffff)))))</span>
<a name="l00928"></a>00928 <span class="preprocessor"></span><span class="preprocessor">#define REM_V(S1H,S1L,S2)                        \</span>
<a name="l00929"></a>00929 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l00930"></a>00930 <span class="preprocessor">   ? ((dword_t)(((qword_t)(((qword_t)(S1H))&lt;&lt;32)                \</span>
<a name="l00931"></a>00931 <span class="preprocessor">         | ((qword_t)(S1L))) % ((qword_t)(S2))))            \</span>
<a name="l00932"></a>00932 <span class="preprocessor">   : ((word_t)(((dword_t)(((dword_t)((S1H) &amp; 0xffff))&lt;&lt;16)        \</span>
<a name="l00933"></a>00933 <span class="preprocessor">         | ((dword_t)((S1L) &amp; 0xffff))) % ((dword_t)((S2) &amp; 0xffff)))))</span>
<a name="l00934"></a>00934 <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_DIVV()        (UNDEF)</span>
<a name="l00935"></a>00935 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00936"></a>00936 <span class="preprocessor"></span>
<a name="l00937"></a><a class="code" href="machine_8h.html#3c7db48508068e2ccb37e009044c2262">00937</a> <span class="preprocessor">#define IQUO_B(S1,S2)        ((sbyte_t)((sword_t)(S1) / (sbyte_t)(S2)))</span>
<a name="l00938"></a><a class="code" href="machine_8h.html#5d4d25a317f93bc6cef83742530a51eb">00938</a> <span class="preprocessor"></span><span class="preprocessor">#define IREM_B(S1,S2)        ((sbyte_t)((sword_t)(S1) % (sbyte_t)(S2)))</span>
<a name="l00939"></a><a class="code" href="machine_8h.html#442cb02c5746ae92807b4b2d036d9c79">00939</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_IDIVB()        (UNDEF)</span>
<a name="l00940"></a>00940 <span class="preprocessor"></span>
<a name="l00941"></a><a class="code" href="machine_8h.html#c731cae3cf127daa849f830f4f3ad979">00941</a> <span class="preprocessor">#define IQUO_W(S1H,S1L,S2)                        \</span>
<a name="l00942"></a>00942 <span class="preprocessor">  ((word_t)(((sdword_t)((((sdword_t)((S1H) &amp; 0xffff))&lt;&lt;16)            \</span>
<a name="l00943"></a>00943 <span class="preprocessor">        | ((sdword_t)((S1L) &amp; 0xffff)))) / ((sdword_t)((S2) &amp; 0xffff))))</span>
<a name="l00944"></a><a class="code" href="machine_8h.html#e023a70dceef3c0fc834a50854f2325c">00944</a> <span class="preprocessor"></span><span class="preprocessor">#define IQUO_D(S1H,S1L,S2)                        \</span>
<a name="l00945"></a>00945 <span class="preprocessor">  ((dword_t)(((sqword_t)((((sqword_t)(S1H))&lt;&lt;32)                \</span>
<a name="l00946"></a>00946 <span class="preprocessor">        | ((sqword_t)(S1L)))) / ((sqword_t)(S2))))</span>
<a name="l00947"></a>00947 <span class="preprocessor"></span>
<a name="l00948"></a><a class="code" href="machine_8h.html#ae04a20592dd22f03f2e6e0b8db02998">00948</a> <span class="preprocessor">#define IREM_W(S1H,S1L,S2)                        \</span>
<a name="l00949"></a>00949 <span class="preprocessor">  ((word_t)(((sdword_t)((((sdword_t)((S1H) &amp; 0xffff))&lt;&lt;16)            \</span>
<a name="l00950"></a>00950 <span class="preprocessor">        | ((sdword_t)((S1L) &amp; 0xffff)))) % ((sdword_t)((S2) &amp; 0xffff))))</span>
<a name="l00951"></a><a class="code" href="machine_8h.html#447790165a8c7f9059f2df74d7157858">00951</a> <span class="preprocessor"></span><span class="preprocessor">#define IREM_D(S1H,S1L,S2)                        \</span>
<a name="l00952"></a>00952 <span class="preprocessor">  ((dword_t)(((sqword_t)((((sqword_t)(S1H))&lt;&lt;32)                \</span>
<a name="l00953"></a>00953 <span class="preprocessor">        | ((sqword_t)(S1L)))) % ((sqword_t)(S2))))</span>
<a name="l00954"></a>00954 <span class="preprocessor"></span>
<a name="l00955"></a><a class="code" href="machine_8h.html#f19bd898849da5dad26d2ee39eedaae5">00955</a> <span class="preprocessor">#define AFLAGS_IDIVW()        (UNDEF)</span>
<a name="l00956"></a><a class="code" href="machine_8h.html#2de979920a09736a23bdf373a56cfe77">00956</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_IDIVD()        (UNDEF)</span>
<a name="l00957"></a>00957 <span class="preprocessor"></span>
<a name="l00958"></a>00958 <span class="preprocessor">#if 1</span>
<a name="l00959"></a><a class="code" href="machine_8h.html#0b951a2ffd2337b5071b9088d2ecc242">00959</a> <span class="preprocessor"></span><span class="preprocessor">#define IQUO_V(S1H,S1L,S2)                        \</span>
<a name="l00960"></a>00960 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? IQUO_D(S1H,S1L,S2) : IQUO_W(S1H,S1L,S2))</span>
<a name="l00961"></a><a class="code" href="machine_8h.html#90bf7af2c700a1d1716c5879d3f824a7">00961</a> <span class="preprocessor"></span><span class="preprocessor">#define IREM_V(S1H,S1L,S2)                        \</span>
<a name="l00962"></a>00962 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? IREM_D(S1H,S1L,S2) : IREM_W(S1H,S1L,S2))</span>
<a name="l00963"></a><a class="code" href="machine_8h.html#46a415c6677ff426e343baa300863f1d">00963</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_IDIVV()        (UNDEF)</span>
<a name="l00964"></a>00964 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00965"></a>00965 <span class="preprocessor"></span><span class="preprocessor">#define IQUO_V(S1H,S1L,S2)                        \</span>
<a name="l00966"></a>00966 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l00967"></a>00967 <span class="preprocessor">   ? ((dword_t)(((sqword_t)((((qword_t)(S1H))&lt;&lt;32)            \</span>
<a name="l00968"></a>00968 <span class="preprocessor">           | ((qword_t)(S1L)))) / ((sqword_t)(qword_t)(S2))))    \</span>
<a name="l00969"></a>00969 <span class="preprocessor">   : ((word_t)(((sdword_t)((((dword_t)((S1H) &amp; 0xffff))&lt;&lt;16)        \</span>
<a name="l00970"></a>00970 <span class="preprocessor">           | ((dword_t)((S1L) &amp; 0xffff)))) / ((sdword_t)(dword_t)((S2) &amp; 0xffff)))))</span>
<a name="l00971"></a>00971 <span class="preprocessor"></span><span class="preprocessor">#define IREM_V(S1H,S1L,S2)                        \</span>
<a name="l00972"></a>00972 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l00973"></a>00973 <span class="preprocessor">   ? ((dword_t)(((sqword_t)((((qword_t)(S1H))&lt;&lt;32)            \</span>
<a name="l00974"></a>00974 <span class="preprocessor">           | ((qword_t)(S1L)))) % ((sqword_t)(qword_t)(S2))))    \</span>
<a name="l00975"></a>00975 <span class="preprocessor">   : ((word_t)(((sdword_t)((((dword_t)((S1H) &amp; 0xffff))&lt;&lt;16)        \</span>
<a name="l00976"></a>00976 <span class="preprocessor">           | ((dword_t)((S1L) &amp; 0xffff)))) % ((sdword_t)(dword_t)((S2) &amp; 0xffff)))))</span>
<a name="l00977"></a>00977 <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_IDIVV()        (UNDEF)</span>
<a name="l00978"></a>00978 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00979"></a>00979 <span class="preprocessor"></span><span class="comment">/* compute ADD flags */</span>
<a name="l00980"></a><a class="code" href="machine_8h.html#64f4d493aa9ce0a1029251e8367c2305">00980</a> <span class="preprocessor">#define AFLAGS_ADDB(R,S1,S2)                        \</span>
<a name="l00981"></a>00981 <span class="preprocessor">  (MKOF((((S1) &amp; 0x80) == ((S2) &amp; 0x80))                \</span>
<a name="l00982"></a>00982 <span class="preprocessor">        &amp;&amp; (((R) &amp; 0x80) != ((S2) &amp; 0x80)))                \</span>
<a name="l00983"></a>00983 <span class="preprocessor">   | MKSF((byte_t)(R) &gt;= 0x80)                        \</span>
<a name="l00984"></a>00984 <span class="preprocessor">   | MKZF((byte_t)(R) == 0)                        \</span>
<a name="l00985"></a>00985 <span class="preprocessor">   | MKAF((byte_t)((R) &amp; 0x0f) &lt; (byte_t)((S1) &amp; 0x0f))            \</span>
<a name="l00986"></a>00986 <span class="preprocessor">   | MKCF((byte_t)(R) &lt; (byte_t)(S1))                    \</span>
<a name="l00987"></a>00987 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l00988"></a><a class="code" href="machine_8h.html#bcf22923fcdac6eefc545f5089e4c581">00988</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_ADDW(R,S1,S2)                        \</span>
<a name="l00989"></a>00989 <span class="preprocessor">  (MKOF((((S1) &amp; 0x8000) == ((S2) &amp; 0x8000))                \</span>
<a name="l00990"></a>00990 <span class="preprocessor">        &amp;&amp; (((R) &amp; 0x8000) != ((S2) &amp; 0x8000)))                \</span>
<a name="l00991"></a>00991 <span class="preprocessor">   | MKSF((word_t)(R) &gt;= 0x8000)                    \</span>
<a name="l00992"></a>00992 <span class="preprocessor">   | MKZF((word_t)(R) == 0)                        \</span>
<a name="l00993"></a>00993 <span class="preprocessor">   | MKAF((word_t)((R) &amp; 0x0f) &lt; (word_t)((S1) &amp; 0x0f))            \</span>
<a name="l00994"></a>00994 <span class="preprocessor">   | MKCF((word_t)(R) &lt; (word_t)(S1))                    \</span>
<a name="l00995"></a>00995 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l00996"></a><a class="code" href="machine_8h.html#d6b2dd01bc6eea0387131980d622dbfa">00996</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_ADDD(R,S1,S2)                        \</span>
<a name="l00997"></a>00997 <span class="preprocessor">  (MKOF((((S1) &amp; 0x80000000) == ((S2) &amp; 0x80000000))            \</span>
<a name="l00998"></a>00998 <span class="preprocessor">        &amp;&amp; (((R) &amp; 0x80000000) != ((S2) &amp; 0x80000000)))            \</span>
<a name="l00999"></a>00999 <span class="preprocessor">   | MKSF((dword_t)(R) &gt;= 0x80000000)                    \</span>
<a name="l01000"></a>01000 <span class="preprocessor">   | MKZF((dword_t)(R) == 0)                        \</span>
<a name="l01001"></a>01001 <span class="preprocessor">   | MKAF((dword_t)((R) &amp; 0x0f) &lt; (dword_t)((S1) &amp; 0x0f))            \</span>
<a name="l01002"></a>01002 <span class="preprocessor">   | MKCF((dword_t)(R) &lt; (dword_t)(S1))                    \</span>
<a name="l01003"></a>01003 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01004"></a><a class="code" href="machine_8h.html#5004b4884fe65afb491ae541f64e34de">01004</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_ADDV(R,S1,S2)                        \</span>
<a name="l01005"></a>01005 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_ADDD(R, S1, S2) : AFLAGS_ADDW(R, S1, S2))</span>
<a name="l01006"></a>01006 <span class="preprocessor"></span>
<a name="l01007"></a>01007 <span class="comment">/* compute SUB flags */</span>
<a name="l01008"></a><a class="code" href="machine_8h.html#63e3ea23d71beb52beafe84eaba4b2cc">01008</a> <span class="preprocessor">#define AFLAGS_SUBB(R,S1,S2)                        \</span>
<a name="l01009"></a>01009 <span class="preprocessor">  (MKOF((((S1) &amp; 0x80) != ((S2) &amp; 0x80))                \</span>
<a name="l01010"></a>01010 <span class="preprocessor">        &amp;&amp; (((R) &amp; 0x80) != ((S1) &amp; 0x80)))                \</span>
<a name="l01011"></a>01011 <span class="preprocessor">   | MKSF((byte_t)(R) &gt;= 0x80)                        \</span>
<a name="l01012"></a>01012 <span class="preprocessor">   | MKZF((byte_t)(R) == 0)                        \</span>
<a name="l01013"></a>01013 <span class="preprocessor">   | MKAF((byte_t)((S1) &amp; 0x0f) &lt; (byte_t)((S2) &amp; 0x0f))        \</span>
<a name="l01014"></a>01014 <span class="preprocessor">   | MKCF((byte_t)(S1) &lt; (byte_t)(S2))                    \</span>
<a name="l01015"></a>01015 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01016"></a><a class="code" href="machine_8h.html#1e607cc5e8ff7ac0340b40131cad1e29">01016</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SUBW(R,S1,S2)                        \</span>
<a name="l01017"></a>01017 <span class="preprocessor">  (MKOF((((S1) &amp; 0x8000) != ((S2) &amp; 0x8000))                \</span>
<a name="l01018"></a>01018 <span class="preprocessor">        &amp;&amp; (((R) &amp; 0x8000) != ((S1) &amp; 0x8000)))                \</span>
<a name="l01019"></a>01019 <span class="preprocessor">   | MKSF((word_t)(R) &gt;= 0x8000)                    \</span>
<a name="l01020"></a>01020 <span class="preprocessor">   | MKZF((word_t)(R) == 0)                        \</span>
<a name="l01021"></a>01021 <span class="preprocessor">   | MKAF((word_t)((S1) &amp; 0x0f) &lt; (word_t)((S2) &amp; 0x0f))        \</span>
<a name="l01022"></a>01022 <span class="preprocessor">   | MKCF((word_t)(S1) &lt; (word_t)(S2))                    \</span>
<a name="l01023"></a>01023 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01024"></a><a class="code" href="machine_8h.html#f9286ba3a464a44b8bb248bc8d42d49d">01024</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SUBD(R,S1,S2)                        \</span>
<a name="l01025"></a>01025 <span class="preprocessor">  (MKOF((((S1) &amp; 0x80000000) != ((S2) &amp; 0x80000000))            \</span>
<a name="l01026"></a>01026 <span class="preprocessor">        &amp;&amp; (((R) &amp; 0x80000000) != ((S1) &amp; 0x80000000)))            \</span>
<a name="l01027"></a>01027 <span class="preprocessor">   | MKSF((dword_t)(R) &gt;= 0x80000000)                    \</span>
<a name="l01028"></a>01028 <span class="preprocessor">   | MKZF((dword_t)(R) == 0)                        \</span>
<a name="l01029"></a>01029 <span class="preprocessor">   | MKAF((dword_t)((S1) &amp; 0x0f) &lt; (dword_t)((S2) &amp; 0x0f))        \</span>
<a name="l01030"></a>01030 <span class="preprocessor">   | MKCF((dword_t)(S1) &lt; (dword_t)(S2))                    \</span>
<a name="l01031"></a>01031 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01032"></a><a class="code" href="machine_8h.html#3e147e074d9d0744352d93cb4d3228f1">01032</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SUBV(R,S1,S2)                        \</span>
<a name="l01033"></a>01033 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_SUBD(R, S1, S2) : AFLAGS_SUBW(R, S1, S2))</span>
<a name="l01034"></a>01034 <span class="preprocessor"></span>
<a name="l01035"></a>01035 <span class="comment">/* compute ALU operation flags */</span>
<a name="l01036"></a><a class="code" href="machine_8h.html#80d647038af025a357511c1bb949a66c">01036</a> <span class="preprocessor">#define AFLAGS_ALUB(R)                            \</span>
<a name="l01037"></a>01037 <span class="preprocessor">  (MKOF(0)                                \</span>
<a name="l01038"></a>01038 <span class="preprocessor">   | MKSF((byte_t)(R) &gt;= 0x80)                        \</span>
<a name="l01039"></a>01039 <span class="preprocessor">   | MKZF((byte_t)(R) == 0)                        \</span>
<a name="l01040"></a>01040 <span class="preprocessor">   | MKAF(UNDEF)                            \</span>
<a name="l01041"></a>01041 <span class="preprocessor">   | MKCF(0)                                \</span>
<a name="l01042"></a>01042 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01043"></a><a class="code" href="machine_8h.html#5a8be171bec08804e5c5bcce9ec2f820">01043</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_ALUW(R)                            \</span>
<a name="l01044"></a>01044 <span class="preprocessor">  (MKOF(0)                                \</span>
<a name="l01045"></a>01045 <span class="preprocessor">   | MKSF((word_t)(R) &gt;= 0x8000)                    \</span>
<a name="l01046"></a>01046 <span class="preprocessor">   | MKZF((word_t)(R) == 0)                        \</span>
<a name="l01047"></a>01047 <span class="preprocessor">   | MKAF(UNDEF)                            \</span>
<a name="l01048"></a>01048 <span class="preprocessor">   | MKCF(0)                                \</span>
<a name="l01049"></a>01049 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01050"></a><a class="code" href="machine_8h.html#2fd82d980bfd65b413bf1984b7069586">01050</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_ALUD(R)                            \</span>
<a name="l01051"></a>01051 <span class="preprocessor">  (MKOF(0)                                \</span>
<a name="l01052"></a>01052 <span class="preprocessor">   | MKSF((dword_t)(R) &gt;= 0x80000000)                    \</span>
<a name="l01053"></a>01053 <span class="preprocessor">   | MKZF((dword_t)(R) == 0)                        \</span>
<a name="l01054"></a>01054 <span class="preprocessor">   | MKAF(UNDEF)                            \</span>
<a name="l01055"></a>01055 <span class="preprocessor">   | MKCF(0)                                \</span>
<a name="l01056"></a>01056 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01057"></a><a class="code" href="machine_8h.html#22e35e77b806a683090dc936c43bdbea">01057</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_ALUV(R)                            \</span>
<a name="l01058"></a>01058 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_ALUD(R) : AFLAGS_ALUW(R))</span>
<a name="l01059"></a>01059 <span class="preprocessor"></span>
<a name="l01060"></a>01060 <span class="comment">/* compute INC flags */</span>
<a name="l01061"></a><a class="code" href="machine_8h.html#38fe5bde43c7d80bc6166e5812b05466">01061</a> <span class="preprocessor">#define AFLAGS_INCB(R)                            \</span>
<a name="l01062"></a>01062 <span class="preprocessor">  (MKOF((byte_t)(R) == 0x80)                        \</span>
<a name="l01063"></a>01063 <span class="preprocessor">   | MKSF((byte_t)(R) &gt;= 0x80)                        \</span>
<a name="l01064"></a>01064 <span class="preprocessor">   | MKZF((byte_t)(R) == 0)                        \</span>
<a name="l01065"></a>01065 <span class="preprocessor">   | MKAF(((R) &amp; 0x0f) == 0)                        \</span>
<a name="l01066"></a>01066 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01067"></a><a class="code" href="machine_8h.html#c84da5d0d4127747b32bfd0ed17d874b">01067</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_INCW(R)                            \</span>
<a name="l01068"></a>01068 <span class="preprocessor">  (MKOF((word_t)(R) == 0x8000)                        \</span>
<a name="l01069"></a>01069 <span class="preprocessor">   | MKSF((word_t)(R) &gt;= 0x8000)                    \</span>
<a name="l01070"></a>01070 <span class="preprocessor">   | MKZF((word_t)(R) == 0)                        \</span>
<a name="l01071"></a>01071 <span class="preprocessor">   | MKAF(((R) &amp; 0x0f) == 0)                        \</span>
<a name="l01072"></a>01072 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01073"></a><a class="code" href="machine_8h.html#9528872c7f04190115a9150242d626d6">01073</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_INCD(R)                            \</span>
<a name="l01074"></a>01074 <span class="preprocessor">  (MKOF((dword_t)(R) == 0x80000000)                    \</span>
<a name="l01075"></a>01075 <span class="preprocessor">   | MKSF((dword_t)(R) &gt;= 0x80000000)                    \</span>
<a name="l01076"></a>01076 <span class="preprocessor">   | MKZF((dword_t)(R) == 0)                        \</span>
<a name="l01077"></a>01077 <span class="preprocessor">   | MKAF(((R) &amp; 0x0f) == 0)                        \</span>
<a name="l01078"></a>01078 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01079"></a><a class="code" href="machine_8h.html#8c13b174d6cadab55674636f165161e6">01079</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_INCV(R)                            \</span>
<a name="l01080"></a>01080 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_INCD(R) : AFLAGS_INCW(R))</span>
<a name="l01081"></a>01081 <span class="preprocessor"></span>
<a name="l01082"></a>01082 <span class="comment">/* compute DEC flags */</span>
<a name="l01083"></a><a class="code" href="machine_8h.html#566e70c3485f55f41bd8cd6d3491d0f1">01083</a> <span class="preprocessor">#define AFLAGS_DECB(R)                            \</span>
<a name="l01084"></a>01084 <span class="preprocessor">  (MKOF((byte_t)(R) == 0x7f)                        \</span>
<a name="l01085"></a>01085 <span class="preprocessor">   | MKSF((byte_t)(R) &gt;= 0x80)                        \</span>
<a name="l01086"></a>01086 <span class="preprocessor">   | MKZF((byte_t)(R) == 0)                        \</span>
<a name="l01087"></a>01087 <span class="preprocessor">   | MKAF(((R) &amp; 0x0f) == 0x0f)                        \</span>
<a name="l01088"></a>01088 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01089"></a><a class="code" href="machine_8h.html#96f00c38487d79a98827c1b282e440a2">01089</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_DECW(R)                            \</span>
<a name="l01090"></a>01090 <span class="preprocessor">  (MKOF((word_t)(R) == 0x7fff)                        \</span>
<a name="l01091"></a>01091 <span class="preprocessor">   | MKSF((word_t)(R) &gt;= 0x8000)                    \</span>
<a name="l01092"></a>01092 <span class="preprocessor">   | MKZF((word_t)(R) == 0)                        \</span>
<a name="l01093"></a>01093 <span class="preprocessor">   | MKAF(((R) &amp; 0x0f) == 0x0f)                        \</span>
<a name="l01094"></a>01094 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01095"></a><a class="code" href="machine_8h.html#ae47aec8959f806804bcd2aa5d56f2c8">01095</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_DECD(R)                            \</span>
<a name="l01096"></a>01096 <span class="preprocessor">  (MKOF((dword_t)(R) == 0x7fffffff)                    \</span>
<a name="l01097"></a>01097 <span class="preprocessor">   | MKSF((dword_t)(R) &gt;= 0x80000000)                    \</span>
<a name="l01098"></a>01098 <span class="preprocessor">   | MKZF((dword_t)(R) == 0)                        \</span>
<a name="l01099"></a>01099 <span class="preprocessor">   | MKAF(((R) &amp; 0x0f) == 0x0f)                        \</span>
<a name="l01100"></a>01100 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01101"></a><a class="code" href="machine_8h.html#e48f12743003dedf3ce6d300d2112d3e">01101</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_DECV(R)                            \</span>
<a name="l01102"></a>01102 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_DECD(R) : AFLAGS_DECW(R))</span>
<a name="l01103"></a>01103 <span class="preprocessor"></span>
<a name="l01104"></a>01104 <span class="comment">/* compute ADD flags */</span>
<a name="l01105"></a><a class="code" href="machine_8h.html#e3630448cf4b7768b2fc1c9bf5f6d957">01105</a> <span class="preprocessor">#define AFLAGS_ADCB(R,S1,S2,C)                        \</span>
<a name="l01106"></a>01106 <span class="preprocessor">  (MKOF((((S1) &amp; 0x80) == ((S2) &amp; 0x80))                \</span>
<a name="l01107"></a>01107 <span class="preprocessor">        &amp;&amp; (((R) &amp; 0x80) != ((S2) &amp; 0x80)))                \</span>
<a name="l01108"></a>01108 <span class="preprocessor">   | MKSF((byte_t)(R) &gt;= 0x80)                        \</span>
<a name="l01109"></a>01109 <span class="preprocessor">   | MKZF((byte_t)(R) == 0)                        \</span>
<a name="l01110"></a>01110 <span class="preprocessor">   | MKAF((((S1) ^ (S2)) ^ (R)) &amp; 0x10)                    \</span>
<a name="l01111"></a>01111 <span class="preprocessor">   | MKCF(((byte_t)(R) &lt; (byte_t)(S1))                    \</span>
<a name="l01112"></a>01112 <span class="preprocessor">     || ((C) &amp;&amp; ((byte_t)(R) == (byte_t)(S1))))            \</span>
<a name="l01113"></a>01113 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01114"></a><a class="code" href="machine_8h.html#5864e2aead9e793f934514b6bddad271">01114</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_ADCW(R,S1,S2,C)                        \</span>
<a name="l01115"></a>01115 <span class="preprocessor">  (MKOF((((S1) &amp; 0x8000) == ((S2) &amp; 0x8000))                \</span>
<a name="l01116"></a>01116 <span class="preprocessor">        &amp;&amp; (((R) &amp; 0x8000) != ((S2) &amp; 0x8000)))                \</span>
<a name="l01117"></a>01117 <span class="preprocessor">   | MKSF((word_t)(R) &gt;= 0x8000)                    \</span>
<a name="l01118"></a>01118 <span class="preprocessor">   | MKZF((word_t)(R) == 0)                        \</span>
<a name="l01119"></a>01119 <span class="preprocessor">   | MKAF((((S1) ^ (S2)) ^ (R)) &amp; 0x10)                    \</span>
<a name="l01120"></a>01120 <span class="preprocessor">   | MKCF(((word_t)(R) &lt; (word_t)(S1))                    \</span>
<a name="l01121"></a>01121 <span class="preprocessor">     || ((C) &amp;&amp; ((word_t)(R) == (word_t)(S1))))            \</span>
<a name="l01122"></a>01122 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01123"></a><a class="code" href="machine_8h.html#44abe6fd16469b159bfdd74244322553">01123</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_ADCD(R,S1,S2,C)                        \</span>
<a name="l01124"></a>01124 <span class="preprocessor">  (MKOF((((S1) &amp; 0x80000000) == ((S2) &amp; 0x80000000))            \</span>
<a name="l01125"></a>01125 <span class="preprocessor">        &amp;&amp; (((R) &amp; 0x80000000) != ((S2) &amp; 0x80000000)))            \</span>
<a name="l01126"></a>01126 <span class="preprocessor">   | MKSF((dword_t)(R) &gt;= 0x80000000)                    \</span>
<a name="l01127"></a>01127 <span class="preprocessor">   | MKZF((dword_t)(R) == 0)                        \</span>
<a name="l01128"></a>01128 <span class="preprocessor">   | MKAF((((S1) ^ (S2)) ^ (R)) &amp; 0x10)                    \</span>
<a name="l01129"></a>01129 <span class="preprocessor">   | MKCF(((dword_t)(R) &lt; (dword_t)(S1))                    \</span>
<a name="l01130"></a>01130 <span class="preprocessor">     || ((C) &amp;&amp; ((dword_t)(R) == (dword_t)(S1))))            \</span>
<a name="l01131"></a>01131 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01132"></a><a class="code" href="machine_8h.html#583f174f5328cdcda49b16958fce7dbf">01132</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_ADCV(R,S1,S2,C)                        \</span>
<a name="l01133"></a>01133 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l01134"></a>01134 <span class="preprocessor">   ? AFLAGS_ADCD(R, S1, S2, C)                        \</span>
<a name="l01135"></a>01135 <span class="preprocessor">   : AFLAGS_ADCW(R, S1, S2, C))</span>
<a name="l01136"></a>01136 <span class="preprocessor"></span>
<a name="l01137"></a>01137 <span class="comment">/* compute SBB flags */</span>
<a name="l01138"></a><a class="code" href="machine_8h.html#a652fae963869a94ffd34f33c5b41997">01138</a> <span class="preprocessor">#define AFLAGS_SBBB(R,S1,S2,C)                        \</span>
<a name="l01139"></a>01139 <span class="preprocessor">  (MKOF((((S1) &amp; 0x80) != ((S2) &amp; 0x80))                \</span>
<a name="l01140"></a>01140 <span class="preprocessor">        &amp;&amp; (((R) &amp; 0x80) != ((S1) &amp; 0x80)))                \</span>
<a name="l01141"></a>01141 <span class="preprocessor">   | MKSF((byte_t)(R) &gt;= 0x80)                        \</span>
<a name="l01142"></a>01142 <span class="preprocessor">   | MKZF((byte_t)(R) == 0)                        \</span>
<a name="l01143"></a>01143 <span class="preprocessor">   | MKAF((((S1) ^ (S2)) ^ (R)) &amp; 0x10)                    \</span>
<a name="l01144"></a>01144 <span class="preprocessor">   | MKCF(((byte_t)(S1) &lt; (byte_t)(R))                    \</span>
<a name="l01145"></a>01145 <span class="preprocessor">     || ((C) &amp;&amp; ((byte_t)(S2) == 0xff)))                \</span>
<a name="l01146"></a>01146 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01147"></a><a class="code" href="machine_8h.html#5ecd6fc4b1001963f46067e1262d3b74">01147</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SBBW(R,S1,S2,C)                        \</span>
<a name="l01148"></a>01148 <span class="preprocessor">  (MKOF((((S1) &amp; 0x8000) != ((S2) &amp; 0x8000))                \</span>
<a name="l01149"></a>01149 <span class="preprocessor">        &amp;&amp; (((R) &amp; 0x8000) != ((S1) &amp; 0x8000)))                \</span>
<a name="l01150"></a>01150 <span class="preprocessor">   | MKSF((word_t)(R) &gt;= 0x8000)                    \</span>
<a name="l01151"></a>01151 <span class="preprocessor">   | MKZF((word_t)(R) == 0)                        \</span>
<a name="l01152"></a>01152 <span class="preprocessor">   | MKAF((((S1) ^ (S2)) ^ (R)) &amp; 0x10)                    \</span>
<a name="l01153"></a>01153 <span class="preprocessor">   | MKCF(((word_t)(S1) &lt; (word_t)(R))                    \</span>
<a name="l01154"></a>01154 <span class="preprocessor">     || ((C) &amp;&amp; ((word_t)(S2) == 0xffff)))                \</span>
<a name="l01155"></a>01155 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01156"></a><a class="code" href="machine_8h.html#1364188be8128fb7720f951f6cea39bf">01156</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SBBD(R,S1,S2,C)                        \</span>
<a name="l01157"></a>01157 <span class="preprocessor">  (MKOF((((S1) &amp; 0x80000000) != ((S2) &amp; 0x80000000))            \</span>
<a name="l01158"></a>01158 <span class="preprocessor">        &amp;&amp; (((R) &amp; 0x80000000) != ((S1) &amp; 0x80000000)))            \</span>
<a name="l01159"></a>01159 <span class="preprocessor">   | MKSF((dword_t)(R) &gt;= 0x80000000)                    \</span>
<a name="l01160"></a>01160 <span class="preprocessor">   | MKZF((dword_t)(R) == 0)                        \</span>
<a name="l01161"></a>01161 <span class="preprocessor">   | MKAF((((S1) ^ (S2)) ^ (R)) &amp; 0x10)                    \</span>
<a name="l01162"></a>01162 <span class="preprocessor">   | MKCF(((dword_t)(S1) &lt; (dword_t)(R))                    \</span>
<a name="l01163"></a>01163 <span class="preprocessor">     || ((C) &amp;&amp; ((dword_t)(S2) == 0xffffffff)))            \</span>
<a name="l01164"></a>01164 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01165"></a><a class="code" href="machine_8h.html#29a5e08136d51885b15abd08700a7eba">01165</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SBBV(R,S1,S2,C)                        \</span>
<a name="l01166"></a>01166 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l01167"></a>01167 <span class="preprocessor">   ? AFLAGS_SBBD(R, S1, S2, C)                        \</span>
<a name="l01168"></a>01168 <span class="preprocessor">   : AFLAGS_SBBW(R, S1, S2, C))</span>
<a name="l01169"></a>01169 <span class="preprocessor"></span>
<a name="l01170"></a>01170 <span class="comment">/* negation flags */</span>
<a name="l01171"></a><a class="code" href="machine_8h.html#a9715d3d2bd5d40cea771858e87277c4">01171</a> <span class="preprocessor">#define AFLAGS_NEGB(R,S)                        \</span>
<a name="l01172"></a>01172 <span class="preprocessor">  (MKOF((byte_t)(S) == 0x80)                        \</span>
<a name="l01173"></a>01173 <span class="preprocessor">   | MKSF((byte_t)(R) &gt;= 0x80)                        \</span>
<a name="l01174"></a>01174 <span class="preprocessor">   | MKZF((byte_t)(R) == 0)                        \</span>
<a name="l01175"></a>01175 <span class="preprocessor">   | MKAF(((S) &amp; 0x0f) &gt; 0)                        \</span>
<a name="l01176"></a>01176 <span class="preprocessor">   | MKCF((byte_t)(S) != 0)                        \</span>
<a name="l01177"></a>01177 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01178"></a><a class="code" href="machine_8h.html#d817029760f62fa4cab1023f764dc0a9">01178</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_NEGW(R,S)                        \</span>
<a name="l01179"></a>01179 <span class="preprocessor">  (MKOF((word_t)(S) == 0x8000)                        \</span>
<a name="l01180"></a>01180 <span class="preprocessor">   | MKSF((word_t)(R) &gt;= 0x8000)                    \</span>
<a name="l01181"></a>01181 <span class="preprocessor">   | MKZF((word_t)(R) == 0)                        \</span>
<a name="l01182"></a>01182 <span class="preprocessor">   | MKAF(((S) &amp; 0x0f) &gt; 0)                        \</span>
<a name="l01183"></a>01183 <span class="preprocessor">   | MKCF((word_t)(S) != 0)                        \</span>
<a name="l01184"></a>01184 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01185"></a><a class="code" href="machine_8h.html#93ad552fa6947ba926cf6b4f901724b1">01185</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_NEGD(R,S)                        \</span>
<a name="l01186"></a>01186 <span class="preprocessor">  (MKOF((dword_t)(S) == 0x80000000)                    \</span>
<a name="l01187"></a>01187 <span class="preprocessor">   | MKSF((dword_t)(R) &gt;= 0x80000000)                    \</span>
<a name="l01188"></a>01188 <span class="preprocessor">   | MKZF((dword_t)(R) == 0)                        \</span>
<a name="l01189"></a>01189 <span class="preprocessor">   | MKAF(((S) &amp; 0x0f) &gt; 0)                        \</span>
<a name="l01190"></a>01190 <span class="preprocessor">   | MKCF((dword_t)(S) != 0)                        \</span>
<a name="l01191"></a>01191 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01192"></a><a class="code" href="machine_8h.html#dd89b22f41c0ea5e8f58bbacb585eec8">01192</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_NEGV(R,S)                        \</span>
<a name="l01193"></a>01193 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_NEGD(R,S) : AFLAGS_NEGW(R,S))</span>
<a name="l01194"></a>01194 <span class="preprocessor"></span>
<a name="l01195"></a>01195 <span class="comment">/* rotates */</span>
<a name="l01196"></a><a class="code" href="machine_8h.html#fdbb09debc9fe21310e3fd764855bfd3">01196</a> <span class="preprocessor">#define ROL_B(X,N)                            \</span>
<a name="l01197"></a>01197 <span class="preprocessor">  (((X) &lt;&lt; (N)) | ((X) &gt;&gt; (8-(N))))</span>
<a name="l01198"></a><a class="code" href="machine_8h.html#84646ef7a3cdb3fe5fc321c43fcc4f6d">01198</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_ROLB(R,S,N)                        \</span>
<a name="l01199"></a>01199 <span class="preprocessor">  (MKCF((R) &amp; 0x01)                            \</span>
<a name="l01200"></a>01200 <span class="preprocessor">   | MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x80) : UNDEF))</span>
<a name="l01201"></a><a class="code" href="machine_8h.html#5feea3a044c39b266d10b0363e5089dc">01201</a> <span class="preprocessor"></span><span class="preprocessor">#define ROL_W(X,N)                            \</span>
<a name="l01202"></a>01202 <span class="preprocessor">  (((X) &lt;&lt; (N)) | ((X) &gt;&gt; (16-(N))))</span>
<a name="l01203"></a><a class="code" href="machine_8h.html#db894c34eb3bb4764398275ab5e999ac">01203</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_ROLW(R,S,N)                        \</span>
<a name="l01204"></a>01204 <span class="preprocessor">  (MKCF((R) &amp; 0x01)                            \</span>
<a name="l01205"></a>01205 <span class="preprocessor">   | MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x8000) : UNDEF))</span>
<a name="l01206"></a><a class="code" href="machine_8h.html#990f909d313a031f4632c3c609f84dbe">01206</a> <span class="preprocessor"></span><span class="preprocessor">#define ROL_D(X,N)                            \</span>
<a name="l01207"></a>01207 <span class="preprocessor">  (((X) &lt;&lt; (N)) | ((X) &gt;&gt; (32-(N))))</span>
<a name="l01208"></a><a class="code" href="machine_8h.html#d0ba30bc410866d2aac21b5433cec975">01208</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_ROLD(R,S,N)                        \</span>
<a name="l01209"></a>01209 <span class="preprocessor">  (MKCF((R) &amp; 0x01)                            \</span>
<a name="l01210"></a>01210 <span class="preprocessor">   | MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x80000000) : UNDEF))</span>
<a name="l01211"></a><a class="code" href="machine_8h.html#0f605946a9779f3e5cb288f08efd6426">01211</a> <span class="preprocessor"></span><span class="preprocessor">#define ROL_V(X,N)                            \</span>
<a name="l01212"></a>01212 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? ROL_D(X,N) : ROL_W(X,N))</span>
<a name="l01213"></a><a class="code" href="machine_8h.html#224f3151a05dcdbabac9ac4a1e6752c9">01213</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_ROLV(R,S,N)                        \</span>
<a name="l01214"></a>01214 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_ROLD(R,S,N) : AFLAGS_ROLW(R,S,N))</span>
<a name="l01215"></a>01215 <span class="preprocessor"></span>
<a name="l01216"></a><a class="code" href="machine_8h.html#43327700446afc66250bb5200bab08ce">01216</a> <span class="preprocessor">#define ROR_B(X,N)                            \</span>
<a name="l01217"></a>01217 <span class="preprocessor">  (((X) &gt;&gt; (N)) | ((X) &lt;&lt; (8-(N))))</span>
<a name="l01218"></a><a class="code" href="machine_8h.html#fa11e03687810554c41f8bde2de5f7ec">01218</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_RORB(R,S,N)                        \</span>
<a name="l01219"></a>01219 <span class="preprocessor">  (MKCF((R) &amp; 0x80)                            \</span>
<a name="l01220"></a>01220 <span class="preprocessor">   | MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x80) : UNDEF))</span>
<a name="l01221"></a><a class="code" href="machine_8h.html#7ca47cffe077c84a985ad05a5a770ac5">01221</a> <span class="preprocessor"></span><span class="preprocessor">#define ROR_W(X,N)                            \</span>
<a name="l01222"></a>01222 <span class="preprocessor">  (((X) &gt;&gt; (N)) | ((X) &lt;&lt; (16-(N))))</span>
<a name="l01223"></a><a class="code" href="machine_8h.html#93bdb1a012192daa764a5775fdfbe2b1">01223</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_RORW(R,S,N)                        \</span>
<a name="l01224"></a>01224 <span class="preprocessor">  (MKCF((R) &amp; 0x8000)                            \</span>
<a name="l01225"></a>01225 <span class="preprocessor">   | MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x8000) : UNDEF))</span>
<a name="l01226"></a><a class="code" href="machine_8h.html#1051e624e531a22abb873ee80b411fae">01226</a> <span class="preprocessor"></span><span class="preprocessor">#define ROR_D(X,N)                            \</span>
<a name="l01227"></a>01227 <span class="preprocessor">  (((X) &gt;&gt; (N)) | ((X) &lt;&lt; (32-(N))))</span>
<a name="l01228"></a><a class="code" href="machine_8h.html#aba5e8279926bedc5913dd012fb59f10">01228</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_RORD(R,S,N)                        \</span>
<a name="l01229"></a>01229 <span class="preprocessor">  (MKCF((R) &amp; 0x80000000)                        \</span>
<a name="l01230"></a>01230 <span class="preprocessor">   | MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x80000000) : UNDEF))</span>
<a name="l01231"></a><a class="code" href="machine_8h.html#5eec6e3983ca82350b0e83f5c22dd4b0">01231</a> <span class="preprocessor"></span><span class="preprocessor">#define ROR_V(X,N)                            \</span>
<a name="l01232"></a>01232 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? ROR_D(X,N) : ROR_W(X,N))</span>
<a name="l01233"></a><a class="code" href="machine_8h.html#af927e2f347c3d26910863f56fec6e4c">01233</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_RORV(R,S,N)                        \</span>
<a name="l01234"></a>01234 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_RORD(R,S,N) : AFLAGS_RORW(R,S,N))</span>
<a name="l01235"></a>01235 <span class="preprocessor"></span>
<a name="l01236"></a><a class="code" href="machine_8h.html#7c62ede99429390ab9ada588fb0ec102">01236</a> <span class="preprocessor">#define RCL_B(X,CF,N)                            \</span>
<a name="l01237"></a>01237 <span class="preprocessor">  ({ byte_t _res, n = (N);                        \</span>
<a name="l01238"></a>01238 <span class="preprocessor">   if ((N) != 0)                            \</span>
<a name="l01239"></a>01239 <span class="preprocessor">   _res = ((n == 1)                            \</span>
<a name="l01240"></a>01240 <span class="preprocessor">     ? (((X) &lt;&lt; 1) | (CF))                        \</span>
<a name="l01241"></a>01241 <span class="preprocessor">     : (((X) &lt;&lt; n) | ((CF) &lt;&lt; (n - 1)) | ((X) &gt;&gt; (9 - n))));        \</span>
<a name="l01242"></a>01242 <span class="preprocessor">   else                                \</span>
<a name="l01243"></a>01243 <span class="preprocessor">   _res = (X);                            \</span>
<a name="l01244"></a>01244 <span class="preprocessor">   _res;                                \</span>
<a name="l01245"></a>01245 <span class="preprocessor">   }) </span>
<a name="l01246"></a><a class="code" href="machine_8h.html#836ece96716e5ef64d308e2e4325ca28">01246</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_RCLB(R,S,N)                        \</span>
<a name="l01247"></a>01247 <span class="preprocessor">  (MKCF(((S) &gt;&gt; (8 - (N))) &amp; 0x01)                    \</span>
<a name="l01248"></a>01248 <span class="preprocessor">   | MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x80) : UNDEF))</span>
<a name="l01249"></a><a class="code" href="machine_8h.html#1b4277da8820ced8831767d37a7d8fc8">01249</a> <span class="preprocessor"></span><span class="preprocessor">#define RCL_W(X,CF,N)                            \</span>
<a name="l01250"></a>01250 <span class="preprocessor">  ({ word_t _res, n = (N);                        \</span>
<a name="l01251"></a>01251 <span class="preprocessor">   if ((N) != 0)                            \</span>
<a name="l01252"></a>01252 <span class="preprocessor">   _res = ((n == 1)                            \</span>
<a name="l01253"></a>01253 <span class="preprocessor">     ? (((X) &lt;&lt; 1) | (CF))                        \</span>
<a name="l01254"></a>01254 <span class="preprocessor">     : (((X) &lt;&lt; n) | ((CF) &lt;&lt; (n - 1)) | ((X) &gt;&gt; (17 - n))));    \</span>
<a name="l01255"></a>01255 <span class="preprocessor">   else                                \</span>
<a name="l01256"></a>01256 <span class="preprocessor">   _res = (X);                            \</span>
<a name="l01257"></a>01257 <span class="preprocessor">   _res;                                \</span>
<a name="l01258"></a>01258 <span class="preprocessor">   })</span>
<a name="l01259"></a><a class="code" href="machine_8h.html#5de586667f99a9bafce5f4baea91bcab">01259</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_RCLW(R,S,N)                        \</span>
<a name="l01260"></a>01260 <span class="preprocessor">  (MKCF(((S) &gt;&gt; (16 - (N))) &amp; 0x01)                    \</span>
<a name="l01261"></a>01261 <span class="preprocessor">   | MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x8000) : UNDEF))</span>
<a name="l01262"></a><a class="code" href="machine_8h.html#fb1a4c53fcc8037ffc0c702c649817b5">01262</a> <span class="preprocessor"></span><span class="preprocessor">#define RCL_D(X,CF,N)                            \</span>
<a name="l01263"></a>01263 <span class="preprocessor">  ({ dword_t _res, n = (N);                        \</span>
<a name="l01264"></a>01264 <span class="preprocessor">   if ((N) != 0)                            \</span>
<a name="l01265"></a>01265 <span class="preprocessor">   _res = ((n == 1)                            \</span>
<a name="l01266"></a>01266 <span class="preprocessor">     ? (((X) &lt;&lt; 1) | (CF))                        \</span>
<a name="l01267"></a>01267 <span class="preprocessor">     : (((X) &lt;&lt; n) | ((CF) &lt;&lt; (n - 1)) | ((X) &gt;&gt; (33 - n))));    \</span>
<a name="l01268"></a>01268 <span class="preprocessor">   else                                \</span>
<a name="l01269"></a>01269 <span class="preprocessor">   _res = (X);                            \</span>
<a name="l01270"></a>01270 <span class="preprocessor">   _res;                                \</span>
<a name="l01271"></a>01271 <span class="preprocessor">   })</span>
<a name="l01272"></a><a class="code" href="machine_8h.html#f1d85922eda6cee080a452a18f67cea8">01272</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_RCLD(R,S,N)                        \</span>
<a name="l01273"></a>01273 <span class="preprocessor">  (MKCF(((S) &gt;&gt; (32 - (N))) &amp; 0x01)                    \</span>
<a name="l01274"></a>01274 <span class="preprocessor">   | MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x80000000) : UNDEF))</span>
<a name="l01275"></a><a class="code" href="machine_8h.html#6ed71b112a620bec52e267d9fda1d190">01275</a> <span class="preprocessor"></span><span class="preprocessor">#define RCL_V(X,CF,N)                            \</span>
<a name="l01276"></a>01276 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? RCL_D(X,CF,N) : RCL_W(X,CF,N))</span>
<a name="l01277"></a><a class="code" href="machine_8h.html#2d583ec1f03af676c0a607778c9f7548">01277</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_RCLV(R,S,N)                        \</span>
<a name="l01278"></a>01278 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_RCLD(R,S,N) : AFLAGS_RCLW(R,S,N))</span>
<a name="l01279"></a>01279 <span class="preprocessor"></span>
<a name="l01280"></a><a class="code" href="machine_8h.html#bd9dcca704afaf19fb7be26124eaa39b">01280</a> <span class="preprocessor">#define RCR_B(X,CF,N)                            \</span>
<a name="l01281"></a>01281 <span class="preprocessor">  ({ byte_t _res, n = (N);                        \</span>
<a name="l01282"></a>01282 <span class="preprocessor">   if ((N) != 0)                            \</span>
<a name="l01283"></a>01283 <span class="preprocessor">   _res = ((n == 1)                            \</span>
<a name="l01284"></a>01284 <span class="preprocessor">     ? (((X) &gt;&gt; 1) | ((CF) &lt;&lt; 7))                    \</span>
<a name="l01285"></a>01285 <span class="preprocessor">     : (((X) &gt;&gt; n) | ((CF) &lt;&lt; (8 - n)) | ((X) &lt;&lt; (9 - n))));        \</span>
<a name="l01286"></a>01286 <span class="preprocessor">   else                                \</span>
<a name="l01287"></a>01287 <span class="preprocessor">   _res = (X);                            \</span>
<a name="l01288"></a>01288 <span class="preprocessor">   _res;                                \</span>
<a name="l01289"></a>01289 <span class="preprocessor">   })</span>
<a name="l01290"></a><a class="code" href="machine_8h.html#ce344e0bfbd566de064dc4b33e51dbe7">01290</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_RCRB(R,S,N)                        \</span>
<a name="l01291"></a>01291 <span class="preprocessor">  (MKCF(((S) &gt;&gt; ((N) - 1)) &amp; 0x01)                    \</span>
<a name="l01292"></a>01292 <span class="preprocessor">   | MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x80) : UNDEF))</span>
<a name="l01293"></a><a class="code" href="machine_8h.html#83f526d0dbaa367ad9bca14561dfee40">01293</a> <span class="preprocessor"></span><span class="preprocessor">#define RCR_W(X,CF,N)                            \</span>
<a name="l01294"></a>01294 <span class="preprocessor">  ({ word_t _res, n = (N);                        \</span>
<a name="l01295"></a>01295 <span class="preprocessor">   if ((N) != 0)                            \</span>
<a name="l01296"></a>01296 <span class="preprocessor">   _res = ((n == 1)                            \</span>
<a name="l01297"></a>01297 <span class="preprocessor">     ? (((X) &gt;&gt; 1) | ((CF) &lt;&lt; 15))                    \</span>
<a name="l01298"></a>01298 <span class="preprocessor">     : (((X) &gt;&gt; n) | ((CF) &lt;&lt; (16 - n)) | ((X) &lt;&lt; (17 - n))));    \</span>
<a name="l01299"></a>01299 <span class="preprocessor">   else                                \</span>
<a name="l01300"></a>01300 <span class="preprocessor">   _res = (X);                            \</span>
<a name="l01301"></a>01301 <span class="preprocessor">   _res;                                \</span>
<a name="l01302"></a>01302 <span class="preprocessor">   })</span>
<a name="l01303"></a><a class="code" href="machine_8h.html#5627c9874e3987cf56c5e9dcf9a77dbf">01303</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_RCRW(R,S,N)                        \</span>
<a name="l01304"></a>01304 <span class="preprocessor">  (MKCF(((S) &gt;&gt; ((N) - 1)) &amp; 0x01)                    \</span>
<a name="l01305"></a>01305 <span class="preprocessor">   | MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x8000) : UNDEF))</span>
<a name="l01306"></a><a class="code" href="machine_8h.html#c2b335eb9776a9ce08c4267429934a0f">01306</a> <span class="preprocessor"></span><span class="preprocessor">#define RCR_D(X,CF,N)                            \</span>
<a name="l01307"></a>01307 <span class="preprocessor">  ({ dword_t _res, n = (N);                        \</span>
<a name="l01308"></a>01308 <span class="preprocessor">   if ((N) != 0)                            \</span>
<a name="l01309"></a>01309 <span class="preprocessor">   _res = ((n == 1)                            \</span>
<a name="l01310"></a>01310 <span class="preprocessor">     ? (((X) &gt;&gt; 1) | ((CF) &lt;&lt; 31))                    \</span>
<a name="l01311"></a>01311 <span class="preprocessor">     : (((X) &gt;&gt; n) | ((CF) &lt;&lt; (32 - n)) | ((X) &lt;&lt; (33 - n))));    \</span>
<a name="l01312"></a>01312 <span class="preprocessor">   else                                \</span>
<a name="l01313"></a>01313 <span class="preprocessor">   _res = (X);                            \</span>
<a name="l01314"></a>01314 <span class="preprocessor">   _res;                                \</span>
<a name="l01315"></a>01315 <span class="preprocessor">   })</span>
<a name="l01316"></a><a class="code" href="machine_8h.html#e8f5e52f88aaedbb9cfc847a194dc961">01316</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_RCRD(R,S,N)                        \</span>
<a name="l01317"></a>01317 <span class="preprocessor">  (MKCF(((S) &gt;&gt; ((N) - 1)) &amp; 0x01)                    \</span>
<a name="l01318"></a>01318 <span class="preprocessor">   | MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x80000000) : UNDEF))</span>
<a name="l01319"></a><a class="code" href="machine_8h.html#bc2f0329acd58078de0bccece0d2ebba">01319</a> <span class="preprocessor"></span><span class="preprocessor">#define RCR_V(X,CF,N)                            \</span>
<a name="l01320"></a>01320 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? RCR_D(X,CF,N) : RCR_W(X,CF,N))</span>
<a name="l01321"></a><a class="code" href="machine_8h.html#d7f953397a91bb626db669964c366c8e">01321</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_RCRV(R,S,N)                        \</span>
<a name="l01322"></a>01322 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_RCRD(R,S,N) : AFLAGS_RCRW(R,S,N))</span>
<a name="l01323"></a>01323 <span class="preprocessor"></span>
<a name="l01324"></a><a class="code" href="machine_8h.html#1f57ddc43d3f84202aca5cd92a62f7ce">01324</a> <span class="preprocessor">#define SHL_B(X,N)                            \</span>
<a name="l01325"></a>01325 <span class="preprocessor">  ((X) &lt;&lt; (N))</span>
<a name="l01326"></a><a class="code" href="machine_8h.html#02cd254c7598bce8c468e932cc987eac">01326</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SHLB(R,S,N)                        \</span>
<a name="l01327"></a>01327 <span class="preprocessor">  (MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x80) : UNDEF)            \</span>
<a name="l01328"></a>01328 <span class="preprocessor">   | MKSF((byte_t)(R) &gt;= 0x80)                        \</span>
<a name="l01329"></a>01329 <span class="preprocessor">   | MKZF((byte_t)(R) == 0)                        \</span>
<a name="l01330"></a>01330 <span class="preprocessor">   | MKAF(UNDEF)                            \</span>
<a name="l01331"></a>01331 <span class="preprocessor">   | MKCF(((N) &lt;= 8) ? (((S) &gt;&gt; (8 - (N))) &amp; 0x01) : 0)            \</span>
<a name="l01332"></a>01332 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01333"></a><a class="code" href="machine_8h.html#d978aaa7444c84ae22dcf1e2f7026be1">01333</a> <span class="preprocessor"></span><span class="preprocessor">#define SHL_W(X,N)                            \</span>
<a name="l01334"></a>01334 <span class="preprocessor">  ((X) &lt;&lt; (N))</span>
<a name="l01335"></a><a class="code" href="machine_8h.html#2d6f745fa217505a2a4d8c3bb538b61c">01335</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SHLW(R,S,N)                        \</span>
<a name="l01336"></a>01336 <span class="preprocessor">  (MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x8000) : UNDEF)            \</span>
<a name="l01337"></a>01337 <span class="preprocessor">   | MKSF((word_t)(R) &gt;= 0x8000)                    \</span>
<a name="l01338"></a>01338 <span class="preprocessor">   | MKZF((word_t)(R) == 0)                        \</span>
<a name="l01339"></a>01339 <span class="preprocessor">   | MKAF(UNDEF)                            \</span>
<a name="l01340"></a>01340 <span class="preprocessor">   | MKCF(((N) &lt;= 16) ? (((S) &gt;&gt; (16 - (N))) &amp; 0x01) : 0)        \</span>
<a name="l01341"></a>01341 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01342"></a><a class="code" href="machine_8h.html#aa4c1eab3c768e70b1ca983a760b929c">01342</a> <span class="preprocessor"></span><span class="preprocessor">#define SHL_D(X,N)                            \</span>
<a name="l01343"></a>01343 <span class="preprocessor">  ((X) &lt;&lt; (N))</span>
<a name="l01344"></a><a class="code" href="machine_8h.html#0187c28643d4a6986a0ca4057719c5b0">01344</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SHLD(R,S,N)                        \</span>
<a name="l01345"></a>01345 <span class="preprocessor">  (MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x80000000) : UNDEF)        \</span>
<a name="l01346"></a>01346 <span class="preprocessor">   | MKSF((dword_t)(R) &gt;= 0x80000000)                    \</span>
<a name="l01347"></a>01347 <span class="preprocessor">   | MKZF((dword_t)(R) == 0)                        \</span>
<a name="l01348"></a>01348 <span class="preprocessor">   | MKAF(UNDEF)                            \</span>
<a name="l01349"></a>01349 <span class="preprocessor">   | MKCF(((N) &lt;= 32) ? (((S) &gt;&gt; (32 - (N))) &amp; 0x01) : 0)        \</span>
<a name="l01350"></a>01350 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01351"></a><a class="code" href="machine_8h.html#57dd3b0adf5e6c3acb60cd86bfa50e20">01351</a> <span class="preprocessor"></span><span class="preprocessor">#define SHL_V(X,N)                            \</span>
<a name="l01352"></a>01352 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? SHL_D(X,N) : SHL_W(X,N))</span>
<a name="l01353"></a><a class="code" href="machine_8h.html#5440cd239b9f6b93802ed13b88a162bf">01353</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SHLV(R,S,N)                        \</span>
<a name="l01354"></a>01354 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_SHLD(R,S,N) : AFLAGS_SHLW(R,S,N))</span>
<a name="l01355"></a>01355 <span class="preprocessor"></span>
<a name="l01356"></a><a class="code" href="machine_8h.html#5d2d324b56b77dd73c43fc87d5b4331b">01356</a> <span class="preprocessor">#define SHR_B(X,N)                            \</span>
<a name="l01357"></a>01357 <span class="preprocessor">  ((X) &gt;&gt; (N))</span>
<a name="l01358"></a><a class="code" href="machine_8h.html#d2794d4c313c056432d259fce3a8aebc">01358</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SHRB(R,S,N)                        \</span>
<a name="l01359"></a>01359 <span class="preprocessor">  (MKOF(((N) == 1) ? ((S) &amp; 0x80) : UNDEF)                \</span>
<a name="l01360"></a>01360 <span class="preprocessor">   | MKSF((byte_t)(R) &gt;= 0x80)                        \</span>
<a name="l01361"></a>01361 <span class="preprocessor">   | MKZF((byte_t)(R) == 0)                        \</span>
<a name="l01362"></a>01362 <span class="preprocessor">   | MKAF(UNDEF)                            \</span>
<a name="l01363"></a>01363 <span class="preprocessor">   | MKCF(((S) &gt;&gt; ((N) - 1)) &amp; 0x01)                    \</span>
<a name="l01364"></a>01364 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01365"></a><a class="code" href="machine_8h.html#cb13dcce0ac5ee1b827044c4bdcb8525">01365</a> <span class="preprocessor"></span><span class="preprocessor">#define SHR_W(X,N)                            \</span>
<a name="l01366"></a>01366 <span class="preprocessor">  ((X) &gt;&gt; (N))</span>
<a name="l01367"></a><a class="code" href="machine_8h.html#d1c4aa8b555e81f1076d89fd88086c51">01367</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SHRW(R,S,N)                        \</span>
<a name="l01368"></a>01368 <span class="preprocessor">  (MKOF(((N) == 1) ? ((S) &amp; 0x8000) : UNDEF)                \</span>
<a name="l01369"></a>01369 <span class="preprocessor">   | MKSF((word_t)(R) &gt;= 0x8000)                    \</span>
<a name="l01370"></a>01370 <span class="preprocessor">   | MKZF((word_t)(R) == 0)                        \</span>
<a name="l01371"></a>01371 <span class="preprocessor">   | MKAF(UNDEF)                            \</span>
<a name="l01372"></a>01372 <span class="preprocessor">   | MKCF(((S) &gt;&gt; ((N) - 1)) &amp; 0x01)                    \</span>
<a name="l01373"></a>01373 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01374"></a><a class="code" href="machine_8h.html#1d97d7c2ceef0bb5cf52dc77c7279781">01374</a> <span class="preprocessor"></span><span class="preprocessor">#define SHR_D(X,N)                            \</span>
<a name="l01375"></a>01375 <span class="preprocessor">  ((X) &gt;&gt; (N))</span>
<a name="l01376"></a><a class="code" href="machine_8h.html#c464276095d2f8faaa4bea1da299f5e0">01376</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SHRD(R,S,N)                        \</span>
<a name="l01377"></a>01377 <span class="preprocessor">  (MKOF(((N) == 1) ? ((S) &amp; 0x80000000) : UNDEF)            \</span>
<a name="l01378"></a>01378 <span class="preprocessor">   | MKSF((dword_t)(R) &gt;= 0x80000000)                    \</span>
<a name="l01379"></a>01379 <span class="preprocessor">   | MKZF((dword_t)(R) == 0)                        \</span>
<a name="l01380"></a>01380 <span class="preprocessor">   | MKAF(UNDEF)                            \</span>
<a name="l01381"></a>01381 <span class="preprocessor">   | MKCF(((S) &gt;&gt; ((N) - 1)) &amp; 0x01)                    \</span>
<a name="l01382"></a>01382 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01383"></a><a class="code" href="machine_8h.html#8594d84e3984b0e32ba4121eb95e27c2">01383</a> <span class="preprocessor"></span><span class="preprocessor">#define SHR_V(X,N)                            \</span>
<a name="l01384"></a>01384 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? SHR_D(X,N) : SHR_W(X,N))</span>
<a name="l01385"></a><a class="code" href="machine_8h.html#4ad558187931a22df6621947d64b83ca">01385</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SHRV(R,S,N)                        \</span>
<a name="l01386"></a>01386 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_SHRD(R,S,N) : AFLAGS_SHRW(R,S,N))</span>
<a name="l01387"></a>01387 <span class="preprocessor"></span>
<a name="l01388"></a><a class="code" href="machine_8h.html#f480ca4053f7d575a74c17618ef47550">01388</a> <span class="preprocessor">#define SAR_B(X,N)                            \</span>
<a name="l01389"></a>01389 <span class="preprocessor">  (((N) &lt; 8)                                \</span>
<a name="l01390"></a>01390 <span class="preprocessor">   ? (((X) &amp; 0x80) ? (((X) &gt;&gt; (N)) | (0xff &lt;&lt; (8-(N)))) : ((X) &gt;&gt; (N)))    \</span>
<a name="l01391"></a>01391 <span class="preprocessor">   : (((X) &amp; 0x80) ? 0xff : 0))</span>
<a name="l01392"></a><a class="code" href="machine_8h.html#931f7fe2cb4551aa5851303f039c1ae6">01392</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SARB(R,S,N)                        \</span>
<a name="l01393"></a>01393 <span class="preprocessor">  (MKOF(((N) == 1) ? 0 : UNDEF)                        \</span>
<a name="l01394"></a>01394 <span class="preprocessor">   | MKSF((byte_t)(R) &gt;= 0x80)                        \</span>
<a name="l01395"></a>01395 <span class="preprocessor">   | MKZF((byte_t)(R) == 0)                        \</span>
<a name="l01396"></a>01396 <span class="preprocessor">   | MKAF(UNDEF)                            \</span>
<a name="l01397"></a>01397 <span class="preprocessor">   | MKCF(((N) &lt; 8) ? (((S) &gt;&gt; ((N)-1)) &amp; 0x01) : ((S) &amp; 0x80))        \</span>
<a name="l01398"></a>01398 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01399"></a><a class="code" href="machine_8h.html#07d0cc72b04ab94fcd44912791c3c57e">01399</a> <span class="preprocessor"></span><span class="preprocessor">#define SAR_W(X,N)                            \</span>
<a name="l01400"></a>01400 <span class="preprocessor">  (((N) &lt; 16)                                \</span>
<a name="l01401"></a>01401 <span class="preprocessor">   ? (((X) &amp; 0x8000) ? (((X) &gt;&gt; (N)) | (0xffff &lt;&lt; (16-(N)))) : ((X) &gt;&gt; (N)))\</span>
<a name="l01402"></a>01402 <span class="preprocessor">   : (((X) &amp; 0x8000) ? 0xffff : 0))</span>
<a name="l01403"></a><a class="code" href="machine_8h.html#fcd33412d6bf6c9855c4ae3249a9c247">01403</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SARW(R,S,N)                        \</span>
<a name="l01404"></a>01404 <span class="preprocessor">  (MKOF(((N) == 1) ? 0 : UNDEF)                        \</span>
<a name="l01405"></a>01405 <span class="preprocessor">   | MKSF((word_t)(R) &gt;= 0x8000)                    \</span>
<a name="l01406"></a>01406 <span class="preprocessor">   | MKZF((word_t)(R) == 0)                        \</span>
<a name="l01407"></a>01407 <span class="preprocessor">   | MKAF(UNDEF)                            \</span>
<a name="l01408"></a>01408 <span class="preprocessor">   | MKCF(((N) &lt; 16) ? (((S) &gt;&gt; ((N)-1)) &amp; 0x01) : ((S) &amp; 0x8000))    \</span>
<a name="l01409"></a>01409 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01410"></a><a class="code" href="machine_8h.html#3cb03ce44ca60c3f3ba3d4d1aeb6c596">01410</a> <span class="preprocessor"></span><span class="preprocessor">#define SAR_D(X,N)                            \</span>
<a name="l01411"></a>01411 <span class="preprocessor">  (((N) &lt; 32)                                \</span>
<a name="l01412"></a>01412 <span class="preprocessor">   ? (((N) == 0)                            \</span>
<a name="l01413"></a>01413 <span class="preprocessor">     ? (X)                                \</span>
<a name="l01414"></a>01414 <span class="preprocessor">     : (((X) &amp; 0x80000000)                        \</span>
<a name="l01415"></a>01415 <span class="preprocessor">       ? (((X) &gt;&gt; (N)) | (0xffffffff &lt;&lt; (32-(N)))) : ((X) &gt;&gt; (N))))    \</span>
<a name="l01416"></a>01416 <span class="preprocessor">   : (((X) &amp; 0x80000000) ? 0xffffffff : 0))</span>
<a name="l01417"></a><a class="code" href="machine_8h.html#6e180bc6ce9b517632865fc329a8902f">01417</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SARD(R,S,N)                        \</span>
<a name="l01418"></a>01418 <span class="preprocessor">  (MKOF(((N) == 1) ? 0 : UNDEF)                        \</span>
<a name="l01419"></a>01419 <span class="preprocessor">   | MKSF((dword_t)(R) &gt;= 0x80000000)                    \</span>
<a name="l01420"></a>01420 <span class="preprocessor">   | MKZF((dword_t)(R) == 0)                        \</span>
<a name="l01421"></a>01421 <span class="preprocessor">   | MKAF(UNDEF)                            \</span>
<a name="l01422"></a>01422 <span class="preprocessor">   | MKCF(((N) &lt; 32) ? (((S) &gt;&gt; ((N)-1)) &amp; 0x01) : ((S) &amp; 0x80000000))    \</span>
<a name="l01423"></a>01423 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01424"></a><a class="code" href="machine_8h.html#84c4c12ff1d4557844482ff25ece1e93">01424</a> <span class="preprocessor"></span><span class="preprocessor">#define SAR_V(X,N)                            \</span>
<a name="l01425"></a>01425 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? SAR_D(X,N) : SAR_W(X,N))</span>
<a name="l01426"></a><a class="code" href="machine_8h.html#bccb1d7fcf07a49fc0445b847c31616b">01426</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SARV(R,S,N)                        \</span>
<a name="l01427"></a>01427 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_SARD(R,S,N) : AFLAGS_SARW(R,S,N))</span>
<a name="l01428"></a>01428 <span class="preprocessor"></span>
<a name="l01429"></a><a class="code" href="machine_8h.html#1c633b18156d5ad7eaeea572763dcd13">01429</a> <span class="preprocessor">#define AFLAGS_SHLDD(R,S,N)                        \</span>
<a name="l01430"></a>01430 <span class="preprocessor">  (MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x80000000) : UNDEF)        \</span>
<a name="l01431"></a>01431 <span class="preprocessor">   | MKSF((dword_t)(R) &gt;= 0x80000000)                    \</span>
<a name="l01432"></a>01432 <span class="preprocessor">   | MKZF((dword_t)(R) == 0)                        \</span>
<a name="l01433"></a>01433 <span class="preprocessor">   | MKAF(UNDEF)                            \</span>
<a name="l01434"></a>01434 <span class="preprocessor">   | MKCF(((S) &gt;&gt; (32 - (N))) &amp; 1)                    \</span>
<a name="l01435"></a>01435 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01436"></a><a class="code" href="machine_8h.html#1614dbed7749946a143290f0e0f36740">01436</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SHLDW(R,S,N)                        \</span>
<a name="l01437"></a>01437 <span class="preprocessor">  (MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x8000) : UNDEF)            \</span>
<a name="l01438"></a>01438 <span class="preprocessor">   | MKSF((word_t)(R) &gt;= 0x8000)                    \</span>
<a name="l01439"></a>01439 <span class="preprocessor">   | MKZF((word_t)(R) == 0)                        \</span>
<a name="l01440"></a>01440 <span class="preprocessor">   | MKAF(UNDEF)                            \</span>
<a name="l01441"></a>01441 <span class="preprocessor">   | MKCF(((S) &gt;&gt; (16 - (N))) &amp; 1)                    \</span>
<a name="l01442"></a>01442 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01443"></a><a class="code" href="machine_8h.html#4e63eab669ea660a72c689fe0195b8cf">01443</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SHLDV(R,S,N)                        \</span>
<a name="l01444"></a>01444 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_SHLDD(R,S,N) : AFLAGS_SHLDW(R,S,N))</span>
<a name="l01445"></a>01445 <span class="preprocessor"></span>
<a name="l01446"></a><a class="code" href="machine_8h.html#f5adb7512f1d1df3da6bc81082ddbccc">01446</a> <span class="preprocessor">#define AFLAGS_SHRDD(R,S,N)                        \</span>
<a name="l01447"></a>01447 <span class="preprocessor">  (MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x80000000) : UNDEF)        \</span>
<a name="l01448"></a>01448 <span class="preprocessor">   | MKSF((dword_t)(R) &gt;= 0x80000000)                    \</span>
<a name="l01449"></a>01449 <span class="preprocessor">   | MKZF((dword_t)(R) == 0)                        \</span>
<a name="l01450"></a>01450 <span class="preprocessor">   | MKAF(UNDEF)                            \</span>
<a name="l01451"></a>01451 <span class="preprocessor">   | MKCF(((S) &gt;&gt; ((N) - 1)) &amp; 1)                    \</span>
<a name="l01452"></a>01452 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01453"></a><a class="code" href="machine_8h.html#e533ba92f0347c02839517cf0697ff51">01453</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SHRDW(R,S,N)                        \</span>
<a name="l01454"></a>01454 <span class="preprocessor">  (MKOF(((N) == 1) ? (((S) ^ (R)) &amp; 0x8000) : UNDEF)            \</span>
<a name="l01455"></a>01455 <span class="preprocessor">   | MKSF((word_t)(R) &gt;= 0x8000)                    \</span>
<a name="l01456"></a>01456 <span class="preprocessor">   | MKZF((word_t)(R) == 0)                        \</span>
<a name="l01457"></a>01457 <span class="preprocessor">   | MKAF(UNDEF)                            \</span>
<a name="l01458"></a>01458 <span class="preprocessor">   | MKCF(((S) &gt;&gt; ((N) - 1)) &amp; 1)                    \</span>
<a name="l01459"></a>01459 <span class="preprocessor">   | MKPF(IS_EVEN_ONES((byte_t)(R))) )</span>
<a name="l01460"></a><a class="code" href="machine_8h.html#f27402faef6c4b973be11cba2e409948">01460</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_SHRDV(R,S,N)                        \</span>
<a name="l01461"></a>01461 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_SHRDD(R,S,N) : AFLAGS_SHRDW(R,S,N))</span>
<a name="l01462"></a>01462 <span class="preprocessor"></span>
<a name="l01463"></a>01463 <span class="comment">/* byte swap */</span>
<a name="l01464"></a><a class="code" href="machine_8h.html#a01acd94d7bba7e2ab188b2626e2c66f">01464</a> <span class="preprocessor">#define BSWAP(X)                            \</span>
<a name="l01465"></a>01465 <span class="preprocessor">  ((((X) &gt;&gt; 24) &amp; 0x000000ff)                        \</span>
<a name="l01466"></a>01466 <span class="preprocessor">   | (((X) &gt;&gt; 8) &amp; 0x0000ff00)                        \</span>
<a name="l01467"></a>01467 <span class="preprocessor">   | (((X) &lt;&lt; 8) &amp; 0x00ff0000)                        \</span>
<a name="l01468"></a>01468 <span class="preprocessor">   | (((X) &lt;&lt; 24) &amp; 0xff000000))</span>
<a name="l01469"></a>01469 <span class="preprocessor"></span>
<a name="l01470"></a>01470 <span class="comment">/* bit twiddlers */</span>
<a name="l01471"></a>01471 <span class="comment">/* FIXME: should undef all other flags */</span>
<a name="l01472"></a>01472 
<a name="l01473"></a><a class="code" href="machine_8h.html#09658e3a49c1701a97432061ff5fd77b">01473</a> <span class="preprocessor">#define BTS_V(X,N)        ((X) | (1 &lt;&lt; (N)))</span>
<a name="l01474"></a><a class="code" href="machine_8h.html#e1f43b2a6173063f5e88b5646cbe150d">01474</a> <span class="preprocessor"></span><span class="preprocessor">#define BTR_V(X,N)        ((X) &amp; ~((dword_t)1 &lt;&lt; (N)))</span>
<a name="l01475"></a><a class="code" href="machine_8h.html#48444c19613a792b9f23ea9778c47f14">01475</a> <span class="preprocessor"></span><span class="preprocessor">#define BTC_V(X,N)        ((X) ^ (1 &lt;&lt; (N)))</span>
<a name="l01476"></a><a class="code" href="machine_8h.html#24e2f40d5737b1bf4a37d44298598309">01476</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_BTV(X,N)        MKCF(((X) &gt;&gt; (N)) &amp; 0x01)</span>
<a name="l01477"></a>01477 <span class="preprocessor"></span>
<a name="l01478"></a>01478 <span class="comment">/* movsx/movzs primitives */</span>
<a name="l01479"></a><a class="code" href="machine_8h.html#fefeed2f35ef1c2705073c4314ae8f09">01479</a> <span class="preprocessor">#define MOVZX_WB(S)        ((word_t)(byte_t)(S))</span>
<a name="l01480"></a><a class="code" href="machine_8h.html#5274aafb10d875c1c69512181f2692ee">01480</a> <span class="preprocessor"></span><span class="preprocessor">#define MOVZX_DB(S)        ((dword_t)(byte_t)(S))</span>
<a name="l01481"></a><a class="code" href="machine_8h.html#b0b5671c5d72d72ce90736707d7d65a3">01481</a> <span class="preprocessor"></span><span class="preprocessor">#define MOVZX_WW(S)        ((word_t)(S))</span>
<a name="l01482"></a><a class="code" href="machine_8h.html#0064722dd9c5d6a832a7229f49096770">01482</a> <span class="preprocessor"></span><span class="preprocessor">#define MOVZX_DW(S)        ((dword_t)(word_t)(S))</span>
<a name="l01483"></a>01483 <span class="preprocessor"></span><span class="preprocessor">#if 1</span>
<a name="l01484"></a><a class="code" href="machine_8h.html#0eabba78c7a2ffbbed26656971d4b7fa">01484</a> <span class="preprocessor"></span><span class="preprocessor">#define MOVZX_VB(S)    ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? MOVZX_DB(S) : MOVZX_WB(S))</span>
<a name="l01485"></a><a class="code" href="machine_8h.html#5d917f73ba1758c54d4d99e31e92ca40">01485</a> <span class="preprocessor"></span><span class="preprocessor">#define MOVZX_VW(S)    ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? MOVZX_DW(S) : MOVZX_WW(S))</span>
<a name="l01486"></a>01486 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l01487"></a>01487 <span class="preprocessor"></span><span class="preprocessor">#define MOVZX_VB(S)                            \</span>
<a name="l01488"></a>01488 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l01489"></a>01489 <span class="preprocessor">   ? ((dword_t)(byte_t)(S))                        \</span>
<a name="l01490"></a>01490 <span class="preprocessor">   : ((word_t)(byte_t)(S)))</span>
<a name="l01491"></a>01491 <span class="preprocessor"></span><span class="preprocessor">#define MOVZX_VW(S)                            \</span>
<a name="l01492"></a>01492 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l01493"></a>01493 <span class="preprocessor">   ? ((dword_t)(word_t)(S))                        \</span>
<a name="l01494"></a>01494 <span class="preprocessor">   : ((word_t)(S)))</span>
<a name="l01495"></a>01495 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l01496"></a>01496 <span class="preprocessor"></span>
<a name="l01497"></a><a class="code" href="machine_8h.html#87e94afe8087b0d0feec3fcd296a98b4">01497</a> <span class="preprocessor">#define MOVSX_WB(S)        ((sword_t)(sbyte_t)(S))</span>
<a name="l01498"></a><a class="code" href="machine_8h.html#eec6b578b61b1619c849ea5d86a844a7">01498</a> <span class="preprocessor"></span><span class="preprocessor">#define MOVSX_DB(S)        ((sdword_t)(sbyte_t)(S))</span>
<a name="l01499"></a><a class="code" href="machine_8h.html#255fed00cb55f94fa1c67d4a3693d055">01499</a> <span class="preprocessor"></span><span class="preprocessor">#define MOVSX_WW(S)        ((sword_t)(S))</span>
<a name="l01500"></a><a class="code" href="machine_8h.html#7cddd8fef46afa9d2980fdead6e47438">01500</a> <span class="preprocessor"></span><span class="preprocessor">#define MOVSX_DW(S)        ((sdword_t)(sword_t)(S))</span>
<a name="l01501"></a>01501 <span class="preprocessor"></span><span class="preprocessor">#if 1</span>
<a name="l01502"></a><a class="code" href="machine_8h.html#5f69697f9c5955cfc24e5832b5d2de50">01502</a> <span class="preprocessor"></span><span class="preprocessor">#define MOVSX_VB(S)    ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? MOVSX_DB(S) : MOVSX_WB(S))</span>
<a name="l01503"></a><a class="code" href="machine_8h.html#5f9fd644f8e3052ef6f550192d551263">01503</a> <span class="preprocessor"></span><span class="preprocessor">#define MOVSX_VW(S)    ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? MOVSX_DW(S) : MOVSX_WW(S))</span>
<a name="l01504"></a>01504 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l01505"></a>01505 <span class="preprocessor"></span><span class="preprocessor">#define MOVSX_VB(S)                            \</span>
<a name="l01506"></a>01506 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l01507"></a>01507 <span class="preprocessor">   ? ((sdword_t)(sbyte_t)(S))                        \</span>
<a name="l01508"></a>01508 <span class="preprocessor">   : ((sword_t)(sbyte_t)(S)))</span>
<a name="l01509"></a>01509 <span class="preprocessor"></span><span class="preprocessor">#define MOVSX_VW(S)                            \</span>
<a name="l01510"></a>01510 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l01511"></a>01511 <span class="preprocessor">   ? ((sdword_t)(sword_t)(S))                        \</span>
<a name="l01512"></a>01512 <span class="preprocessor">   : ((sword_t)(S)))</span>
<a name="l01513"></a>01513 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l01514"></a>01514 <span class="preprocessor"></span>
<a name="l01515"></a>01515 <span class="comment">/* bit scan functions */</span>
<a name="l01516"></a><a class="code" href="machine_8h.html#42014216615332e795c9ee0f63724ba0">01516</a> <span class="preprocessor">#define BSF_W(S)    BSF_V(S)</span>
<a name="l01517"></a><a class="code" href="machine_8h.html#84ec9860375c8abb6e12e6e359521436">01517</a> <span class="preprocessor"></span><span class="preprocessor">#define BSF_D(S)    BSF_V(S)</span>
<a name="l01518"></a><a class="code" href="machine_8h.html#a94f71b3780b84fcfe5df54484d76cbe">01518</a> <span class="preprocessor"></span><span class="preprocessor">#define BSF_V(S)                            \</span>
<a name="l01519"></a>01519 <span class="preprocessor">  ({                                    \</span>
<a name="l01520"></a>01520 <span class="preprocessor">   dword_t idx = 0;                            \</span>
<a name="l01521"></a>01521 <span class="preprocessor">   \</span>
<a name="l01522"></a>01522 <span class="preprocessor">   if ((S) != 0)                            \</span>
<a name="l01523"></a>01523 <span class="preprocessor">   {                                \</span>
<a name="l01524"></a>01524 <span class="preprocessor">   while (((S) &amp; (1 &lt;&lt; idx)) == 0)                \</span>
<a name="l01525"></a>01525 <span class="preprocessor">   idx++;                            \</span>
<a name="l01526"></a>01526 <span class="preprocessor">   }                                \</span>
<a name="l01527"></a>01527 <span class="preprocessor">   idx;                                \</span>
<a name="l01528"></a>01528 <span class="preprocessor">   })</span>
<a name="l01529"></a>01529 <span class="preprocessor"></span><span class="comment">/* FIXME: should undef all other flags */</span>
<a name="l01530"></a><a class="code" href="machine_8h.html#54241488b0e670cea13c4d2ce9f1f117">01530</a> <span class="preprocessor">#define AFLAGS_BSFW(S)        MKZF((word_t)(S) == 0)</span>
<a name="l01531"></a><a class="code" href="machine_8h.html#2b5b3d9da6310d38f0c108fa3a8555af">01531</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_BSFD(S)        MKZF((dword_t)(S) == 0)</span>
<a name="l01532"></a><a class="code" href="machine_8h.html#4d539d031ac2b861096a1b2156a0d04d">01532</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_BSFV(S)                            \</span>
<a name="l01533"></a>01533 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_BSFD(S) : AFLAGS_BSFW(S))</span>
<a name="l01534"></a>01534 <span class="preprocessor"></span>
<a name="l01535"></a><a class="code" href="machine_8h.html#e1dda17dbedcc41ade71368a0d2cc665">01535</a> <span class="preprocessor">#define BSR_W(S)                            \</span>
<a name="l01536"></a>01536 <span class="preprocessor">  ({                                    \</span>
<a name="l01537"></a>01537 <span class="preprocessor">   dword_t idx = BITSIZE_W - 1;                    \</span>
<a name="l01538"></a>01538 <span class="preprocessor">   \</span>
<a name="l01539"></a>01539 <span class="preprocessor">   if ((S) != 0)                            \</span>
<a name="l01540"></a>01540 <span class="preprocessor">   {                                \</span>
<a name="l01541"></a>01541 <span class="preprocessor">   while (((S) &amp; (1 &lt;&lt; idx)) == 0)                \</span>
<a name="l01542"></a>01542 <span class="preprocessor">   idx--;                            \</span>
<a name="l01543"></a>01543 <span class="preprocessor">   }                                \</span>
<a name="l01544"></a>01544 <span class="preprocessor">   idx;                                \</span>
<a name="l01545"></a>01545 <span class="preprocessor">   })</span>
<a name="l01546"></a><a class="code" href="machine_8h.html#90a29fb4664000f56d006f5581abf862">01546</a> <span class="preprocessor"></span><span class="preprocessor">#define BSR_D(S)                            \</span>
<a name="l01547"></a>01547 <span class="preprocessor">  ({                                    \</span>
<a name="l01548"></a>01548 <span class="preprocessor">   dword_t idx = BITSIZE_D - 1;                    \</span>
<a name="l01549"></a>01549 <span class="preprocessor">   \</span>
<a name="l01550"></a>01550 <span class="preprocessor">   if ((S) != 0)                            \</span>
<a name="l01551"></a>01551 <span class="preprocessor">   {                                \</span>
<a name="l01552"></a>01552 <span class="preprocessor">   while (((S) &amp; (1 &lt;&lt; idx)) == 0)                \</span>
<a name="l01553"></a>01553 <span class="preprocessor">   idx--;                            \</span>
<a name="l01554"></a>01554 <span class="preprocessor">   }                                \</span>
<a name="l01555"></a>01555 <span class="preprocessor">   idx;                                \</span>
<a name="l01556"></a>01556 <span class="preprocessor">   })</span>
<a name="l01557"></a><a class="code" href="machine_8h.html#ffdd5a0678a1d012b1cc485f143ca0f2">01557</a> <span class="preprocessor"></span><span class="preprocessor">#define BSR_V(S)                            \</span>
<a name="l01558"></a>01558 <span class="preprocessor">  ({                                    \</span>
<a name="l01559"></a>01559 <span class="preprocessor">   dword_t idx = BITSIZE_V - 1;                    \</span>
<a name="l01560"></a>01560 <span class="preprocessor">   \</span>
<a name="l01561"></a>01561 <span class="preprocessor">   if ((S) != 0)                            \</span>
<a name="l01562"></a>01562 <span class="preprocessor">   {                                \</span>
<a name="l01563"></a>01563 <span class="preprocessor">   while (((S) &amp; (1 &lt;&lt; idx)) == 0)                \</span>
<a name="l01564"></a>01564 <span class="preprocessor">   idx--;                            \</span>
<a name="l01565"></a>01565 <span class="preprocessor">   }                                \</span>
<a name="l01566"></a>01566 <span class="preprocessor">   idx;                                \</span>
<a name="l01567"></a>01567 <span class="preprocessor">   })</span>
<a name="l01568"></a>01568 <span class="preprocessor"></span><span class="comment">/* FIXME: should undef all other flags */</span>
<a name="l01569"></a><a class="code" href="machine_8h.html#f5b62cd0290435a01f5f06cb0bf9d914">01569</a> <span class="preprocessor">#define AFLAGS_BSRW(S)        MKZF((word_t)(S) == 0)</span>
<a name="l01570"></a><a class="code" href="machine_8h.html#9987a04a1ac948f1a1ba7510d0451ef5">01570</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_BSRD(S)        MKZF((dword_t)(S) == 0)</span>
<a name="l01571"></a><a class="code" href="machine_8h.html#29004d2699327f13becad18c16c3e8d1">01571</a> <span class="preprocessor"></span><span class="preprocessor">#define AFLAGS_BSRV(S)                            \</span>
<a name="l01572"></a>01572 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? AFLAGS_BSRD(S) : AFLAGS_BSRW(S))</span>
<a name="l01573"></a>01573 <span class="preprocessor"></span>
<a name="l01574"></a>01574 <span class="comment">/* FCOM flag computation */</span>
<a name="l01575"></a><a class="code" href="machine_8h.html#29f47f69068e71b5888585b9155299e1">01575</a> <span class="preprocessor">#define FSW_FCOM(S1,S2)                            \</span>
<a name="l01576"></a>01576 <span class="preprocessor">  (((S1) &gt; (S2))                            \</span>
<a name="l01577"></a>01577 <span class="preprocessor">   ? (MKC3(0)|MKC2(0)|MKC0(0))                        \</span>
<a name="l01578"></a>01578 <span class="preprocessor">   : (((S1) &lt; (S2))                            \</span>
<a name="l01579"></a>01579 <span class="preprocessor">     ? (MKC3(0)|MKC2(0)|MKC0(1))                    \</span>
<a name="l01580"></a>01580 <span class="preprocessor">     : (((S1) == (S2))                            \</span>
<a name="l01581"></a>01581 <span class="preprocessor">       ? (MKC3(1)|MKC2(0)|MKC0(0))                    \</span>
<a name="l01582"></a>01582 <span class="preprocessor">       : (MKC3(1)|MKC2(1)|MKC0(1)))))</span>
<a name="l01583"></a>01583 <span class="preprocessor"></span>
<a name="l01584"></a>01584 <span class="comment">/* FUCOM flag computation */</span>
<a name="l01585"></a><a class="code" href="machine_8h.html#d0bb5bea4b36a417fb7b7c3bb0b5af65">01585</a> <span class="preprocessor">#define FSW_FUCOM(S1,S2)                        \</span>
<a name="l01586"></a>01586 <span class="preprocessor">  (((S1) &gt; (S2))                            \</span>
<a name="l01587"></a>01587 <span class="preprocessor">   ? (MKC3(0)|MKC2(0)|MKC0(0))                        \</span>
<a name="l01588"></a>01588 <span class="preprocessor">   : (((S1) &lt; (S2))                            \</span>
<a name="l01589"></a>01589 <span class="preprocessor">     ? (MKC3(0)|MKC2(0)|MKC0(1))                    \</span>
<a name="l01590"></a>01590 <span class="preprocessor">     : (((S1) == (S2))                            \</span>
<a name="l01591"></a>01591 <span class="preprocessor">       ? (MKC3(1)|MKC2(0)|MKC0(0))                    \</span>
<a name="l01592"></a>01592 <span class="preprocessor">       : (MKC3(1)|MKC2(1)|MKC0(1)))))</span>
<a name="l01593"></a>01593 <span class="preprocessor"></span>
<a name="l01594"></a>01594 <span class="comment">/* FCOMI flag computation */</span>
<a name="l01595"></a><a class="code" href="machine_8h.html#89c44caf48a751b051d108813b2459e5">01595</a> <span class="preprocessor">#define AFLAGS_FCOMI(S1,S2)                        \</span>
<a name="l01596"></a>01596 <span class="preprocessor">  (((S1) &gt; (S2))                            \</span>
<a name="l01597"></a>01597 <span class="preprocessor">   ? (MKZF(0)|MKPF(0)|MKCF(0))                        \</span>
<a name="l01598"></a>01598 <span class="preprocessor">   : (((S1) &lt; (S2))                            \</span>
<a name="l01599"></a>01599 <span class="preprocessor">     ? (MKZF(0)|MKPF(0)|MKZF(1))                    \</span>
<a name="l01600"></a>01600 <span class="preprocessor">     : (((S1) == (S2))                            \</span>
<a name="l01601"></a>01601 <span class="preprocessor">       ? (MKZF(1)|MKPF(0)|MKCF(0))                    \</span>
<a name="l01602"></a>01602 <span class="preprocessor">       : (MKZF(1)|MKPF(1)|MKCF(1)))))</span>
<a name="l01603"></a>01603 <span class="preprocessor"></span>
<a name="l01604"></a>01604 <span class="comment">/* FUCOMI flag computation */</span>
<a name="l01605"></a><a class="code" href="machine_8h.html#f13724a6cac5641f9b07d8a098e25a31">01605</a> <span class="preprocessor">#define AFLAGS_FUCOMI(S1,S2)                        \</span>
<a name="l01606"></a>01606 <span class="preprocessor">  (((S1) &gt; (S2))                            \</span>
<a name="l01607"></a>01607 <span class="preprocessor">   ? (MKZF(0)|MKPF(0)|MKCF(0))                        \</span>
<a name="l01608"></a>01608 <span class="preprocessor">   : (((S1) &lt; (S2))                            \</span>
<a name="l01609"></a>01609 <span class="preprocessor">     ? (MKZF(0)|MKPF(0)|MKZF(1))                    \</span>
<a name="l01610"></a>01610 <span class="preprocessor">     : (((S1) == (S2))                            \</span>
<a name="l01611"></a>01611 <span class="preprocessor">       ? (MKZF(1)|MKPF(0)|MKCF(0))                    \</span>
<a name="l01612"></a>01612 <span class="preprocessor">       : (MKZF(1)|MKPF(1)|MKCF(1)))))</span>
<a name="l01613"></a>01613 <span class="preprocessor"></span>
<a name="l01614"></a>01614 <span class="comment">/* FP constants */</span>
<a name="l01615"></a><a class="code" href="machine_8h.html#aee387392b9f738a7cfccb978fc59f23">01615</a> <span class="preprocessor">#define FPCONST(LC)                            \</span>
<a name="l01616"></a>01616 <span class="preprocessor">  ({                                    \</span>
<a name="l01617"></a>01617 <span class="preprocessor">   efloat_t _res;                            \</span>
<a name="l01618"></a>01618 <span class="preprocessor">   \</span>
<a name="l01619"></a>01619 <span class="preprocessor">   switch (LC)                            \</span>
<a name="l01620"></a>01620 <span class="preprocessor">   {                                \</span>
<a name="l01621"></a>01621 <span class="preprocessor">   case 0:    _res = 1.0; break;                    \</span>
<a name="l01622"></a>01622 <span class="preprocessor">   case 1:    _res = log(10.0)/log(2.0); break;            \</span>
<a name="l01623"></a>01623 <span class="preprocessor">   case 2:    _res = log(M_E)/log(2.0); break;            \</span>
<a name="l01624"></a>01624 <span class="preprocessor">   case 3:    _res = M_PI; break;                    \</span>
<a name="l01625"></a>01625 <span class="preprocessor">   case 4:    _res = log(2.0)/log(10.0); break;            \</span>
<a name="l01626"></a>01626 <span class="preprocessor">   case 5:    _res = log(2.0)/log(M_E); break;            \</span>
<a name="l01627"></a>01627 <span class="preprocessor">   case 6:    _res = 0.0; break;                    \</span>
<a name="l01628"></a>01628 <span class="preprocessor">   default:    panic("bogus FPCONST");                    \</span>
<a name="l01629"></a>01629 <span class="preprocessor">   }                                \</span>
<a name="l01630"></a>01630 <span class="preprocessor">   _res;                                \</span>
<a name="l01631"></a>01631 <span class="preprocessor">   })</span>
<a name="l01632"></a>01632 <span class="preprocessor"></span>
<a name="l01633"></a>01633 <span class="comment">/* branch conditions */</span>
<a name="l01634"></a><a class="code" href="machine_8h.html#7a21b8812f3026a091cd3be21e41c606">01634</a> <span class="preprocessor">#define CC_O        0</span>
<a name="l01635"></a><a class="code" href="machine_8h.html#be89b2b99bae311798eafff28172b019">01635</a> <span class="preprocessor"></span><span class="preprocessor">#define CC_NO        1</span>
<a name="l01636"></a><a class="code" href="machine_8h.html#def6c8a54ebdd07faf9ee4ef14d74c50">01636</a> <span class="preprocessor"></span><span class="preprocessor">#define CC_B        2</span>
<a name="l01637"></a><a class="code" href="machine_8h.html#f7410995051afd5bc19bacd295e5fe00">01637</a> <span class="preprocessor"></span><span class="preprocessor">#define CC_NB        3</span>
<a name="l01638"></a><a class="code" href="machine_8h.html#4b90dab48ec18c6e42fea57e141083fd">01638</a> <span class="preprocessor"></span><span class="preprocessor">#define CC_E        4</span>
<a name="l01639"></a><a class="code" href="machine_8h.html#98926d4e80b33d7b47617642fd7aaa24">01639</a> <span class="preprocessor"></span><span class="preprocessor">#define CC_NE        5</span>
<a name="l01640"></a><a class="code" href="machine_8h.html#7d5f0479422666966aef1d62b0f130df">01640</a> <span class="preprocessor"></span><span class="preprocessor">#define CC_BE        6</span>
<a name="l01641"></a><a class="code" href="machine_8h.html#85254e36ed6b4e36df65cccdd4ea501a">01641</a> <span class="preprocessor"></span><span class="preprocessor">#define CC_NBE        7</span>
<a name="l01642"></a><a class="code" href="machine_8h.html#61a632b57063c3be470c2e0bac9ac39b">01642</a> <span class="preprocessor"></span><span class="preprocessor">#define CC_S        8</span>
<a name="l01643"></a><a class="code" href="machine_8h.html#7ebf6a7fdc404f528f33d883af9aca9a">01643</a> <span class="preprocessor"></span><span class="preprocessor">#define CC_NS        9</span>
<a name="l01644"></a><a class="code" href="machine_8h.html#dd55d25ce8fb720437f643c1a17de20d">01644</a> <span class="preprocessor"></span><span class="preprocessor">#define CC_P        10</span>
<a name="l01645"></a><a class="code" href="machine_8h.html#f93f966dad7a3a1ea2d9541d9796d704">01645</a> <span class="preprocessor"></span><span class="preprocessor">#define CC_NP        11</span>
<a name="l01646"></a><a class="code" href="machine_8h.html#4df548c78cf7fbc798f80195894998e5">01646</a> <span class="preprocessor"></span><span class="preprocessor">#define CC_L        12</span>
<a name="l01647"></a><a class="code" href="machine_8h.html#404b0c22d1f7938c28664b07d7a93566">01647</a> <span class="preprocessor"></span><span class="preprocessor">#define CC_NL        13</span>
<a name="l01648"></a><a class="code" href="machine_8h.html#c1bbb821dd183ff1284ed3ee014bcf54">01648</a> <span class="preprocessor"></span><span class="preprocessor">#define CC_LE        14</span>
<a name="l01649"></a><a class="code" href="machine_8h.html#a2f3473aa0b4840adff76ffa49a42b0f">01649</a> <span class="preprocessor"></span><span class="preprocessor">#define CC_NLE        15</span>
<a name="l01650"></a>01650 <span class="preprocessor"></span>
<a name="l01651"></a>01651 <span class="comment">/* flags evaluator */</span>
<a name="l01652"></a>01652 <span class="keywordtype">int</span> <a class="code" href="machine_8h.html#02208c8c121b756de2eaef5b169ae3f4">md_cc_eval</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> cond, <span class="keyword">const</span> <a class="code" href="host_8h.html#064e4defdc308749258f722d81981cac">dword_t</a> aflags, <span class="keywordtype">bool</span> * bogus);
<a name="l01653"></a><a class="code" href="machine_8h.html#b8419b8877d2668126773984c7d5ce1b">01653</a> <span class="preprocessor">#define CC_EVAL(CC,F)        md_cc_eval(CC, F, bogus)</span>
<a name="l01654"></a>01654 <span class="preprocessor"></span>
<a name="l01655"></a>01655 <span class="comment">/* FP branch conditions */</span>
<a name="l01656"></a><a class="code" href="machine_8h.html#7cee1dd9fe0a40cca0f9de0c2412e330">01656</a> <span class="preprocessor">#define FCC_B        0</span>
<a name="l01657"></a><a class="code" href="machine_8h.html#4e9d2ae7333e6061a97e547754d8a8d0">01657</a> <span class="preprocessor"></span><span class="preprocessor">#define FCC_E        1</span>
<a name="l01658"></a><a class="code" href="machine_8h.html#bee99de2b79498ec311f87330ca22c82">01658</a> <span class="preprocessor"></span><span class="preprocessor">#define FCC_BE        2</span>
<a name="l01659"></a><a class="code" href="machine_8h.html#06e3c1167829a81774d20a317a56afd8">01659</a> <span class="preprocessor"></span><span class="preprocessor">#define FCC_U        3</span>
<a name="l01660"></a><a class="code" href="machine_8h.html#7dbacc93b1be0c2c73e278292e64df5b">01660</a> <span class="preprocessor"></span><span class="preprocessor">#define FCC_NB        4</span>
<a name="l01661"></a><a class="code" href="machine_8h.html#37a30499983a8a0b421b3ff28fc42f25">01661</a> <span class="preprocessor"></span><span class="preprocessor">#define FCC_NE        5</span>
<a name="l01662"></a><a class="code" href="machine_8h.html#d0cc6e0cc6186e06c77ce00fd319436d">01662</a> <span class="preprocessor"></span><span class="preprocessor">#define FCC_NBE        6</span>
<a name="l01663"></a><a class="code" href="machine_8h.html#363be85b47df3ee7b201c4f71590fe9f">01663</a> <span class="preprocessor"></span><span class="preprocessor">#define FCC_NU        7</span>
<a name="l01664"></a>01664 <span class="preprocessor"></span>
<a name="l01665"></a>01665 <span class="comment">/* floating point flags evaluator */</span>
<a name="l01666"></a>01666 <span class="keywordtype">int</span> <a class="code" href="machine_8h.html#1dcf253ea0314c82c9fc5b1697a84721">md_fcc_eval</a>(<span class="keywordtype">int</span> cond, <a class="code" href="host_8h.html#064e4defdc308749258f722d81981cac">dword_t</a> aflags, <span class="keywordtype">bool</span> * bogus);
<a name="l01667"></a><a class="code" href="machine_8h.html#49dc7f32d7fef90b6e2f63aaf8778825">01667</a> <span class="preprocessor">#define FCC_EVAL(FCC,F)        md_fcc_eval(FCC, F, bogus)</span>
<a name="l01668"></a>01668 <span class="preprocessor"></span>
<a name="l01669"></a>01669 <span class="comment">/* mode-specific constants */</span>
<a name="l01670"></a><a class="code" href="machine_8h.html#1fef9e7ada729f067830f0704cb85cc1">01670</a> <span class="preprocessor">#define SIZE_V            ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? 4 : 2)</span>
<a name="l01671"></a><a class="code" href="machine_8h.html#ee0629d912935d46433c67646c7eab2f">01671</a> <span class="preprocessor"></span><span class="preprocessor">#define BITSIZE_V        ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? 32 : 16)</span>
<a name="l01672"></a><a class="code" href="machine_8h.html#1bc2543cd0e11abe29c9eba6b2bb2076">01672</a> <span class="preprocessor"></span><span class="preprocessor">#define LOGSIZE_V        ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? 2 : 1)</span>
<a name="l01673"></a><a class="code" href="machine_8h.html#b25257f4a3fd8b0a326c74c73e25fb7a">01673</a> <span class="preprocessor"></span><span class="preprocessor">#define LOGBITSIZE_V        ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32) ? 5 : 4)</span>
<a name="l01674"></a>01674 <span class="preprocessor"></span>
<a name="l01675"></a>01675 <span class="comment">/* variable sign extension */</span>
<a name="l01676"></a><a class="code" href="machine_8h.html#4100b854e931f3949c3597464f715649">01676</a> <span class="preprocessor">#define SIGN_V(X)                            \</span>
<a name="l01677"></a>01677 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)                        \</span>
<a name="l01678"></a>01678 <span class="preprocessor">   ? (((X) &amp; 0x80000000) ? 0xffffffff : 0x00000000)            \</span>
<a name="l01679"></a>01679 <span class="preprocessor">   : (((X) &amp; 0x8000) ? 0xffff : 0x0000))</span>
<a name="l01680"></a>01680 <span class="preprocessor"></span>
<a name="l01681"></a><a class="code" href="machine_8h.html#9fad2bff836f3e8fdbdad9948b851ca6">01681</a> <span class="preprocessor">#define QW2E(S1,S2)                            \</span>
<a name="l01682"></a>01682 <span class="preprocessor">  ({ union { efloat_t e; struct { qword_t lo; dword_t hi; } d; } x;    \</span>
<a name="l01683"></a>01683 <span class="preprocessor">   x.d.lo = S1;                            \</span>
<a name="l01684"></a>01684 <span class="preprocessor">   x.d.hi = S2;                            \</span>
<a name="l01685"></a>01685 <span class="preprocessor">   x.e;                                \</span>
<a name="l01686"></a>01686 <span class="preprocessor">   })</span>
<a name="l01687"></a>01687 <span class="preprocessor"></span>
<a name="l01688"></a><a class="code" href="machine_8h.html#ab6a3735e802d72da5a950cc6d745a70">01688</a> <span class="preprocessor">#define E2Qw(E)                                \</span>
<a name="l01689"></a>01689 <span class="preprocessor">  ({ union { efloat_t e; struct { qword_t lo; dword_t hi; } d; } x;    \</span>
<a name="l01690"></a>01690 <span class="preprocessor">   x.e = E;                                \</span>
<a name="l01691"></a>01691 <span class="preprocessor">   x.d.lo;                                \</span>
<a name="l01692"></a>01692 <span class="preprocessor">   })</span>
<a name="l01693"></a>01693 <span class="preprocessor"></span>
<a name="l01694"></a><a class="code" href="machine_8h.html#0987463bbada0862d670e47a47af4b9a">01694</a> <span class="preprocessor">#define E2qW(E)                                \</span>
<a name="l01695"></a>01695 <span class="preprocessor">  ({ union { efloat_t e; struct { qword_t lo; dword_t hi; } d; } x;    \</span>
<a name="l01696"></a>01696 <span class="preprocessor">   x.e = E;                                \</span>
<a name="l01697"></a>01697 <span class="preprocessor">   x.d.hi;                                \</span>
<a name="l01698"></a>01698 <span class="preprocessor">   })</span>
<a name="l01699"></a>01699 <span class="preprocessor"></span>
<a name="l01700"></a>01700 
<a name="l01701"></a>01701 <span class="comment">/* default target PC handling */</span>
<a name="l01702"></a>01702 <span class="preprocessor">#ifndef SET_TPC</span>
<a name="l01703"></a><a class="code" href="machine_8h.html#a011a999c5e6ef0a7aa0cba5164732d3">01703</a> <span class="preprocessor"></span><span class="preprocessor">#define SET_TPC(PC)    Mop-&gt;decode.targetPC = (PC)</span>
<a name="l01704"></a><a class="code" href="machine_8h.html#8fae07831c62c46a01a9e17d05035282">01704</a> <span class="preprocessor"></span><span class="preprocessor">#define SET_TPC_D(PC)    Mop-&gt;decode.targetPC = (PC)</span>
<a name="l01705"></a><a class="code" href="machine_8h.html#905eaae44b309e1dc6ba3ebe5a84cacb">01705</a> <span class="preprocessor"></span><span class="preprocessor">#define SET_TPC_V(PC)    Mop-&gt;decode.targetPC = (PC)</span>
<a name="l01706"></a>01706 <span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* SET_TPC */</span>
<a name="l01707"></a>01707 
<a name="l01708"></a>01708 <span class="comment">/*</span>
<a name="l01709"></a>01709 <span class="comment"> * various other helper macros/functions</span>
<a name="l01710"></a>01710 <span class="comment"> */</span>
<a name="l01711"></a>01711 
<a name="l01712"></a>01712 <span class="comment">/* non-zero if system call is an exit() */</span>
<a name="l01713"></a><a class="code" href="machine_8h.html#e4233ea2aa5dded566be719352586c2d">01713</a> <span class="preprocessor">#define OSF_SYS_exit            1</span>
<a name="l01714"></a><a class="code" href="machine_8h.html#0006ef49ba5b188c9fbe12536b91d321">01714</a> <span class="preprocessor"></span><span class="preprocessor">#define MD_EXIT_SYSCALL(INST,REGS)                        \</span>
<a name="l01715"></a>01715 <span class="preprocessor">  ((REGS)-&gt;regs_R.dw[MD_REG_EAX] == OSF_SYS_exit)</span>
<a name="l01716"></a>01716 <span class="preprocessor"></span>
<a name="l01717"></a>01717 <span class="comment">/* non-zero if system call is a write to stdout/stderr */</span>
<a name="l01718"></a><a class="code" href="machine_8h.html#b3490dcba9d82cc588450bddbb60de79">01718</a> <span class="preprocessor">#define OSF_SYS_write            4</span>
<a name="l01719"></a><a class="code" href="machine_8h.html#a99f44802053357e3f8fa76ec4b18875">01719</a> <span class="preprocessor"></span><span class="preprocessor">#define MD_OUTPUT_SYSCALL(INST,REGS)                        \</span>
<a name="l01720"></a>01720 <span class="preprocessor">  ((REGS)-&gt;regs_R.dw[MD_REG_EAX] == OSF_SYS_write            \</span>
<a name="l01721"></a>01721 <span class="preprocessor">   &amp;&amp; ((REGS)-&gt;regs_R.dw[MD_REG_EBX] == </span><span class="comment">/* stdout */</span>1            \
<a name="l01722"></a>01722      || (REGS)-&gt;regs_R.dw[MD_REG_EBX] == <span class="comment">/* stderr */</span>2))
<a name="l01723"></a>01723 
<a name="l01724"></a>01724 <span class="comment">/* returns stream of an output system call, translated to host */</span>
<a name="l01725"></a><a class="code" href="machine_8h.html#85f80c8824582c21955972b4f14de5c0">01725</a> <span class="preprocessor">#define MD_STREAM_FILENO(REGS)        ((REGS)-&gt;regs_R.dw[MD_REG_EBX])</span>
<a name="l01726"></a>01726 <span class="preprocessor"></span>
<a name="l01727"></a>01727 <span class="comment">/* XXX returns non-zero if instruction is a function call */</span>
<a name="l01728"></a><a class="code" href="machine_8h.html#bf65ee55212eb809f05a065fabe7a2a9">01728</a> <span class="preprocessor">#define MD_IS_CALL(OPFLAGS)          ((OPFLAGS)&amp;F_CALL)</span>
<a name="l01729"></a>01729 <span class="preprocessor"></span>
<a name="l01730"></a>01730 <span class="comment">/* returns non-zero if instruction is a function return */</span>
<a name="l01731"></a><a class="code" href="machine_8h.html#932b9c157a6c858890733a539ca8eb20">01731</a> <span class="preprocessor">#define MD_IS_RETURN(OPFLAGS)        ((OPFLAGS)&amp;F_RETN)</span>
<a name="l01732"></a>01732 <span class="preprocessor"></span>
<a name="l01733"></a>01733 <span class="comment">/* returns non-zero if instruction is an indirect jump */</span>
<a name="l01734"></a><a class="code" href="machine_8h.html#9729eca40d73fc314c6e7ed787fe0e4c">01734</a> <span class="preprocessor">#define MD_IS_INDIR(OPFLAGS)         ((OPFLAGS)&amp;F_INDIRJMP)</span>
<a name="l01735"></a>01735 <span class="preprocessor"></span>
<a name="l01736"></a>01736 <span class="comment">/* globbing/fusion masks */</span>
<a name="l01737"></a><a class="code" href="machine_8h.html#8e03b82030d543e12f9a743a6aa3836c">01737</a> <span class="preprocessor">#define FUSION_NONE 0x0000LL</span>
<a name="l01738"></a><a class="code" href="machine_8h.html#6292ed12304eb645f1f5e87ec124d0dc">01738</a> <span class="preprocessor"></span><span class="preprocessor">#define FUSION_LOAD_OP 0x0001LL</span>
<a name="l01739"></a><a class="code" href="machine_8h.html#8c844a7367fc58bd77d3bebfe1e4767c">01739</a> <span class="preprocessor"></span><span class="preprocessor">#define FUSION_STA_STD 0x0002LL</span>
<a name="l01740"></a><a class="code" href="machine_8h.html#5933c9cf8c170ff4e5490fd95ee4871a">01740</a> <span class="preprocessor"></span><span class="preprocessor">#define FUSION_PARTIAL 0x0004LL  </span><span class="comment">/* for partial-register-write merging uops */</span>
<a name="l01741"></a>01741 <span class="comment">/* to add: OP_OP, OP_ST */</span>
<a name="l01742"></a>01742 
<a name="l01743"></a><a class="code" href="machine_8h.html#3e1758a64e4b5e964fbc8d6642fa7023">01743</a> <span class="preprocessor">#define FUSION_TYPE(uop) (((uop_inst_t)((uop)-&gt;decode.raw_op)) &gt;&gt; 32)</span>
<a name="l01744"></a>01744 <span class="preprocessor"></span>
<a name="l01745"></a>01745 
<a name="l01746"></a>01746 <span class="comment">/*</span>
<a name="l01747"></a>01747 <span class="comment"> * EIO package configuration/macros</span>
<a name="l01748"></a>01748 <span class="comment"> */</span>
<a name="l01749"></a>01749 
<a name="l01750"></a>01750 <span class="comment">/* expected EIO file format */</span>
<a name="l01751"></a><a class="code" href="machine_8h.html#582be4cbf2f4d1d37a8deeb4552136e3">01751</a> <span class="preprocessor">#define MD_EIO_FILE_FORMAT  EIO_X86_FORMAT</span>
<a name="l01752"></a>01752 <span class="preprocessor"></span>
<a name="l01753"></a><a class="code" href="machine_8h.html#92a55c1875843ba9a3550f774e6a8778">01753</a> <span class="preprocessor">#define MD_MISC_REGS_TO_EXO(REGS)                    \</span>
<a name="l01754"></a>01754 <span class="preprocessor">  exo_new(ec_list,                            \</span>
<a name="l01755"></a>01755 <span class="preprocessor">      </span><span class="comment">/*icnt*/</span>exo_new(ec_integer, (exo_integer_t)thread-&gt;stat.num_insn),    \
<a name="l01756"></a>01756       <span class="comment">/*PC*/</span>exo_new(ec_address, (exo_integer_t)(REGS)-&gt;regs_PC),    \
<a name="l01757"></a>01757       <span class="comment">/*NPC*/</span>exo_new(ec_address, (exo_integer_t)(REGS)-&gt;regs_NPC),    \
<a name="l01758"></a>01758       <span class="comment">/*aflags*/</span>exo_new(ec_address, (exo_integer_t)(REGS)-&gt;regs_C.aflags),    \
<a name="l01759"></a>01759       <span class="comment">/*cwd*/</span>exo_new(ec_address, (exo_integer_t)(REGS)-&gt;regs_C.cwd),    \
<a name="l01760"></a>01760       <span class="comment">/*fsw*/</span>exo_new(ec_address, (exo_integer_t)(REGS)-&gt;regs_C.fsw),    \
<a name="l01761"></a>01761       NULL)
<a name="l01762"></a>01762 
<a name="l01763"></a><a class="code" href="machine_8h.html#7e8e72605ceeeff6cc74197fe3a1aee3">01763</a> <span class="preprocessor">#define MD_IREG_TO_EXO(REGS, IDX)                    \</span>
<a name="l01764"></a>01764 <span class="preprocessor">    exo_new(ec_address, (exo_integer_t)(REGS)-&gt;regs_R.dw[IDX])</span>
<a name="l01765"></a>01765 <span class="preprocessor"></span>
<a name="l01766"></a><a class="code" href="machine_8h.html#f780a95b70ee72e2c82b4737782e0f1f">01766</a> <span class="preprocessor">#define MD_FREG_TO_EXO(REGS, IDX)                    \</span>
<a name="l01767"></a>01767 <span class="preprocessor">    exo_new(ec_address, (exo_integer_t)(REGS)-&gt;regs_F.e[IDX])</span>
<a name="l01768"></a>01768 <span class="preprocessor"></span>
<a name="l01769"></a><a class="code" href="machine_8h.html#4db1bfc53308fafecb48648e6640df90">01769</a> <span class="preprocessor">#define MD_SREG_TO_EXO(REGS, IDX)                    \</span>
<a name="l01770"></a>01770 <span class="preprocessor">    exo_new(ec_address, (exo_integer_t)(REGS)-&gt;regs_S.w[IDX])</span>
<a name="l01771"></a>01771 <span class="preprocessor"></span>
<a name="l01772"></a>01772 <span class="comment">/* Gabe */</span>
<a name="l01773"></a><a class="code" href="machine_8h.html#4e4590cf3e0e070621646417b7104056">01773</a> <span class="preprocessor">#define MD_EXO_TO_MISC_REGS(EXO, ICNT, REGS)                \</span>
<a name="l01774"></a>01774 <span class="preprocessor">    </span><span class="comment">/* check EXO format for errors... */</span>                    \
<a name="l01775"></a>01775   if (!exo                                \
<a name="l01776"></a>01776       || exo-&gt;ec != ec_list                        \
<a name="l01777"></a>01777       || !exo-&gt;as_list.head                        \
<a name="l01778"></a>01778       || exo-&gt;as_list.head-&gt;ec != ec_integer                \
<a name="l01779"></a>01779       || !exo-&gt;as_list.head-&gt;next                    \
<a name="l01780"></a>01780       || exo-&gt;as_list.head-&gt;next-&gt;ec != ec_address            \
<a name="l01781"></a>01781       || !exo-&gt;as_list.head-&gt;next-&gt;next                    \
<a name="l01782"></a>01782       || exo-&gt;as_list.head-&gt;next-&gt;next-&gt;ec != ec_address        \
<a name="l01783"></a>01783       || !exo-&gt;as_list.head-&gt;next-&gt;next-&gt;next                \
<a name="l01784"></a>01784       || exo-&gt;as_list.head-&gt;next-&gt;next-&gt;next-&gt;ec != ec_address        \
<a name="l01785"></a>01785       || !exo-&gt;as_list.head-&gt;next-&gt;next-&gt;next-&gt;next            \
<a name="l01786"></a>01786       || exo-&gt;as_list.head-&gt;next-&gt;next-&gt;next-&gt;next-&gt;ec != ec_address    \
<a name="l01787"></a>01787       || !exo-&gt;as_list.head-&gt;next-&gt;next-&gt;next-&gt;next-&gt;next            \
<a name="l01788"></a>01788       || exo-&gt;as_list.head-&gt;next-&gt;next-&gt;next-&gt;next-&gt;next-&gt;ec != ec_address    \
<a name="l01789"></a>01789       || exo-&gt;as_list.head-&gt;next-&gt;next-&gt;next-&gt;next-&gt;next-&gt;next != NULL)    \
<a name="l01790"></a>01790   fatal("could not read EIO misc regs");                \
<a name="l01791"></a>01791   (ICNT) = (counter_t)exo-&gt;as_list.head-&gt;as_integer.val;        \
<a name="l01792"></a>01792   (REGS)-&gt;regs_PC = (md_addr_t)exo-&gt;as_list.head-&gt;next-&gt;as_integer.val;    \
<a name="l01793"></a>01793   (REGS)-&gt;regs_NPC = (md_addr_t)exo-&gt;as_list.head-&gt;next-&gt;next-&gt;as_integer.val; \
<a name="l01794"></a>01794   (REGS)-&gt;regs_C.aflags = (dword_t)exo-&gt;as_list.head-&gt;next-&gt;next-&gt;next-&gt;as_integer.val; \
<a name="l01795"></a>01795   (REGS)-&gt;regs_C.cwd = (word_t)exo-&gt;as_list.head-&gt;next-&gt;next-&gt;next-&gt;next-&gt;as_integer.val; \
<a name="l01796"></a>01796   (REGS)-&gt;regs_C.fsw = (word_t)exo-&gt;as_list.head-&gt;next-&gt;next-&gt;next-&gt;next-&gt;next-&gt;as_integer.val;
<a name="l01797"></a>01797 
<a name="l01798"></a><a class="code" href="machine_8h.html#5692fba8a100469744196af18d121956">01798</a> <span class="preprocessor">#define MD_EXO_TO_IREG(EXO, REGS, IDX)                    \</span>
<a name="l01799"></a>01799 <span class="preprocessor">    ((REGS)-&gt;regs_R.dw[IDX] = (qword_t)(EXO)-&gt;as_integer.val)</span>
<a name="l01800"></a>01800 <span class="preprocessor"></span>
<a name="l01801"></a><a class="code" href="machine_8h.html#3185c111af4beb2cd109572818f03d3b">01801</a> <span class="preprocessor">#define MD_EXO_TO_FREG(EXO, REGS, IDX)                    \</span>
<a name="l01802"></a>01802 <span class="preprocessor">    ((REGS)-&gt;regs_F.e[IDX] = (qword_t)(EXO)-&gt;as_integer.val)</span>
<a name="l01803"></a>01803 <span class="preprocessor"></span>
<a name="l01804"></a><a class="code" href="machine_8h.html#d73e6c6b8c1e27d02dca6d852b5b4d6a">01804</a> <span class="preprocessor">#define MD_EXO_TO_SREG(EXO, REGS, IDX)                    \</span>
<a name="l01805"></a>01805 <span class="preprocessor">    ((REGS)-&gt;regs_S.w[IDX] = (word_t)(EXO)-&gt;as_integer.val)</span>
<a name="l01806"></a>01806 <span class="preprocessor"></span>
<a name="l01807"></a><a class="code" href="machine_8h.html#3c7516d2d8c5675a4731bde50468195f">01807</a> <span class="preprocessor">#define MD_EXO_CMP_IREG(EXO, REGS, IDX)                    \</span>
<a name="l01808"></a>01808 <span class="preprocessor">    ((REGS)-&gt;regs_R.dw[IDX] != (qword_t)(EXO)-&gt;as_integer.val)</span>
<a name="l01809"></a>01809 <span class="preprocessor"></span>
<a name="l01810"></a>01810   <span class="comment">/*</span>
<a name="l01811"></a>01811 <span class="comment">   * configure the EXO package</span>
<a name="l01812"></a>01812 <span class="comment">   */</span>
<a name="l01813"></a>01813 
<a name="l01814"></a>01814   <span class="comment">/* EXO pointer class */</span>
<a name="l01815"></a><a class="code" href="machine_8h.html#6ebeb858f9326a0ab31f2dbd07fdc797">01815</a>   <span class="keyword">typedef</span> qword_t <a class="code" href="machine_8h.html#6ebeb858f9326a0ab31f2dbd07fdc797">exo_address_t</a>;
<a name="l01816"></a>01816 
<a name="l01817"></a>01817   <span class="comment">/* EXO integer class, 64-bit encoding */</span>
<a name="l01818"></a><a class="code" href="machine_8h.html#9bc82bf074be97d3b9684417125e9448">01818</a>   <span class="keyword">typedef</span> qword_t <a class="code" href="machine_8h.html#9bc82bf074be97d3b9684417125e9448">exo_integer_t</a>;
<a name="l01819"></a>01819 
<a name="l01820"></a>01820   <span class="comment">/* EXO floating point class, 64-bit encoding */</span>
<a name="l01821"></a><a class="code" href="machine_8h.html#1e0eec611b1473a5d69539ef6a6a1ce0">01821</a>   <span class="keyword">typedef</span> <span class="keywordtype">double</span> <a class="code" href="machine_8h.html#1e0eec611b1473a5d69539ef6a6a1ce0">exo_float_t</a>;
<a name="l01822"></a>01822 
<a name="l01823"></a>01823 
<a name="l01824"></a>01824   <span class="comment">/*</span>
<a name="l01825"></a>01825 <span class="comment">   * configure the stats package</span>
<a name="l01826"></a>01826 <span class="comment">   */</span>
<a name="l01827"></a>01827 
<a name="l01828"></a>01828   <span class="comment">/* counter stats */</span>
<a name="l01829"></a><a class="code" href="machine_8h.html#d5b220607569cd144bbc637326632a1d">01829</a> <span class="preprocessor">#define stat_reg_counter        stat_reg_sqword</span>
<a name="l01830"></a><a class="code" href="machine_8h.html#ecb254e27703730ab2b9d79c40b8defc">01830</a> <span class="preprocessor"></span><span class="preprocessor">#define sc_counter            sc_sqword</span>
<a name="l01831"></a><a class="code" href="machine_8h.html#eadc825bc5839c6e9b79b5696cd59e24">01831</a> <span class="preprocessor"></span><span class="preprocessor">#define for_counter            for_sqword</span>
<a name="l01832"></a>01832 <span class="preprocessor"></span>
<a name="l01833"></a>01833   <span class="comment">/* address stats */</span>
<a name="l01834"></a><a class="code" href="machine_8h.html#fac0d75c69f960996fcdaac436eb2e2a">01834</a> <span class="preprocessor">#define stat_reg_addr            stat_reg_uint</span>
<a name="l01835"></a>01835 <span class="preprocessor"></span>
<a name="l01836"></a>01836 
<a name="l01837"></a>01837   <span class="comment">/*</span>
<a name="l01838"></a>01838 <span class="comment">   * configure the DLite! debugger</span>
<a name="l01839"></a>01839 <span class="comment">   */</span>
<a name="l01840"></a>01840 
<a name="l01841"></a>01841   <span class="comment">/* register bank specifier */</span>
<a name="l01842"></a><a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95">01842</a>   <span class="keyword">enum</span> <a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95">md_reg_type</a> {
<a name="l01843"></a><a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95a341750a418a2d8b3a9cf20c7007ac52">01843</a>     <a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95a341750a418a2d8b3a9cf20c7007ac52">rt_gpr</a>,        <span class="comment">/* general purpose register */</span>
<a name="l01844"></a><a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe9531974c1e7a740fc95373033a1d1abcd4">01844</a>     <a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe9531974c1e7a740fc95373033a1d1abcd4">rt_lpr</a>,        <span class="comment">/* integer-precision floating pointer register */</span>
<a name="l01845"></a><a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95060f1ed401df3f0ccd8da92bcc315893">01845</a>     <a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95060f1ed401df3f0ccd8da92bcc315893">rt_fpr</a>,        <span class="comment">/* single-precision floating pointer register */</span>
<a name="l01846"></a><a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95b62937bb4aea6e78abbee60c86f6b58b">01846</a>     <a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95b62937bb4aea6e78abbee60c86f6b58b">rt_dpr</a>,        <span class="comment">/* double-precision floating pointer register */</span>
<a name="l01847"></a><a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95809d614eb1ba85d3e35c4fd426a16c33">01847</a>     <a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95809d614eb1ba85d3e35c4fd426a16c33">rt_ctrl</a>,        <span class="comment">/* control register */</span>
<a name="l01848"></a><a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe9545e9bbbc0f1d8d0ae1ea0353b373aa28">01848</a>     <a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe9545e9bbbc0f1d8d0ae1ea0353b373aa28">rt_PC</a>,        <span class="comment">/* program counter */</span>
<a name="l01849"></a><a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95f241a732b617943443ef8c62409ff519">01849</a>     <a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95f241a732b617943443ef8c62409ff519">rt_NPC</a>,        <span class="comment">/* next program counter */</span>
<a name="l01850"></a><a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95c159371ab627703b5e246b22548d6e9a">01850</a>     <a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95c159371ab627703b5e246b22548d6e9a">rt_NUM</a>
<a name="l01851"></a>01851   };
<a name="l01852"></a>01852 
<a name="l01853"></a>01853 <span class="comment">/* register name specifier */</span>
<a name="l01854"></a><a class="code" href="structmd__reg__names__t.html">01854</a> <span class="keyword">struct </span><a class="code" href="structmd__reg__names__t.html">md_reg_names_t</a> {
<a name="l01855"></a><a class="code" href="structmd__reg__names__t.html#e8be66f6e3b5516bf30e4223d631860c">01855</a>   <span class="keywordtype">char</span> *<a class="code" href="structmd__reg__names__t.html#e8be66f6e3b5516bf30e4223d631860c">str</a>;            <span class="comment">/* register name */</span>
<a name="l01856"></a><a class="code" href="structmd__reg__names__t.html#62c5506d5f90415b3d3d7cb4f84b4410">01856</a>   <span class="keyword">enum</span> <a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95">md_reg_type</a> <a class="code" href="structmd__reg__names__t.html#62c5506d5f90415b3d3d7cb4f84b4410">file</a>;    <span class="comment">/* register file */</span>
<a name="l01857"></a><a class="code" href="structmd__reg__names__t.html#4e24e3d1c05375b32466906831a8db24">01857</a>   <span class="keywordtype">int</span> <a class="code" href="structmd__reg__names__t.html#4e24e3d1c05375b32466906831a8db24">reg</a>;            <span class="comment">/* register index */</span>
<a name="l01858"></a>01858 };
<a name="l01859"></a>01859 
<a name="l01860"></a>01860 <span class="comment">/* symbolic register names, parser is case-insensitive */</span>
<a name="l01861"></a>01861 <span class="keyword">extern</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structmd__reg__names__t.html">md_reg_names_t</a> <a class="code" href="machine_8h.html#f09067c20691d3ae255145b7eee302c2">md_reg_names</a>[];
<a name="l01862"></a>01862 
<a name="l01863"></a>01863 <span class="comment">/* returns a register name string */</span>
<a name="l01864"></a>01864 <span class="keywordtype">char</span> *<a class="code" href="machine_8h.html#23de52be525515e7ed07747171d4b9f2">md_reg_name</a>(<span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95">md_reg_type</a> rt, <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="structmd__reg__names__t.html#4e24e3d1c05375b32466906831a8db24">reg</a>);
<a name="l01865"></a>01865 
<a name="l01866"></a>01866 <span class="comment">/* default register accessor object */</span>
<a name="l01867"></a>01867 <span class="keyword">struct </span><a class="code" href="structeval__value__t.html">eval_value_t</a>;
<a name="l01868"></a>01868 <span class="keyword">struct </span><a class="code" href="structregs__t.html">regs_t</a>;
<a name="l01869"></a>01869 <span class="keywordtype">char</span> *                        <span class="comment">/* err str, NULL for no err */</span>
<a name="l01870"></a>01870 <a class="code" href="machine_8h.html#fa935106d254788ae71585b12ca3513f">md_reg_obj</a>(<span class="keyword">struct</span> <a class="code" href="structregs__t.html">regs_t</a> *regs,            <span class="comment">/* registers to access */</span>
<a name="l01871"></a>01871     <span class="keyword">const</span> <span class="keywordtype">int</span> is_write,            <span class="comment">/* access type */</span>
<a name="l01872"></a>01872     <span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#b913f5152bd861a2af665fc0c0e1fe95">md_reg_type</a> rt,            <span class="comment">/* reg bank to probe */</span>
<a name="l01873"></a>01873     <span class="keyword">const</span> <span class="keywordtype">int</span> reg,                <span class="comment">/* register number */</span>
<a name="l01874"></a>01874     <span class="keyword">struct</span> <a class="code" href="structeval__value__t.html">eval_value_t</a> *val);        <span class="comment">/* input, output */</span>
<a name="l01875"></a>01875 
<a name="l01876"></a>01876 <span class="comment">/* print integer REG(S) to STREAM */</span>
<a name="l01877"></a>01877 <span class="keywordtype">void</span> <a class="code" href="machine_8h.html#d2872c3d7d3f6444d4b2ed021b395bdf">md_print_ireg</a>(<a class="code" href="unionmd__gpr__t.html">md_gpr_t</a> regs, <span class="keywordtype">int</span> reg, FILE *stream);
<a name="l01878"></a>01878 <span class="keywordtype">void</span> <a class="code" href="machine_8h.html#78af4de2726cf1bda20814d901e94bef">md_print_iregs</a>(<a class="code" href="unionmd__gpr__t.html">md_gpr_t</a> regs, FILE *stream);
<a name="l01879"></a>01879 
<a name="l01880"></a>01880 <span class="comment">/* print floating point REG(S) to STREAM */</span>
<a name="l01881"></a>01881 <span class="keywordtype">void</span> <a class="code" href="machine_8h.html#c6539850566eea9b94adbe806aca950b">md_print_fpreg</a>(<a class="code" href="unionmd__fpr__t.html">md_fpr_t</a> regs, <span class="keywordtype">int</span> reg, FILE *stream);
<a name="l01882"></a>01882 <span class="keywordtype">void</span> <a class="code" href="machine_8h.html#523a6c3f36c87d3ec1fd1ea52c8f63f1">md_print_fpregs</a>(<a class="code" href="unionmd__fpr__t.html">md_fpr_t</a> regs, FILE *stream);
<a name="l01883"></a>01883 
<a name="l01884"></a>01884 <span class="comment">/* print control REG(S) to STREAM */</span>
<a name="l01885"></a>01885 <span class="keywordtype">void</span> <a class="code" href="machine_8h.html#c63d5f30104aa29479fdc91822077b54">md_print_creg</a>(<a class="code" href="structmd__ctrl__t.html">md_ctrl_t</a> regs, <span class="keywordtype">int</span> reg, FILE *stream);
<a name="l01886"></a>01886 <span class="keywordtype">void</span> <a class="code" href="machine_8h.html#7bf1c723dc44d4ed1f0da39f006d3383">md_print_cregs</a>(<a class="code" href="structmd__ctrl__t.html">md_ctrl_t</a> regs, FILE *stream);
<a name="l01887"></a>01887 
<a name="l01888"></a>01888 
<a name="l01889"></a>01889 <span class="comment">/*</span>
<a name="l01890"></a>01890 <span class="comment"> * configure sim-outorder specifics</span>
<a name="l01891"></a>01891 <span class="comment"> */</span>
<a name="l01892"></a>01892 
<a name="l01893"></a>01893 <span class="comment">/* primitive operation used to compute addresses within pipeline */</span>
<a name="l01894"></a><a class="code" href="machine_8h.html#dfa27dc9a8c76c1d0b2ffaaefc8eccdb">01894</a> <span class="preprocessor">#define MD_AGEN_OP        ADDQ</span>
<a name="l01895"></a>01895 <span class="preprocessor"></span>
<a name="l01896"></a>01896 <span class="comment">/* NOP operation when injected into the pipeline */</span>
<a name="l01897"></a><a class="code" href="machine_8h.html#3f396541ea4e7b62634107957224c763">01897</a> <span class="preprocessor">#define MD_NOP_OP        OP_NA</span>
<a name="l01898"></a>01898 <span class="preprocessor"></span>
<a name="l01899"></a>01899 <span class="comment">/*</span>
<a name="l01900"></a>01900 <span class="comment"> * target-dependent routines</span>
<a name="l01901"></a>01901 <span class="comment"> */</span>
<a name="l01902"></a>01902 
<a name="l01903"></a>01903 <span class="comment">/* intialize the inst decoder, this function builds the ISA decode tables */</span>
<a name="l01904"></a>01904 <span class="keywordtype">void</span> <a class="code" href="machine_8h.html#adb08fced61010eb60f1ea634d307228">md_init_decoder</a>(<span class="keywordtype">void</span>);
<a name="l01905"></a>01905 
<a name="l01906"></a>01906 <span class="comment">/*</span>
<a name="l01907"></a>01907 <span class="comment"> * UOP stuff</span>
<a name="l01908"></a>01908 <span class="comment"> */</span>
<a name="l01909"></a>01909 
<a name="l01910"></a>01910 <span class="comment">/* microcode field specifiers (xfields) */</span>
<a name="l01911"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8">01911</a> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8">md_xfield_t</a> {
<a name="l01912"></a>01912   <span class="comment">/* integer register constants */</span>
<a name="l01913"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8b2856acec294387629ec22c0a54d4ffc">01913</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8128b6ff8957b016b04f079e785c677d6">XR_AL</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8fb225a08f97afe8bf383595ca6bf317a">XR_AH</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8b0764367ca2d2bb414c36300a7ef38e4">XR_AX</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8b2856acec294387629ec22c0a54d4ffc">XR_EAX</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef84fb65f15bfffc8fe156932d6f4104a32">XR_eAX</a>,
<a name="l01914"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8d4aa98b9359bac1426266ee2cc1ba32b">01914</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8c89a3c9b3ddb5bb325d9b74a8d9effaf">XR_CL</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8453ef9615dbdec9d7248f2d4e2fbd557">XR_CH</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef880fd537a7b477fbeb6f02fc34a186941">XR_CX</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef84efaba1b420b554577fd0652f2f92e01">XR_ECX</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8d4aa98b9359bac1426266ee2cc1ba32b">XR_eCX</a>,
<a name="l01915"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef80e1df16f8b7fedc69d3ac4f76fe0d375">01915</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8e901e32247bf1a8088a55ed8759c49ab">XR_DL</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef83603aec7adab4e6188894c2a29dacbf4">XR_DH</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8cef1b73bcd91641fcac59845648736c0">XR_DX</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef814f4f7116a32fd27d8605074c854960e">XR_EDX</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef80e1df16f8b7fedc69d3ac4f76fe0d375">XR_eDX</a>,
<a name="l01916"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef81bd4f382e2dc0ada9e6525cff72c676e">01916</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef88294c570353ea578e571546e403729cf">XR_BL</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef82a072c4975e1a2555ae7b5dfdd8cd4b0">XR_BH</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8cbf4998382c7ce46756d509c9513c704">XR_BX</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef81bd4f382e2dc0ada9e6525cff72c676e">XR_EBX</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef81d881c5920031ad4ad56f4507ecab01a">XR_eBX</a>,
<a name="l01917"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef80ef6f6ddd4ea1db54a97649a24d406b7">01917</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef80ef6f6ddd4ea1db54a97649a24d406b7">XR_SP</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef872cb5b4bf67926196e9d14abecc89472">XR_ESP</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef83f7e029e98c76813d361b198e0d45fff">XR_eSP</a>,
<a name="l01918"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef89ead376fd2189489c7d17c46cba3d578">01918</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef81cc987c926919057dbc45e33b3d0fb12">XR_BP</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef81c8eeda81bf6a8a215b25e9cb38daae1">XR_EBP</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef89ead376fd2189489c7d17c46cba3d578">XR_eBP</a>,
<a name="l01919"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef80834612a6a8c86366fa05ecb08305774">01919</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef80834612a6a8c86366fa05ecb08305774">XR_SI</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8f301538fc86bcba6937675ee1326445e">XR_ESI</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef836792eb72661aa48c1287559306941f2">XR_eSI</a>,
<a name="l01920"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef85fa869a34ce90796ae57537102a69fc6">01920</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8b42e14fcc7465c33b56fe0f2beaef72c">XR_DI</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef86e8dd41d4765d2180fe0c3e9f06b342e">XR_EDI</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef85fa869a34ce90796ae57537102a69fc6">XR_eDI</a>,
<a name="l01921"></a>01921 
<a name="l01922"></a>01922   <span class="comment">/* specify NO segment register - needed for a few weird uop flows */</span>
<a name="l01923"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8afa9fcef86dea7d35fa976b45672d229">01923</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8afa9fcef86dea7d35fa976b45672d229">XR_SEGNONE</a>,
<a name="l01924"></a>01924 
<a name="l01925"></a>01925   <span class="comment">/* integer temporary registers */</span>
<a name="l01926"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8ce5d0f9790b92c2ee6ce8c7360c6f670">01926</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8ca14ab745eebc06d9bb9c9564d5d7222">XR_TMP0</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8aa29193fb54f221d1747c4a2ec9c1e08">XR_TMP1</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8a124546d597eeaabe2c367e7361c720e">XR_TMP2</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8ce5d0f9790b92c2ee6ce8c7360c6f670">XR_ZERO</a>,
<a name="l01927"></a>01927 
<a name="l01928"></a>01928   <span class="comment">/* FP register constants */</span>
<a name="l01929"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef81ad0c2a292b25eac69018ab729edad11">01929</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef83cad7af700e253786fa626403f871aac">XR_ST0</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8a4654b9ff423692067b214adf745c29c">XR_ST1</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef84a0ec596a3d453c1c0973760675cf46c">XR_ST2</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef80e3f6a83a6707aae294229d4bb6bed86">XR_ST3</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8735448d45c0c6ba8def4c7ee1a295c75">XR_ST4</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef83e73e612279c3d82e601eff482780727">XR_ST5</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8912fbfde126ac9755f2e0fb41746a8ca">XR_ST6</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef81ad0c2a292b25eac69018ab729edad11">XR_ST7</a>,
<a name="l01930"></a>01930 
<a name="l01931"></a>01931   <span class="comment">/* FP temporary registers */</span>
<a name="l01932"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef89d20f1f993a1c1be12909aab37128bc5">01932</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8f8b3c152f7e6596cebae10adec7fa2e5">XR_FTMP0</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef889efd37a9b69ca75e04711d4653ae135">XR_FTMP1</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef89d20f1f993a1c1be12909aab37128bc5">XR_FTMP2</a>,
<a name="l01933"></a>01933 
<a name="l01934"></a>01934   <span class="comment">/* x86 bitfields */</span>
<a name="l01935"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8429328a488065754a368f22cd66e2a36">01935</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef84c2d541c9a2a796030a0b891ae350261">XF_RO</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef818d07a26d38ecc82ea101562e602d0a5">XF_R</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef88da1c5ce338c328331ee4cc46d26a2b5">XF_RM</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8cfe76fd640b84f5eb8d2134ba621a4fb">XF_BASE</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef887e87e95eec2749052e111201a4184bb">XF_INDEX</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8c37615ce7cee04b749b5507c183ced58">XF_SCALE</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8429328a488065754a368f22cd66e2a36">XF_STI</a>,
<a name="l01936"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef83b55e40a96846184895170aa1d62562e">01936</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8e9bd007daa453408bb7c50dc9c3c28f0">XF_DISP</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8030b3a2af68600dcc9c0f8df9d003959">XF_IMMB</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef83b55e40a96846184895170aa1d62562e">XF_IMMV</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef803b2eac2f40b2dd0c1e128f4654e7ab1">XF_IMMA</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8f0f68a84e381fe13bbd76648b20f6408">XE_SIZEV_IMMW</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8d0b4a0fdff929dc9bce733d61a03fd7f">XF_CC</a>,
<a name="l01937"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8a8f2fd56053b0b68b2ed6de4f453e8d0">01937</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8a8f2fd56053b0b68b2ed6de4f453e8d0">XF_SYSCALL</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef88c4b32d9d0d198c8019d0b1037e98abc">XF_SEG</a>,
<a name="l01938"></a>01938 
<a name="l01939"></a>01939   <span class="comment">/* literal expressions */</span>
<a name="l01940"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef894195308d44fa2bc8b0f04f038896658">01940</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef894195308d44fa2bc8b0f04f038896658">XE_ZERO</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef85b81af0ff0be9fd0e627bb777c58d5af">XE_ONE</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8aeeb99efd26a891390d16feb68b247da">XE_MONE</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef82500630eeb97f488ebd3195949cf075b">XE_SIZEV</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef81027529ecd97b08e0baf667c68dda1ed">XE_MSIZEV</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef80fb4a40e05ff2fc2b54b0bf1c890d016">XE_ILEN</a>,
<a name="l01941"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef83287e89dc6c40b86aca9bbf2bd2f6f79">01941</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8c0dc5ef5002f49044e176dfd0284e93b">XE_CCE</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef83287e89dc6c40b86aca9bbf2bd2f6f79">XE_CCNE</a>,
<a name="l01942"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef88695dd9de263a39dd3e6887132624142">01942</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef87a6572c079bb35b151c3a8f41c2c51fd">XE_FCCB</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8e3d8291db4f54b519e7edf0fc562ecd0">XE_FCCNB</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8c269213bfe91d5afff650903a036ef98">XE_FCCE</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8b68f4cf6a7accf26c5af41d13f095a3e">XE_FCCNE</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8a51718dc9aa2eb6a01b5912105d9ea59">XE_FCCBE</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8bf3f1d428108ddd5b00b1e404b19764f">XE_FCCNBE</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef88695dd9de263a39dd3e6887132624142">XE_FCCU</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8230372692313abd0b94965a523d1b623">XE_FCCNU</a>,
<a name="l01943"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef856aa0907c0432942cc0dcfbb31e25171">01943</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef84280ebe24e35581d3d2914429fc39b83">XE_CF</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef819c8384279799246c4a38d8ad1089d61">XE_DF</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef856aa0907c0432942cc0dcfbb31e25171">XE_SFZFAFPFCF</a>,
<a name="l01944"></a><a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8c9b8501217f8657e6db5f45d13253fcb">01944</a>   <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8b0aae7ba444e1203de20823782a2ba60">XE_FP1</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef82f88ae06233d8c34763fa3f7817f8bc0">XE_FNOP</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8c9b8501217f8657e6db5f45d13253fcb">XE_FPUSH</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef830803794fca8494db0197431d510bd92">XE_FPOP</a>, <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef832b3346fce7c708d6d280c9fed3e622a">XE_FPOPPOP</a>,
<a name="l01945"></a>01945 };
<a name="l01946"></a>01946 
<a name="l01947"></a>01947 <span class="comment">/* UOP visibility switches */</span>
<a name="l01948"></a><a class="code" href="machine_8h.html#98c13c051d56ec52eebf7732f621b146">01948</a> <span class="preprocessor">#define UV        1ULL    </span><span class="comment">/* visible */</span>
<a name="l01949"></a><a class="code" href="machine_8h.html#1965eaca47dbf3f87acdafc2208f04eb">01949</a> <span class="preprocessor">#define UP        0ULL    </span><span class="comment">/* private */</span>
<a name="l01950"></a><a class="code" href="machine_8h.html#4c4ccd058f7f09cf5f4881d7d178f674">01950</a> <span class="preprocessor">#define ISUV        ((uop[0].decode.raw_op &gt;&gt; 30) &amp; 1)</span>
<a name="l01951"></a>01951 <span class="preprocessor"></span>
<a name="l01952"></a>01952 
<a name="l01953"></a>01953 <span class="comment">/* UOP fields */</span>
<a name="l01954"></a><a class="code" href="machine_8h.html#b1978599c102a26af3174336e11c6ec9">01954</a> <span class="preprocessor">#define UHASIMM        ((uop[0].decode.raw_op &gt;&gt; 31) &amp; 1)</span>
<a name="l01955"></a><a class="code" href="machine_8h.html#d1bc0dd24bead91c0bba1ded526fc471">01955</a> <span class="preprocessor"></span><span class="preprocessor">#define USG             (UHASIMM ? (uop[2].decode.raw_op &amp; 0xf): 0)</span>
<a name="l01956"></a><a class="code" href="machine_8h.html#b78850689b150ce8d286d89073103e42">01956</a> <span class="preprocessor"></span><span class="preprocessor">#define URD        ((uop[0].decode.raw_op &gt;&gt; 12) &amp; 0xf)</span>
<a name="l01957"></a><a class="code" href="machine_8h.html#5543e4e112fad47a6b8e0085e77475b3">01957</a> <span class="preprocessor"></span><span class="preprocessor">#define UCC        URD</span>
<a name="l01958"></a><a class="code" href="machine_8h.html#2795f4caee51946249dfdd571be27a36">01958</a> <span class="preprocessor"></span><span class="preprocessor">#define URS        ((uop[0].decode.raw_op &gt;&gt; 8) &amp; 0xf)</span>
<a name="l01959"></a><a class="code" href="machine_8h.html#0ae92330b1f871f246d144ef342aff1b">01959</a> <span class="preprocessor"></span><span class="preprocessor">#define URT        ((uop[0].decode.raw_op &gt;&gt; 4) &amp; 0xf)</span>
<a name="l01960"></a><a class="code" href="machine_8h.html#3ec436c05773debe2bba05c560f08a55">01960</a> <span class="preprocessor"></span><span class="preprocessor">#define URU        (uop[0].decode.raw_op &amp; 0xf)</span>
<a name="l01961"></a><a class="code" href="machine_8h.html#951bd7a1cad5c07101a0f1ab0179c3ea">01961</a> <span class="preprocessor"></span><span class="preprocessor">#define ULIT        (uop[0].decode.raw_op &amp; 0xf)</span>
<a name="l01962"></a><a class="code" href="machine_8h.html#27686bad12022aeba990da1a46f36e5a">01962</a> <span class="preprocessor"></span><span class="preprocessor">#define UIMMB                                \</span>
<a name="l01963"></a>01963 <span class="preprocessor">  (UHASIMM                                \</span>
<a name="l01964"></a>01964 <span class="preprocessor">   ? ((sdword_t)(sbyte_t)(uop[1].decode.raw_op &amp; 0xff))                \</span>
<a name="l01965"></a>01965 <span class="preprocessor">   : ((sdword_t)(sbyte_t)(uop[0].decode.raw_op &amp; 0xff)))</span>
<a name="l01966"></a><a class="code" href="machine_8h.html#298f3ad34dbf1bdc826adf2713db9313">01966</a> <span class="preprocessor"></span><span class="preprocessor">#define UIMMUB                                \</span>
<a name="l01967"></a>01967 <span class="preprocessor">  (UHASIMM                                \</span>
<a name="l01968"></a>01968 <span class="preprocessor">   ? ((dword_t)(byte_t)(uop[1].decode.raw_op &amp; 0xff))                    \</span>
<a name="l01969"></a>01969 <span class="preprocessor">   : ((dword_t)(byte_t)(uop[0].decode.raw_op &amp; 0xff)))</span>
<a name="l01970"></a><a class="code" href="machine_8h.html#0f7b3364104ad0271a42fd42f56fe606">01970</a> <span class="preprocessor"></span><span class="preprocessor">#define UIMMW                                \</span>
<a name="l01971"></a>01971 <span class="preprocessor">  (UHASIMM                                \</span>
<a name="l01972"></a>01972 <span class="preprocessor">   ? ((sdword_t)(sword_t)(uop[1].decode.raw_op &amp; 0xffff))                \</span>
<a name="l01973"></a>01973 <span class="preprocessor">   : ((sdword_t)(sword_t)(word_t)(uop[0].decode.raw_op &amp; 0xff)))</span>
<a name="l01974"></a><a class="code" href="machine_8h.html#74b5652027b9a9b4ced5b18e3ceed54c">01974</a> <span class="preprocessor"></span><span class="preprocessor">#define UIMMUW                                \</span>
<a name="l01975"></a>01975 <span class="preprocessor">  (UHASIMM                                \</span>
<a name="l01976"></a>01976 <span class="preprocessor">   ? ((dword_t)(word_t)(uop[1].decode.raw_op &amp; 0xffff))                \</span>
<a name="l01977"></a>01977 <span class="preprocessor">   : ((dword_t)(word_t)(uop[0].decode.raw_op &amp; 0xff)))</span>
<a name="l01978"></a><a class="code" href="machine_8h.html#8a9a7eaecd779e8f7401f25b26a698ad">01978</a> <span class="preprocessor"></span><span class="preprocessor">#define UIMMD                                \</span>
<a name="l01979"></a>01979 <span class="preprocessor">  (UHASIMM                                \</span>
<a name="l01980"></a>01980 <span class="preprocessor">   ? ((sdword_t)uop[1].decode.raw_op)                            \</span>
<a name="l01981"></a>01981 <span class="preprocessor">   : ((sdword_t)(dword_t)(uop[0].decode.raw_op &amp; 0xff)))</span>
<a name="l01982"></a><a class="code" href="machine_8h.html#4e1a8615be653b5bf2273d87e8df34b7">01982</a> <span class="preprocessor"></span><span class="preprocessor">#define UIMMUD                                \</span>
<a name="l01983"></a>01983 <span class="preprocessor">  (UHASIMM                                \</span>
<a name="l01984"></a>01984 <span class="preprocessor">   ? ((dword_t)uop[1].decode.raw_op)                            \</span>
<a name="l01985"></a>01985 <span class="preprocessor">   : ((dword_t)(uop[0].decode.raw_op &amp; 0xff)))</span>
<a name="l01986"></a>01986 <span class="preprocessor"></span>
<a name="l01987"></a><a class="code" href="machine_8h.html#bbcc806996635e0671f66e73317b0c96">01987</a> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#bbcc806996635e0671f66e73317b0c96">fpstack_ops_t</a> {
<a name="l01988"></a><a class="code" href="machine_8h.html#bbcc806996635e0671f66e73317b0c9646e33ab1efe19f95f336d480778b1669">01988</a>   <a class="code" href="machine_8h.html#bbcc806996635e0671f66e73317b0c9646e33ab1efe19f95f336d480778b1669">fpstk_nop</a> = 0,
<a name="l01989"></a><a class="code" href="machine_8h.html#bbcc806996635e0671f66e73317b0c96f60fce53628a86f2aafb45582f8f3d1b">01989</a>   <a class="code" href="machine_8h.html#bbcc806996635e0671f66e73317b0c96f60fce53628a86f2aafb45582f8f3d1b">fpstk_pop</a> = 1,
<a name="l01990"></a><a class="code" href="machine_8h.html#bbcc806996635e0671f66e73317b0c962c9fa36b0dcfd045a4899d727ea9644d">01990</a>   <a class="code" href="machine_8h.html#bbcc806996635e0671f66e73317b0c962c9fa36b0dcfd045a4899d727ea9644d">fpstk_poppop</a> = 2,
<a name="l01991"></a><a class="code" href="machine_8h.html#bbcc806996635e0671f66e73317b0c96ca98630b2266108adf34af9035ec929d">01991</a>   <a class="code" href="machine_8h.html#bbcc806996635e0671f66e73317b0c96ca98630b2266108adf34af9035ec929d">fpstk_push</a> = 3
<a name="l01992"></a>01992 };
<a name="l01993"></a>01993 
<a name="l01994"></a>01994 <span class="comment">/* mode-specific constants */</span>
<a name="l01995"></a><a class="code" href="machine_8h.html#8b1bb81baf4a4b2accf30d9b4a699332">01995</a> <span class="preprocessor">#define SIZE_W            2</span>
<a name="l01996"></a><a class="code" href="machine_8h.html#c4d95a484821ca67d70b1c8e581edd95">01996</a> <span class="preprocessor"></span><span class="preprocessor">#define SIZE_D            4</span>
<a name="l01997"></a><a class="code" href="machine_8h.html#ebfa379bfea4866cadc65caf0f8d8477">01997</a> <span class="preprocessor"></span><span class="preprocessor">#define BITSIZE_W        16</span>
<a name="l01998"></a><a class="code" href="machine_8h.html#aac013556e6df9fb2044553652a9ee61">01998</a> <span class="preprocessor"></span><span class="preprocessor">#define BITSIZE_D        32</span>
<a name="l01999"></a><a class="code" href="machine_8h.html#6a0692b4a671dd581211a555ffc14bad">01999</a> <span class="preprocessor"></span><span class="preprocessor">#define LOGSIZE_W        1</span>
<a name="l02000"></a><a class="code" href="machine_8h.html#95ebf5558d0e2f00f863b871242917d1">02000</a> <span class="preprocessor"></span><span class="preprocessor">#define LOGSIZE_D        2</span>
<a name="l02001"></a><a class="code" href="machine_8h.html#c51d301cb65f6182ee3e944cd7f801b4">02001</a> <span class="preprocessor"></span><span class="preprocessor">#define LOGBITSIZE_W        4</span>
<a name="l02002"></a><a class="code" href="machine_8h.html#2dc9a2298a2b88f6f0625151f9985207">02002</a> <span class="preprocessor"></span><span class="preprocessor">#define LOGBITSIZE_D        5</span>
<a name="l02003"></a>02003 <span class="preprocessor"></span>
<a name="l02004"></a><a class="code" href="machine_8h.html#3e3e4e68ba5623a3a048d9719c57be70">02004</a> <span class="preprocessor">#define MD_SET_UOPCODE(UOP, INST)                    \</span>
<a name="l02005"></a>02005 <span class="preprocessor">  ((UOP) = (enum md_opcode)((((INST)[0]) &gt;&gt; 16) &amp; 0x3fff))</span>
<a name="l02006"></a>02006 <span class="preprocessor"></span>
<a name="l02007"></a>02007 <span class="comment">/* XXX X86 UOP definition */</span>
<a name="l02008"></a><a class="code" href="machine_8h.html#b5025b1f354449f9b67d69c6c7271a48">02008</a> <span class="preprocessor">#define MD_MAX_FLOWLEN        62 </span><span class="comment">/* leave 2 for REP ctrl uops */</span>
<a name="l02009"></a><a class="code" href="machine_8h.html#a815a6d01e28ecb0f60fcde13fc11e4a">02009</a> <span class="preprocessor">#define UOP_SEQ_SHIFT         6</span>
<a name="l02010"></a><a class="code" href="machine_8h.html#48101d661bf0d09982b8eae832f2df44">02010</a> <span class="preprocessor"></span><span class="keyword">typedef</span> qword_t <a class="code" href="machine_8h.html#48101d661bf0d09982b8eae832f2df44">uop_inst_t</a>;
<a name="l02011"></a>02011 
<a name="l02012"></a>02012 <span class="preprocessor">#include "<a class="code" href="zesto-structs_8h.html">zesto-structs.h</a>"</span>
<a name="l02013"></a>02013 
<a name="l02014"></a>02014 
<a name="l02015"></a>02015 <span class="comment">/* UOP flow generator, returns a small non-cyclic program implementing OP,</span>
<a name="l02016"></a>02016 <span class="comment">   returns length of flow returned */</span>
<a name="l02017"></a>02017 <span class="keywordtype">int</span>
<a name="l02018"></a>02018 <a class="code" href="machine_8h.html#b3f57fdb0b3410ba51dc0eafadbaeae8">md_get_flow</a>(<span class="keyword">struct</span> <a class="code" href="structMop__t.html">Mop_t</a> * Mop,
<a name="l02019"></a>02019     uop_inst_t flow[<a class="code" href="machine_8h.html#b5025b1f354449f9b67d69c6c7271a48">MD_MAX_FLOWLEN</a>], <span class="keywordtype">bool</span> * bogus);
<a name="l02020"></a>02020 
<a name="l02021"></a>02021 <span class="comment">/* disassemble a SimpleScalar instruction */</span>
<a name="l02022"></a>02022 <span class="keywordtype">void</span>
<a name="l02023"></a>02023 <a class="code" href="machine_8h.html#8a4b9c7ad687adc60d8077a30b5bb2bf">md_print_insn</a>(<span class="keyword">struct</span> <a class="code" href="structMop__t.html">Mop_t</a> * Mop,        <span class="comment">/* instruction to disassemble */</span>
<a name="l02024"></a>02024     FILE *stream);        <span class="comment">/* output stream */</span>
<a name="l02025"></a>02025 
<a name="l02026"></a>02026 <span class="comment">/* print uop function */</span>
<a name="l02027"></a>02027 <span class="keywordtype">void</span>
<a name="l02028"></a>02028 <a class="code" href="machine_8h.html#909d178c8e7895b5c100a7a3ddfc4bf9">md_print_uop</a>(<span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#f9cc7c84fab2d337413c6ba6ecf49242">md_opcode</a> op,
<a name="l02029"></a>02029     <span class="keyword">const</span> <a class="code" href="structmd__inst__t.html">md_inst_t</a> instruction,    <span class="comment">/* instruction to disassemble */</span>
<a name="l02030"></a>02030     <span class="keyword">const</span> md_addr_t pc,        <span class="comment">/* addr of inst, used for PC-rels */</span>
<a name="l02031"></a>02031     FILE *stream);        <span class="comment">/* output stream */</span>
<a name="l02032"></a>02032 
<a name="l02033"></a>02033 <span class="keywordtype">void</span>
<a name="l02034"></a>02034 <a class="code" href="machine_8h.html#0e431a2ec90a48c9be48b16fe4b27308">md_print_uop_1</a>(<span class="keyword">struct</span> <a class="code" href="structuop__t.html">uop_t</a> *uop,
<a name="l02035"></a>02035     <a class="code" href="structmd__inst__t.html">md_inst_t</a> instruction,    <span class="comment">/* instruction to disassemble */</span>
<a name="l02036"></a>02036     md_addr_t pc,        <span class="comment">/* addr of inst, used for PC-rels */</span>
<a name="l02037"></a>02037     FILE *stream);        <span class="comment">/* output stream */</span>
<a name="l02038"></a>02038 
<a name="l02039"></a>02039 <a class="code" href="host_8h.html#c28e484253fd62d727019f0d361996a0">word_t</a>
<a name="l02040"></a>02040 <a class="code" href="machine_8h.html#9682311d5eea29d63f16e67e41be6053">md_uop_opc</a>(<span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#f9cc7c84fab2d337413c6ba6ecf49242">md_opcode</a> uopcode);
<a name="l02041"></a>02041 
<a name="l02042"></a>02042 <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a>
<a name="l02043"></a>02043 <a class="code" href="machine_8h.html#85959b31a96164d804447c37faa100a5">md_uop_reg</a>(<span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8">md_xfield_t</a> xval, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structMop__t.html">Mop_t</a> * Mop, <span class="keywordtype">bool</span> * bogus);
<a name="l02044"></a>02044 
<a name="l02045"></a>02045 <a class="code" href="host_8h.html#780bd50362a995b802eb8e00f4b0c200">byte_t</a>
<a name="l02046"></a>02046 <a class="code" href="machine_8h.html#e10ffaf1df8ee9dc086b4d3e45051bd0">md_uop_immb</a>(<span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8">md_xfield_t</a> xval, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structMop__t.html">Mop_t</a> * Mop, <span class="keywordtype">bool</span> * bogus);
<a name="l02047"></a>02047 
<a name="l02048"></a>02048 <span class="keyword">inline</span> <a class="code" href="host_8h.html#064e4defdc308749258f722d81981cac">dword_t</a>
<a name="l02049"></a>02049 <a class="code" href="machine_8h.html#b9811f2d4b703a336bf6cac55a18b84c">md_uop_immv</a>(<span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8">md_xfield_t</a> xval, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structMop__t.html">Mop_t</a> * Mop, <span class="keywordtype">bool</span> * bogus);
<a name="l02050"></a>02050 
<a name="l02051"></a>02051 <span class="keyword">inline</span> <a class="code" href="host_8h.html#064e4defdc308749258f722d81981cac">dword_t</a>
<a name="l02052"></a>02052 <a class="code" href="machine_8h.html#f2e7dc3e611f6a667c135d8798bf5c19">md_uop_lit</a>(<span class="keyword">const</span> <span class="keyword">enum</span> <a class="code" href="machine_8h.html#8f348514238e5cc31e527bb232c04ef8">md_xfield_t</a> xval, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="structMop__t.html">Mop_t</a> * Mop, <span class="keywordtype">bool</span> * bogus);
<a name="l02053"></a>02053 
<a name="l02054"></a>02054 <span class="preprocessor">#ifdef ZESTO_ORACLE_C</span>
<a name="l02055"></a>02055 <span class="preprocessor"></span>
<a name="l02056"></a>02056 <span class="preprocessor">#define XMEM_READ_BYTE(M,A)                        \</span>
<a name="l02057"></a>02057 <span class="preprocessor">  ({ byte_t _mem_read_tmp;                         \</span>
<a name="l02058"></a>02058 <span class="preprocessor">   const word_t _x = (word_t)MEM_READ_BYTE(M,A);   \</span>
<a name="l02059"></a>02059 <span class="preprocessor">   _x; })</span>
<a name="l02060"></a>02060 <span class="preprocessor"></span>
<a name="l02061"></a>02061 <span class="preprocessor">#define XMEM_READ_WORD(M,A)                        \</span>
<a name="l02062"></a>02062 <span class="preprocessor">  ({ byte_t _mem_read_tmp;                         \</span>
<a name="l02063"></a>02063 <span class="preprocessor">   const word_t _x = ((word_t)MEM_READ_BYTE(M,A)   \</span>
<a name="l02064"></a>02064 <span class="preprocessor">     | ((word_t)MEM_READ_BYTE(M,(A)+1) &lt;&lt; 8));     \</span>
<a name="l02065"></a>02065 <span class="preprocessor">   _x; })</span>
<a name="l02066"></a>02066 <span class="preprocessor"></span>
<a name="l02067"></a>02067 <span class="preprocessor">#define XMEM_READ_DWORD(M,A)                       \</span>
<a name="l02068"></a>02068 <span class="preprocessor">  ({ byte_t _mem_read_tmp;                         \</span>
<a name="l02069"></a>02069 <span class="preprocessor">   const dword_t _x = ((dword_t)MEM_READ_BYTE(M,A) \</span>
<a name="l02070"></a>02070 <span class="preprocessor">     | ((dword_t)MEM_READ_BYTE(M,(A)+1) &lt;&lt; 8)      \</span>
<a name="l02071"></a>02071 <span class="preprocessor">     | ((dword_t)MEM_READ_BYTE(M,(A)+2) &lt;&lt; 16)     \</span>
<a name="l02072"></a>02072 <span class="preprocessor">     | ((dword_t)MEM_READ_BYTE(M,(A)+3) &lt;&lt; 24));   \</span>
<a name="l02073"></a>02073 <span class="preprocessor">   _x; })</span>
<a name="l02074"></a>02074 <span class="preprocessor"></span>
<a name="l02075"></a>02075 <span class="preprocessor">#define XMEM_READ_QWORD(M,A)                       \</span>
<a name="l02076"></a>02076 <span class="preprocessor">  ({ byte_t _mem_read_tmp;                         \</span>
<a name="l02077"></a>02077 <span class="preprocessor">   const qword_t _x = ((qword_t)MEM_READ_BYTE(M,A) \</span>
<a name="l02078"></a>02078 <span class="preprocessor">     | ((qword_t)MEM_READ_BYTE(M,(A)+1) &lt;&lt; 8)      \</span>
<a name="l02079"></a>02079 <span class="preprocessor">     | ((qword_t)MEM_READ_BYTE(M,(A)+2) &lt;&lt; 16)     \</span>
<a name="l02080"></a>02080 <span class="preprocessor">     | ((qword_t)MEM_READ_BYTE(M,(A)+3) &lt;&lt; 24)     \</span>
<a name="l02081"></a>02081 <span class="preprocessor">     | ((qword_t)MEM_READ_BYTE(M,(A)+4) &lt;&lt; 32)     \</span>
<a name="l02082"></a>02082 <span class="preprocessor">     | ((qword_t)MEM_READ_BYTE(M,(A)+5) &lt;&lt; 40)     \</span>
<a name="l02083"></a>02083 <span class="preprocessor">     | ((qword_t)MEM_READ_BYTE(M,(A)+6) &lt;&lt; 48)     \</span>
<a name="l02084"></a>02084 <span class="preprocessor">     | ((qword_t)MEM_READ_BYTE(M,(A)+7) &lt;&lt; 56));   \</span>
<a name="l02085"></a>02085 <span class="preprocessor">   _x; })</span>
<a name="l02086"></a>02086 <span class="preprocessor"></span>
<a name="l02087"></a>02087 <span class="preprocessor">#define XMEM_WRITE_BYTE(M,A,S)                         \</span>
<a name="l02088"></a>02088 <span class="preprocessor">  ({ const byte_t _x = (S);                            \</span>
<a name="l02089"></a>02089 <span class="preprocessor">   assert(uop-&gt;oracle.spec_mem[0] == NULL);            \</span>
<a name="l02090"></a>02090 <span class="preprocessor">   uop-&gt;oracle.spec_mem[0] = MEM_WRITE_BYTE(M,(A),_x); \</span>
<a name="l02091"></a>02091 <span class="preprocessor">   })</span>
<a name="l02092"></a>02092 <span class="preprocessor"></span>
<a name="l02093"></a>02093 <span class="preprocessor">#define XMEM_WRITE_WORD(M,A,S)                                       \</span>
<a name="l02094"></a>02094 <span class="preprocessor">  ({ const word_t _x = (S);                                          \</span>
<a name="l02095"></a>02095 <span class="preprocessor">   assert(uop-&gt;oracle.spec_mem[0] == NULL);                          \</span>
<a name="l02096"></a>02096 <span class="preprocessor">   uop-&gt;oracle.spec_mem[0] = MEM_WRITE_BYTE(M,(A),_x&amp;0xff);          \</span>
<a name="l02097"></a>02097 <span class="preprocessor">   uop-&gt;oracle.spec_mem[1] = MEM_WRITE_BYTE(M,(A)+1,(_x &gt;&gt; 8)&amp;0xff); \</span>
<a name="l02098"></a>02098 <span class="preprocessor">   })</span>
<a name="l02099"></a>02099 <span class="preprocessor"></span>
<a name="l02100"></a>02100 <span class="preprocessor">#define XMEM_WRITE_DWORD(M,A,S)                                       \</span>
<a name="l02101"></a>02101 <span class="preprocessor">  ({ const dword_t _x = (S);                                          \</span>
<a name="l02102"></a>02102 <span class="preprocessor">   assert(uop-&gt;oracle.spec_mem[0] == NULL);                           \</span>
<a name="l02103"></a>02103 <span class="preprocessor">   uop-&gt;oracle.spec_mem[0] = MEM_WRITE_BYTE(M,(A),_x&amp;0xff);           \</span>
<a name="l02104"></a>02104 <span class="preprocessor">   uop-&gt;oracle.spec_mem[1] = MEM_WRITE_BYTE(M,(A)+1,(_x &gt;&gt; 8)&amp;0xff);  \</span>
<a name="l02105"></a>02105 <span class="preprocessor">   uop-&gt;oracle.spec_mem[2] = MEM_WRITE_BYTE(M,(A)+2,(_x &gt;&gt; 16)&amp;0xff); \</span>
<a name="l02106"></a>02106 <span class="preprocessor">   uop-&gt;oracle.spec_mem[3] = MEM_WRITE_BYTE(M,(A)+3,(_x &gt;&gt; 24)&amp;0xff); \</span>
<a name="l02107"></a>02107 <span class="preprocessor">   })</span>
<a name="l02108"></a>02108 <span class="preprocessor"></span>
<a name="l02109"></a>02109 <span class="preprocessor">#define XMEM_WRITE_DWORD2(M,A,S)                                       \</span>
<a name="l02110"></a>02110 <span class="preprocessor">  ({ const dword_t _x = (S);                                           \</span>
<a name="l02111"></a>02111 <span class="preprocessor">   assert(uop-&gt;oracle.spec_mem[8] == NULL);                            \</span>
<a name="l02112"></a>02112 <span class="preprocessor">   uop-&gt;oracle.spec_mem[8] = MEM_WRITE_BYTE(M,(A),_x&amp;0xff);            \</span>
<a name="l02113"></a>02113 <span class="preprocessor">   uop-&gt;oracle.spec_mem[9] = MEM_WRITE_BYTE(M,(A)+1,(_x &gt;&gt; 8)&amp;0xff);   \</span>
<a name="l02114"></a>02114 <span class="preprocessor">   uop-&gt;oracle.spec_mem[10] = MEM_WRITE_BYTE(M,(A)+2,(_x &gt;&gt; 16)&amp;0xff); \</span>
<a name="l02115"></a>02115 <span class="preprocessor">   uop-&gt;oracle.spec_mem[11] = MEM_WRITE_BYTE(M,(A)+3,(_x &gt;&gt; 24)&amp;0xff); \</span>
<a name="l02116"></a>02116 <span class="preprocessor">   })</span>
<a name="l02117"></a>02117 <span class="preprocessor"></span>
<a name="l02118"></a>02118 <span class="preprocessor">#define XMEM_WRITE_QWORD(M,A,S)                                       \</span>
<a name="l02119"></a>02119 <span class="preprocessor">  ({ const qword_t _x = (S);                                          \</span>
<a name="l02120"></a>02120 <span class="preprocessor">   assert(uop-&gt;oracle.spec_mem[0] == NULL);                           \</span>
<a name="l02121"></a>02121 <span class="preprocessor">   uop-&gt;oracle.spec_mem[0] = MEM_WRITE_BYTE(M,(A),_x&amp;0xff);           \</span>
<a name="l02122"></a>02122 <span class="preprocessor">   uop-&gt;oracle.spec_mem[1] = MEM_WRITE_BYTE(M,(A)+1,(_x &gt;&gt; 8)&amp;0xff);  \</span>
<a name="l02123"></a>02123 <span class="preprocessor">   uop-&gt;oracle.spec_mem[2] = MEM_WRITE_BYTE(M,(A)+2,(_x &gt;&gt; 16)&amp;0xff); \</span>
<a name="l02124"></a>02124 <span class="preprocessor">   uop-&gt;oracle.spec_mem[3] = MEM_WRITE_BYTE(M,(A)+3,(_x &gt;&gt; 24)&amp;0xff); \</span>
<a name="l02125"></a>02125 <span class="preprocessor">   uop-&gt;oracle.spec_mem[4] = MEM_WRITE_BYTE(M,(A)+4,(_x &gt;&gt; 32)&amp;0xff); \</span>
<a name="l02126"></a>02126 <span class="preprocessor">   uop-&gt;oracle.spec_mem[5] = MEM_WRITE_BYTE(M,(A)+5,(_x &gt;&gt; 40)&amp;0xff); \</span>
<a name="l02127"></a>02127 <span class="preprocessor">   uop-&gt;oracle.spec_mem[6] = MEM_WRITE_BYTE(M,(A)+6,(_x &gt;&gt; 48)&amp;0xff); \</span>
<a name="l02128"></a>02128 <span class="preprocessor">   uop-&gt;oracle.spec_mem[7] = MEM_WRITE_BYTE(M,(A)+7,(_x &gt;&gt; 56)&amp;0xff); \</span>
<a name="l02129"></a>02129 <span class="preprocessor">   })</span>
<a name="l02130"></a>02130 <span class="preprocessor"></span>
<a name="l02131"></a>02131 <span class="preprocessor">#else</span>
<a name="l02132"></a>02132 <span class="preprocessor"></span>
<a name="l02133"></a>02133 <span class="comment">/* TODO: check alignment and then use more efficient wide accesses */</span>
<a name="l02134"></a>02134 
<a name="l02135"></a><a class="code" href="machine_8h.html#677838daadb2b42f0fed57a0743c767a">02135</a> <span class="preprocessor">#define XMEM_READ_BYTE(M,A)                      \</span>
<a name="l02136"></a>02136 <span class="preprocessor">  ({ const byte_t _x                             \</span>
<a name="l02137"></a>02137 <span class="preprocessor">     = (byte_t)MEM_READ_BYTE(M,A);               \</span>
<a name="l02138"></a>02138 <span class="preprocessor">   _x; })</span>
<a name="l02139"></a>02139 <span class="preprocessor"></span>
<a name="l02140"></a><a class="code" href="machine_8h.html#8c6112d8324f7ffa94c3b809bb9d596d">02140</a> <span class="preprocessor">#define XMEM_READ_WORD(M,A)                      \</span>
<a name="l02141"></a>02141 <span class="preprocessor">  ({ const word_t _x                             \</span>
<a name="l02142"></a>02142 <span class="preprocessor">     = ((word_t)MEM_READ_BYTE(M,A)               \</span>
<a name="l02143"></a>02143 <span class="preprocessor">     | ((word_t)MEM_READ_BYTE(M,(A)+1) &lt;&lt; 8));   \</span>
<a name="l02144"></a>02144 <span class="preprocessor">   _x; })</span>
<a name="l02145"></a>02145 <span class="preprocessor"></span>
<a name="l02146"></a><a class="code" href="machine_8h.html#34a48e322b5ec8edf7689a4d20ffa4b4">02146</a> <span class="preprocessor">#define XMEM_READ_DWORD(M,A)                     \</span>
<a name="l02147"></a>02147 <span class="preprocessor">  ({ const dword_t _x                            \</span>
<a name="l02148"></a>02148 <span class="preprocessor">     = ((dword_t)MEM_READ_BYTE(M,A)              \</span>
<a name="l02149"></a>02149 <span class="preprocessor">     | ((dword_t)MEM_READ_BYTE(M,(A)+1) &lt;&lt; 8)    \</span>
<a name="l02150"></a>02150 <span class="preprocessor">     | ((dword_t)MEM_READ_BYTE(M,(A)+2) &lt;&lt; 16)   \</span>
<a name="l02151"></a>02151 <span class="preprocessor">     | ((dword_t)MEM_READ_BYTE(M,(A)+3) &lt;&lt; 24)); \</span>
<a name="l02152"></a>02152 <span class="preprocessor">   _x; })</span>
<a name="l02153"></a>02153 <span class="preprocessor"></span>
<a name="l02154"></a><a class="code" href="machine_8h.html#4e3b767716e6d84f13de4c3fcbfffc88">02154</a> <span class="preprocessor">#define XMEM_READ_QWORD(M,A)                     \</span>
<a name="l02155"></a>02155 <span class="preprocessor">  ({ const qword_t _x                            \</span>
<a name="l02156"></a>02156 <span class="preprocessor">     = ((qword_t)MEM_READ_BYTE(M,A)              \</span>
<a name="l02157"></a>02157 <span class="preprocessor">     | ((qword_t)MEM_READ_BYTE(M,(A)+1) &lt;&lt; 8)    \</span>
<a name="l02158"></a>02158 <span class="preprocessor">     | ((qword_t)MEM_READ_BYTE(M,(A)+2) &lt;&lt; 16)   \</span>
<a name="l02159"></a>02159 <span class="preprocessor">     | ((qword_t)MEM_READ_BYTE(M,(A)+3) &lt;&lt; 24)   \</span>
<a name="l02160"></a>02160 <span class="preprocessor">     | ((qword_t)MEM_READ_BYTE(M,(A)+4) &lt;&lt; 32)   \</span>
<a name="l02161"></a>02161 <span class="preprocessor">     | ((qword_t)MEM_READ_BYTE(M,(A)+5) &lt;&lt; 40)   \</span>
<a name="l02162"></a>02162 <span class="preprocessor">     | ((qword_t)MEM_READ_BYTE(M,(A)+6) &lt;&lt; 48)   \</span>
<a name="l02163"></a>02163 <span class="preprocessor">     | ((qword_t)MEM_READ_BYTE(M,(A)+7) &lt;&lt; 56)); \</span>
<a name="l02164"></a>02164 <span class="preprocessor">   _x; })</span>
<a name="l02165"></a>02165 <span class="preprocessor"></span>
<a name="l02166"></a><a class="code" href="machine_8h.html#90f19c73c68d2daa9231b533043aa6e4">02166</a> <span class="preprocessor">#define XMEM_WRITE_WORD(M,A,S)                   \</span>
<a name="l02167"></a>02167 <span class="preprocessor">  ({ const word_t _x = (S);                      \</span>
<a name="l02168"></a>02168 <span class="preprocessor">   MEM_WRITE_BYTE(M,A,_x&amp;0xff);                  \</span>
<a name="l02169"></a>02169 <span class="preprocessor">   MEM_WRITE_BYTE(M,(A)+1,(_x &gt;&gt; 8)&amp;0xff); })</span>
<a name="l02170"></a>02170 <span class="preprocessor"></span>
<a name="l02171"></a><a class="code" href="machine_8h.html#8d4928dfc5be638e65b9d2ae7c2e87f8">02171</a> <span class="preprocessor">#define XMEM_WRITE_DWORD(M,A,S)                  \</span>
<a name="l02172"></a>02172 <span class="preprocessor">  ({ const dword_t _x = (S);                     \</span>
<a name="l02173"></a>02173 <span class="preprocessor">   MEM_WRITE_BYTE(M,A,_x&amp;0xff);                  \</span>
<a name="l02174"></a>02174 <span class="preprocessor">   MEM_WRITE_BYTE(M,(A)+1,(_x &gt;&gt; 8)&amp;0xff);       \</span>
<a name="l02175"></a>02175 <span class="preprocessor">   MEM_WRITE_BYTE(M,(A)+2,(_x &gt;&gt; 16)&amp;0xff);      \</span>
<a name="l02176"></a>02176 <span class="preprocessor">   MEM_WRITE_BYTE(M,(A)+3,(_x &gt;&gt; 24)&amp;0xff); })</span>
<a name="l02177"></a>02177 <span class="preprocessor"></span>
<a name="l02178"></a><a class="code" href="machine_8h.html#d50044c29d7db0d50498c1b6c9281739">02178</a> <span class="preprocessor">#define XMEM_WRITE_QWORD(M,A,S)                  \</span>
<a name="l02179"></a>02179 <span class="preprocessor">  ({ const qword_t _x = (S);                     \</span>
<a name="l02180"></a>02180 <span class="preprocessor">   MEM_WRITE_BYTE(M,A,_x&amp;0xff);                  \</span>
<a name="l02181"></a>02181 <span class="preprocessor">   MEM_WRITE_BYTE(M,(A)+1,(_x &gt;&gt; 8)&amp;0xff);       \</span>
<a name="l02182"></a>02182 <span class="preprocessor">   MEM_WRITE_BYTE(M,(A)+2,(_x &gt;&gt; 16)&amp;0xff);      \</span>
<a name="l02183"></a>02183 <span class="preprocessor">   MEM_WRITE_BYTE(M,(A)+3,(_x &gt;&gt; 24)&amp;0xff);      \</span>
<a name="l02184"></a>02184 <span class="preprocessor">   MEM_WRITE_BYTE(M,(A)+4,(_x &gt;&gt; 32)&amp;0xff);      \</span>
<a name="l02185"></a>02185 <span class="preprocessor">   MEM_WRITE_BYTE(M,(A)+5,(_x &gt;&gt; 40)&amp;0xff);      \</span>
<a name="l02186"></a>02186 <span class="preprocessor">   MEM_WRITE_BYTE(M,(A)+6,(_x &gt;&gt; 48)&amp;0xff);      \</span>
<a name="l02187"></a>02187 <span class="preprocessor">   MEM_WRITE_BYTE(M,(A)+7,(_x &gt;&gt; 56)&amp;0xff); })</span>
<a name="l02188"></a>02188 <span class="preprocessor"></span>
<a name="l02189"></a>02189 <span class="preprocessor">#endif </span><span class="comment">/* ZESTO_ORACLE_C */</span>
<a name="l02190"></a>02190 
<a name="l02191"></a><a class="code" href="machine_8h.html#9193ec86fda3f299747ea4184eb0391a">02191</a> <span class="preprocessor">#define READ_V(ADDR, FAULT)                         \</span>
<a name="l02192"></a>02192 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)             \</span>
<a name="l02193"></a>02193 <span class="preprocessor">   ? ((dword_t)READ_DWORD((ADDR), (FAULT)))         \</span>
<a name="l02194"></a>02194 <span class="preprocessor">   : ((dword_t)(word_t)READ_WORD((ADDR), (FAULT))))</span>
<a name="l02195"></a><a class="code" href="machine_8h.html#a2f7e2483f8ecb6e88238e93044acf09">02195</a> <span class="preprocessor"></span><span class="preprocessor">#define WRITE_V(SRC, ADDR, FAULT)                   \</span>
<a name="l02196"></a>02196 <span class="preprocessor">  ((Mop-&gt;fetch.inst.mode &amp; MODE_OPER32)             \</span>
<a name="l02197"></a>02197 <span class="preprocessor">   ? WRITE_DWORD((SRC), (ADDR), (FAULT))            \</span>
<a name="l02198"></a>02198 <span class="preprocessor">   : WRITE_WORD((SRC), (ADDR), (FAULT)))</span>
<a name="l02199"></a><a class="code" href="machine_8h.html#b629722a48c05288a7463d25ac5826d5">02199</a> <span class="preprocessor"></span><span class="preprocessor">#define READ_S2E(ADDR, FAULT)                       \</span>
<a name="l02200"></a>02200 <span class="preprocessor">  ({ union { sfloat_t s; dword_t dw; } x;           \</span>
<a name="l02201"></a>02201 <span class="preprocessor">   x.dw = READ_DWORD((ADDR), (FAULT));              \</span>
<a name="l02202"></a>02202 <span class="preprocessor">   (efloat_t)x.s;                                   \</span>
<a name="l02203"></a>02203 <span class="preprocessor">   })</span>
<a name="l02204"></a><a class="code" href="machine_8h.html#0ddfb39e7612fb3650463fbb2c5fd57b">02204</a> <span class="preprocessor"></span><span class="preprocessor">#define WRITE_E2S(SRC, ADDR, FAULT)                 \</span>
<a name="l02205"></a>02205 <span class="preprocessor">  ({ union { sfloat_t s; dword_t dw; } x;           \</span>
<a name="l02206"></a>02206 <span class="preprocessor">   x.s = (sfloat_t)(SRC);                           \</span>
<a name="l02207"></a>02207 <span class="preprocessor">   WRITE_DWORD(x.dw, (ADDR), (FAULT));              \</span>
<a name="l02208"></a>02208 <span class="preprocessor">   })</span>
<a name="l02209"></a><a class="code" href="machine_8h.html#14b8b23d796de0f934c33ccbef2ec641">02209</a> <span class="preprocessor"></span><span class="preprocessor">#define READ_T2E(ADDR, FAULT)                       \</span>
<a name="l02210"></a>02210 <span class="preprocessor">  ({ union { dfloat_t d; qword_t q; } x;            \</span>
<a name="l02211"></a>02211 <span class="preprocessor">   x.q = READ_QWORD((ADDR), (FAULT));               \</span>
<a name="l02212"></a>02212 <span class="preprocessor">   (efloat_t)x.d;                                   \</span>
<a name="l02213"></a>02213 <span class="preprocessor">   })</span>
<a name="l02214"></a><a class="code" href="machine_8h.html#16126eb3db83100d2356b52f0369a598">02214</a> <span class="preprocessor"></span><span class="preprocessor">#define WRITE_E2T(SRC, ADDR, FAULT)                 \</span>
<a name="l02215"></a>02215 <span class="preprocessor">  ({ union { dfloat_t d; qword_t q; } x;            \</span>
<a name="l02216"></a>02216 <span class="preprocessor">   x.d = (dfloat_t)(SRC);                           \</span>
<a name="l02217"></a>02217 <span class="preprocessor">   WRITE_QWORD(x.q, (ADDR), (FAULT));               \</span>
<a name="l02218"></a>02218 <span class="preprocessor">   })</span>
<a name="l02219"></a><a class="code" href="machine_8h.html#fdf9ae088b2664a5a12acaf866877d2d">02219</a> <span class="preprocessor"></span><span class="preprocessor">#define READ_Q2E(ADDR, FAULT)                       \</span>
<a name="l02220"></a>02220 <span class="preprocessor">  ({ const qword_t q                                \</span>
<a name="l02221"></a>02221 <span class="preprocessor">     = READ_QWORD((ADDR), (FAULT));                 \</span>
<a name="l02222"></a>02222 <span class="preprocessor">   (efloat_t)q;                                     \</span>
<a name="l02223"></a>02223 <span class="preprocessor">   })</span>
<a name="l02224"></a><a class="code" href="machine_8h.html#d5702ab5178c077a2e283ab36066beb2">02224</a> <span class="preprocessor"></span><span class="preprocessor">#define WRITE_E2Q(SRC, ADDR, FAULT)                 \</span>
<a name="l02225"></a>02225 <span class="preprocessor">  ({ const qword_t q                                \</span>
<a name="l02226"></a>02226 <span class="preprocessor">     = (qword_t)(SRC);                              \</span>
<a name="l02227"></a>02227 <span class="preprocessor">   WRITE_QWORD(q, (ADDR), (FAULT));                 \</span>
<a name="l02228"></a>02228 <span class="preprocessor">   })</span>
<a name="l02229"></a><a class="code" href="machine_8h.html#5db0eae0e78d9a03f04f6d3d6d6bdf86">02229</a> <span class="preprocessor"></span><span class="preprocessor">#define READ_D2E(ADDR, FAULT)                       \</span>
<a name="l02230"></a>02230 <span class="preprocessor">  ({ const dword_t dw                               \</span>
<a name="l02231"></a>02231 <span class="preprocessor">     = READ_DWORD((ADDR), (FAULT));                 \</span>
<a name="l02232"></a>02232 <span class="preprocessor">   (efloat_t)(sdword_t)dw;                          \</span>
<a name="l02233"></a>02233 <span class="preprocessor">   })</span>
<a name="l02234"></a><a class="code" href="machine_8h.html#53d8fab8142e49e161f1187a7dcc4259">02234</a> <span class="preprocessor"></span><span class="preprocessor">#define WRITE_E2D(SRC, ADDR, FAULT)                 \</span>
<a name="l02235"></a>02235 <span class="preprocessor">  ({ const dword_t dw                               \</span>
<a name="l02236"></a>02236 <span class="preprocessor">     = (sdword_t)(SRC);                             \</span>
<a name="l02237"></a>02237 <span class="preprocessor">   WRITE_DWORD(dw, (ADDR), (FAULT));                \</span>
<a name="l02238"></a>02238 <span class="preprocessor">   })</span>
<a name="l02239"></a>02239 <span class="preprocessor"></span>
<a name="l02240"></a><a class="code" href="machine_8h.html#39174cdeae287fc12ddc1ea1d2d80a60">02240</a> <span class="preprocessor">#define READ_W2E(ADDR, FAULT)                       \</span>
<a name="l02241"></a>02241 <span class="preprocessor">  ({ const word_t w                                 \</span>
<a name="l02242"></a>02242 <span class="preprocessor">     = READ_WORD((ADDR), (FAULT));                  \</span>
<a name="l02243"></a>02243 <span class="preprocessor">   (efloat_t)w;                                     \</span>
<a name="l02244"></a>02244 <span class="preprocessor">   })</span>
<a name="l02245"></a><a class="code" href="machine_8h.html#df420f0a98f9fdac910ed9fe81ee9cff">02245</a> <span class="preprocessor"></span><span class="preprocessor">#define WRITE_E2W(SRC, ADDR, FAULT)                 \</span>
<a name="l02246"></a>02246 <span class="preprocessor">  ({ const word_t w                                 \</span>
<a name="l02247"></a>02247 <span class="preprocessor">     = (word_t)(SRC);                               \</span>
<a name="l02248"></a>02248 <span class="preprocessor">   WRITE_WORD(w, (ADDR), (FAULT));                  \</span>
<a name="l02249"></a>02249 <span class="preprocessor">   })</span>
<a name="l02250"></a>02250 <span class="preprocessor"></span>
<a name="l02251"></a>02251 
<a name="l02252"></a><a class="code" href="machine_8h.html#05f08809797e64f97753ddbe35ac7944">02252</a> <span class="preprocessor">#define REP_COUNT                                       \</span>
<a name="l02253"></a>02253 <span class="preprocessor">  ((Mop-&gt;fetch.inst.rep)                                \</span>
<a name="l02254"></a>02254 <span class="preprocessor">   ? ((Mop-&gt;fetch.inst.mode &amp; MODE_ADDR32)              \</span>
<a name="l02255"></a>02255 <span class="preprocessor">     ? (SET_GPR_D(MD_REG_ECX, (GPR_D(MD_REG_ECX)) - 1)) \</span>
<a name="l02256"></a>02256 <span class="preprocessor">     : (SET_GPR_W(MD_REG_CX, (GPR_W(MD_REG_CX)) - 1)))  \</span>
<a name="l02257"></a>02257 <span class="preprocessor">   : (FALSE))</span>
<a name="l02258"></a>02258 <span class="preprocessor"></span>
<a name="l02259"></a><a class="code" href="machine_8h.html#2df217ce5f174939979768bd4f7a08c2">02259</a> <span class="preprocessor">#define REP_UNCOUNT                                     \</span>
<a name="l02260"></a>02260 <span class="preprocessor">  ((Mop-&gt;fetch.inst.rep)                                \</span>
<a name="l02261"></a>02261 <span class="preprocessor">   ? ((Mop-&gt;fetch.inst.mode &amp; MODE_ADDR32)              \</span>
<a name="l02262"></a>02262 <span class="preprocessor">     ? (SET_GPR_D(MD_REG_ECX, (GPR_D(MD_REG_ECX)) + 1)) \</span>
<a name="l02263"></a>02263 <span class="preprocessor">     : (SET_GPR_W(MD_REG_CX, (GPR_W(MD_REG_CX)) + 1)))  \</span>
<a name="l02264"></a>02264 <span class="preprocessor">   : (FALSE))</span>
<a name="l02265"></a>02265 <span class="preprocessor"></span>
<a name="l02266"></a><a class="code" href="machine_8h.html#549c54919eb30d889c7597527eb866f4">02266</a> <span class="preprocessor">#define REP_REMAINING                                   \</span>
<a name="l02267"></a>02267 <span class="preprocessor">  (Mop-&gt;fetch.inst.rep                                  \</span>
<a name="l02268"></a>02268 <span class="preprocessor">   ? ((Mop-&gt;fetch.inst.mode &amp; MODE_ADDR32)              \</span>
<a name="l02269"></a>02269 <span class="preprocessor">     ? (GPR_D(MD_REG_ECX))                              \</span>
<a name="l02270"></a>02270 <span class="preprocessor">     : (GPR_W(MD_REG_CX)) )                             \</span>
<a name="l02271"></a>02271 <span class="preprocessor">   : (0)) </span>
<a name="l02272"></a>02272 <span class="preprocessor"></span>
<a name="l02273"></a>02273 <span class="comment">// TRUE for repeat and non-zero repetitions or non-repeat</span>
<a name="l02274"></a>02274 <span class="comment">// FALSE for repeat instructions with zero repetitions</span>
<a name="l02275"></a><a class="code" href="machine_8h.html#5bd9bafe6adc2a4581d95dbe5565ed8f">02275</a> <span class="preprocessor">#define REP_FIRST(regs)                                            \</span>
<a name="l02276"></a>02276 <span class="preprocessor">  (!(Mop-&gt;fetch.inst.rep &amp;&amp; !((Mop-&gt;fetch.inst.mode &amp; MODE_ADDR32) \</span>
<a name="l02277"></a>02277 <span class="preprocessor">                              ? (regs.regs_R.dw[MD_REG_ECX])       \</span>
<a name="l02278"></a>02278 <span class="preprocessor">                              : (regs.regs_R.w[MD_REG_CX].lo))))</span>
<a name="l02279"></a>02279 <span class="preprocessor"></span>
<a name="l02280"></a>02280 <span class="comment">// TRUE for repeat and stop condition not met</span>
<a name="l02281"></a>02281 <span class="comment">// FALSE for non-repeat or repeat with stop-condition met</span>
<a name="l02282"></a><a class="code" href="machine_8h.html#2911a5787d581b95f7702e44bb50f6fa">02282</a> <span class="preprocessor">#define REP_AGAIN(regs)                                                     \</span>
<a name="l02283"></a>02283 <span class="preprocessor">  ((Mop-&gt;fetch.inst.rep)                                                    \</span>
<a name="l02284"></a>02284 <span class="preprocessor">   ? ((Mop-&gt;fetch.inst.rep == REP_REPNZ)                                    \</span>
<a name="l02285"></a>02285 <span class="preprocessor">     ? (((Mop-&gt;fetch.inst.mode &amp; MODE_ADDR32)                               \</span>
<a name="l02286"></a>02286 <span class="preprocessor">         ? (regs.regs_R.dw[MD_REG_ECX] &amp;&amp; !(regs.regs_C.aflags &amp; ZF))       \</span>
<a name="l02287"></a>02287 <span class="preprocessor">         : (regs.regs_R.w[MD_REG_CX].lo &amp;&amp; !(regs.regs_C.aflags &amp; ZF))))    \</span>
<a name="l02288"></a>02288 <span class="preprocessor">     : (((Mop-&gt;fetch.inst.rep == REP_REPZ)                                  \</span>
<a name="l02289"></a>02289 <span class="preprocessor">         ? (((Mop-&gt;fetch.inst.mode &amp; MODE_ADDR32)                           \</span>
<a name="l02290"></a>02290 <span class="preprocessor">             ? (regs.regs_R.dw[MD_REG_ECX] &amp;&amp; (regs.regs_C.aflags &amp; ZF))    \</span>
<a name="l02291"></a>02291 <span class="preprocessor">             : (regs.regs_R.w[MD_REG_CX].lo &amp;&amp; (regs.regs_C.aflags &amp; ZF)))) \</span>
<a name="l02292"></a>02292 <span class="preprocessor">         : (((Mop-&gt;fetch.inst.rep == REP_REP)                               \</span>
<a name="l02293"></a>02293 <span class="preprocessor">             ? (((Mop-&gt;fetch.inst.mode &amp; MODE_ADDR32)                       \</span>
<a name="l02294"></a>02294 <span class="preprocessor">                 ? (regs.regs_R.dw[MD_REG_ECX])                             \</span>
<a name="l02295"></a>02295 <span class="preprocessor">                 : (regs.regs_R.w[MD_REG_CX].lo)))                          \</span>
<a name="l02296"></a>02296 <span class="preprocessor">             : ((panic("bogus repeat code")),0))))))                        \</span>
<a name="l02297"></a>02297 <span class="preprocessor">   : (FALSE))</span>
<a name="l02298"></a>02298 <span class="preprocessor"></span>
<a name="l02299"></a>02299 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l02300"></a>02300 <span class="preprocessor"></span>}
<a name="l02301"></a>02301 <span class="preprocessor">#else</span>
<a name="l02302"></a>02302 <span class="preprocessor"></span><span class="preprocessor">#undef bool</span>
<a name="l02303"></a>02303 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l02304"></a>02304 <span class="preprocessor"></span>
<a name="l02305"></a>02305 <span class="preprocessor">#endif </span><span class="comment">/* X86_H */</span>
<a name="l02306"></a>02306 
<a name="l02307"></a>02307 
<a name="l02308"></a>02308 
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Aug 23 00:20:56 2010 for IRIS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
